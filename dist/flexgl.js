!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){Array.isArray(r)&&(r.filter(function(e){return Array.isArray(e)})&&(r=u(r)));return a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function o(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],o=t[e].dim[0],u=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,o,u,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,u,f,c,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:u||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},o(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return o(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var o=r[t[e].type.toUpperCase()],u=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,u,o,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,o(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var o=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e,n){if(-1===o.indexOf(e))throw Error("Error: Invalid resource type: "+e);var i=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return i.resourceType=e,r[i.name]=i,r.hasOwnProperty(i.name)||Object.defineProperty(r,i.name,{get:function(){return r[i.name]},set:function(e){r[i.name].load(e)}}),i},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function o(e,t){var r=this instanceof o?this:{},n=e,i=t,a=n._dict||{};r.vertex={},r.fragment={};var u={vertex:n.VERTEX_SHADER,fragment:n.FRAGMENT_SHADER};function f(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(a);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return a[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function c(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=i.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?f(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return r.create=function(e,t){var a=e||{},o=a.name||"default",d=a.type||"vertex",h=a.require||a.deps||[],p=a.precision||"high",m=a.debug||!1,E=a.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=e.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=c(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}(E)));var b=[],g=[];if(h.forEach(function(e){var t=i.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=c(t.fn.toString());r.length&&(r.forEach(function(e){var t=i.get(e);"subroutine"==t.resourceType&&(b=b.concat(c(t.fn.toString())))}),b=b.concat(r))}}),b.length){var v=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(v)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=f("void","main",E),m&&console.log(y);var T=function(e,t){if(e!==n.VERTEX_SHADER&&e!==n.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+i)}return r}(u[d],y);return T._shaderType=u[d],T.deps=h,T.source=y,r[d][o]=T,T},r}function u(e){var t=this instanceof u?this:{},r=e||{},n=r.container||null,f=r.canvas||document.createElement("canvas"),c=r.width||null,s=r.height||null,l=r.padding||{left:0,right:0,top:0,bottom:0},d=r.context||r.ctx||null,h=null;r.sharedFunction;"string"==typeof f&&(f="#"==f[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),n&&(n="string"==typeof n?document.getElementById(n):n,null===c&&(c=n.clientWidth),null===s&&(s=n.clientHeight)),f.width=c,f.height=s,f.style.position="absolute",f.style.marginLeft=l.left+"px",f.style.marginTop=l.top+"px",null===d&&(d=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(f)),t.ctx=d,t.canvas=f,d._dict=r.env||r.dict||r.dictionary||{};var p=new a(d),m=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,a,o){if(r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:a[0]||1024,height:a[1]||1024,texture:o||null,renderbuffer:n.createRenderbuffer()},null===r[e].texture){var u="float"==t?new Float32Array(a[0]*a[1]*4):new Uint8Array(a[0]*a[1]*4);r[e].texture=i(n).create(e,t,a,"rgba",u)}var f=r[e].renderbuffer;return n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.bindRenderbuffer(n.RENDERBUFFER,f),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[e].width,r[e].height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,f),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(d),E=new function(e,t){var r,n=e,i={},a={},u=new o(e,t);return i.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var o=[];if(a.hasOwnProperty(e)&&i.delete(e),a[e]=n.createProgram(),a[e].vs="object"==typeof t?t:u.vertex[t],a[e].fs="object"==typeof r?r:u.fragment[r],n.attachShader(a[e],a[e].vs),n.attachShader(a[e],a[e].fs),n.linkProgram(a[e]),!n.getProgramParameter(a[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(a[e]);return o=(o=o.concat(a[e].vs.deps)).concat(a[e].fs.deps),a[e].deps=o,a[e]},i.use=i.program=function(e,o,u){return a.hasOwnProperty(e)?(r=a[e],n.useProgram(r),t.link(r,r.deps),r):i.create(e,o,u)},i.delete=function(e){a.hasOwnProperty(e)&&(n.detachShader(a[e],a[e].vs),n.detachShader(a[e],a[e].fs),n.deleteProgram(a[e]),delete a[e])},i.shader=function(e,t){var r=e;return u.create(r,t),i},i.shader.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),u.create(t,e)},i.shader.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),u.create(t,e)},i}(d,p),y=(new o(d,p),d.getExtension("EXT_blend_minmax"));function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=d.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(d.ext[e]=t[e])})})}return y&&(d.MAX_EXT=y.MAX_EXT,d.MIN_EXT=y.MIN_EXT),d.ext=d.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),n&&n.appendChild(f),t.enableExtension=b,t.attribute=function(e,r,n){return p.allocate("attribute",e,r,n),Object.defineProperty(t.attribute,e,{get:function(){return p.attribute[e]},set:function(t){p.attribute[e].load(t)}}),t},t.buffer=t.attribute,t.uniform=function(e,r,n){return p.allocate("uniform",e,r,n),t.uniform.hasOwnProperty(e)||Object.defineProperty(t.uniform,e,{get:function(){return p.uniform[e]},set:function(t){p.uniform[e].load(t),d.isProgram(h)&&p.uniform[e].link(h)}}),t},t.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},t.texture=function(e,r,n,i,a,o){return p.allocate("texture",e,r,i,a,n,o),Object.defineProperty(t.texture,e,{get:function(){return p.texture[e]},set:function(t){p.texture[e].load(t)}}),t},t.texture.update=function(e,t,r,n){p.texture[e].update(t,r,n)},t.varying=function(e,r,n){return p.allocate("varying",e,r,n),t},t.framebuffer=function(e,r,n,i){i=i||p.allocate("texture",e,r,n,"rgba",null);return m.create(e,r,n,i),t.framebuffer.hasOwnProperty(e)||Object.defineProperty(t.framebuffer,e,{get:function(){return m[e]}}),t},t.framebuffer.enableRead=function(e){m[e].enableRead(h)},t.bindFramebuffer=function(e){null===e?d.bindFramebuffer(d.FRAMEBUFFER,null):d.bindFramebuffer(d.FRAMEBUFFER,m[e].ptr)},t.subroutine=function(e,r,n){return p.allocate("subroutine",e,r,n),t},t.parameter=function(e){return Object.keys(e).forEach(function(t){if(d._dict[t]=e[t],Array.isArray(d._dict[t])){var r=0;Object.defineProperty(d._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,d._dict[t]=e}})}else if("object"==typeof d._dict[t]){var n=Object.keys(d._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>d._dict[t][e]))}}),t},t.dictionary=t.parameter,t.shader=E.shader,t.program=function(e,t,r){return h=E.program(e,t,r),d},t.createProgram=function(e,t,r){return h=E.create(e,t,r),d},t.app=function(e,r){var n=t.shader.vertex(r.vs),i=t.shader.fragment(r.fs);r.framebuffer;t.program(e,n,i);var a=r.render||r.draw;return function(r){var n=t.program(e);return a.call(n,r)}},t.dimension=function(){return[f.width,f.height]},t.resources=p,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=u)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxleGdsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVW5pZm9ybSIsImdsQ29udGV4dCIsInR5cGUiLCJkYXRhIiwidW5pZm9ybSIsInRoaXMiLCJjdHgiLCJzZXJpYWxpemVBcnJheSIsImFycmF5T2ZBcnJheSIsInNhIiwiZm9yRWFjaCIsImEiLCJjb25jYXQiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJsb2NhdGlvbiIsInNpemUiLCJwYXJzZUludCIsInNsaWNlIiwibGluayIsInByb2dyYW0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJidWYiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsIkZsb2F0MzJBcnJheSIsIkludDMyQXJyYXkiLCJyZXNvdXJjZVR5cGUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJpbmRleCIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInB0ciIsInVuaWZvcm0xaSIsImxvYWQiLCJoZWFkZXIiLCJsZW4iLCJsZW5ndGgiLCJUZXh0dXJlIiwidGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJ1cGRhdGVUZXh0dXJlIiwicmVzaXplIiwiZGVsZXRlIiwiZGVsZXRlVGV4dHVyZSIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGVCdWZmZXIiLCJ2YXJ5aW5nIiwiVmFyeWluZyIsInN1YnJvdXRpbmUiLCJTdWJyb3V0aW5lIiwiZm4iLCJ0b1N0cmluZyIsInJlc291cmNlVHlwZXMiLCJhbGxvY2F0ZSIsInByb3BzIiwiaW5kZXhPZiIsIkVycm9yIiwicmVzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzZXQiLCJyZXNvdXJjZXMiLCJrZXlzIiwicmVzb3VyY2VOYW1lIiwiU2hhZGVyIiwiZ2xSZXNvdXJjZSIsInNoYWRlciIsInBhcmFtZXRlcnMiLCJfZGljdCIsInZlcnRleCIsImZyYWdtZW50Iiwic2hhZGVyVHlwZSIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJ0b0dMU0wiLCJyZXR1cm5UeXBlIiwiZ2xzbCIsInN0ciIsImVudlBhcmFtIiwicmUiLCJSZWdFeHAiLCJqb2luIiwicmVwbGFjZSIsIm1hdGNoZWQiLCJhcHBseUVudlBhcmFtZXRlcnMiLCJleHByIiwiZHR5cGUiLCJ0b0xvd2VyQ2FzZSIsImFyZ3MiLCJtYXRjaCIsImdldEV4dHJhRGVwcyIsImZuU3RyaW5nIiwiZXh0cmFEZXBzIiwibWFwIiwiZGVjbGFyZURlcCIsImRlcCIsInVuaXF1ZURlcHMiLCJkZXBzIiwibmFtZXMiLCJhcmciLCJvcHRpb24iLCJyZXF1aXJlIiwicHJlY2lzaW9uIiwiZGVidWciLCJtYWluIiwic2hhZGVyU291cmNlIiwic291cmNlQ29kZSIsInNoYWRlckFyZ3MiLCJzcGxpdCIsInRyaW0iLCJnZXREZXBzIiwic3ViUm91dGluZXMiLCJjb25zb2xlIiwibG9nIiwicHVzaCIsInN1YkRlcHMiLCJzZGVwIiwic3JlcyIsImFsbERlcHMiLCJfc2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwibGFzdEVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbXBpbGUiLCJfc2hhZGVyVHlwZSIsInNvdXJjZSIsIkZsZXhHTCIsImZsZXhnbCIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwYWRkaW5nIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29udGV4dCIsInNoYXJlZEZ1bmN0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJjYXZuYXMiLCJzdWJzdHJpbmciLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInN0eWxlIiwicG9zaXRpb24iLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiZ2wiLCJnZXRDb250ZXh0IiwiZSIsInNldHVwV2ViR0wiLCJlbnYiLCJkaWN0IiwiZGljdGlvbmFyeSIsImZyYW1lYnVmZmVycyIsIkZyYW1lYnVmZmVyIiwiZnJhbWVidWZmZXIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsInJlbmRlcmJ1ZmZlciIsImNyZWF0ZVJlbmRlcmJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsImJpbmRSZW5kZXJidWZmZXIiLCJSRU5ERVJCVUZGRVIiLCJyZW5kZXJidWZmZXJTdG9yYWdlIiwiREVQVEhfQ09NUE9ORU5UMTYiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiZnJhbWVidWZmZXJSZW5kZXJidWZmZXIiLCJERVBUSF9BVFRBQ0hNRU5UIiwiZW5hYmxlUmVhZCIsImRlbGV0ZVJlbmRlcmJ1ZmZlciIsImRlbGV0ZUZyYW1lYnVmZmVyIiwicHJvZ3JhbU1hbmFnZXIiLCJwbSIsImtlcm5lbHMiLCJzaGFkZXJzIiwidnMiLCJmcyIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwidXNlIiwidXNlUHJvZ3JhbSIsImRldGFjaFNoYWRlciIsImRlbGV0ZVByb2dyYW0iLCJibGVuZEV4dCIsImdldEV4dGVuc2lvbiIsImVuYWJsZUV4dGVuc2lvbiIsImV4dGVuc2lvbnMiLCJleHRlbnNpb24iLCJleHRQcm9wcyIsImVwIiwiZXh0IiwiTUFYX0VYVCIsIk1JTl9FWFQiLCJhcHBlbmRDaGlsZCIsImJ1ZmZlciIsImlzUHJvZ3JhbSIsInNlcmlhbGl6ZSIsImFvYSIsImZiTmFtZSIsInBhcmFtZXRlciIsImtleVZhbHVlUGFpcnMiLCJuZXdBcnJheSIsImRpY3RLZXlzIiwiZnhnbCIsImFwcCIsImRyYXciLCJyZW5kZXIiLCJkaW1lbnNpb24iLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVB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QTBDLEVBQUF5RixVQUFBLFdBQ0EsT0FBQXRGLEVBQUFqSSxNQUFBaUksRUFBQS9ILFNBR0E0SCxFQUFBckUsWUFFQXFFLFNHNVJBLG9CQUFBMEYsU0FDQUEsT0FBQTNGIiwiZmlsZSI6ImZsZXhnbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFVuaWZvcm0oZ2xDb250ZXh0LCBuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICB2YXIgdW5pZm9ybSA9ICh0aGlzIGluc3RhbmNlb2YgVW5pZm9ybSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5KGFycmF5T2ZBcnJheSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYXJyYXlPZkFycmF5LmZvckVhY2goZnVuY3Rpb24oYSl7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFVuaWZvcm0oKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlLFxuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uLFxuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZigodHlwZSA9PSAnZmxvYXQnIHx8IHR5cGUgPT0gJ2ludCcpICYmICFBcnJheS5pc0FycmF5KGRhdGEpICYmICFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpXG4gICAgICAgICAgICBkYXRhID0gW2RhdGFdO1xuXG4gICAgICAgIHZhciBidWY7XG4gICAgICAgIGlmICh0eXBlLnNsaWNlKDAsMykgPT0gJ3ZlYycgfHwgdHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCw0KSA9PSAnaXZlYycgfHwgdHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBidWYgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2l2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsMykgPT0gJ21hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm1NYXRyaXgnICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBmYWxzZSwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoJ3Jlc291cmNlVHlwZScpICYmIGRhdGEucmVzb3VyY2VUeXBlID09ICd0ZXh0dXJlJykge1xuICAgICAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgZGF0YS5wdHIpO1xuICAgICAgICAgICAgICAgIGN0eC51bmlmb3JtMWkobG9jYXRpb24sIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5pZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB1bmlmb3JtW25hbWVdID0ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IHBhcnNlSW50KHR5cGUuc2xpY2UoNCw1KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmRhdGEgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0VW5pZm9ybS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3VuaWZvcm0gJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgIT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLmRhdGEubGVuZ3RoIC8gdGhpcy5zaXplO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1RPRE86IGZpeCBkZWNsYXJhdGlvbiBmb3IgbWF0cml4XG4gICAgICAgICAgICBpZihsZW4gPiAxICYmIHR5cGUgIT0gJ21hdDQnKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIGxlbiArICddJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVuaWZvcm1bbmFtZV07XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdW5pZm9ybTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gXCIuL3VuaWZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGV4dHVyZShnbENvbnRleHQpIHtcblxuICAgIHZhciB0ZXh0dXJlID0gKHRoaXMgaW5zdGFuY2VvZiBUZXh0dXJlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICB0ZXh0dXJlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0VGV4dHVyZShuYW1lLCB0ZXhEYXRhKSB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kYXRhID0gdGV4RGF0YTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShuYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSBkaW1bMF0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1bMV0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhTdWJJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdGV4dHVyZSBjb21wcmVzc2lvblxuICAgIC8vIGZ1bmN0aW9uIGNvbXByZXNzVGV4dHVyZSh0ZXhEYXRhKSB7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGV4dCA9IChcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKVxuICAgIC8vICAgICApO1xuICAgIC8vXG4gICAgLy8gICAgIGN0eC5jb21wcmVzc2VkVGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZXh0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhULCB0ZXh0dXJlW25hbWVdLmRpbVswXSwgdGV4dHVyZVtuYW1lXS5kaW1bMV0sIDAsIHRleERhdGEpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyB9XG5cbiAgICB0ZXh0dXJlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcikge1xuICAgICAgICB2YXIgdGV4SW5kZXggPSAodGV4dHVyZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgPyB0ZXh0dXJlW25hbWVdLmluZGV4IDogdGV4dHVyZUlEKys7XG4gICAgICAgIHRleHR1cmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5kZXg6IHRleEluZGV4LFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICBkaW06IGRpbSB8fCBbNTEyLCA1MTJdLFxuICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBcImFscGhhXCIsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzYW1wbGVyOiBzYW1wbGVyIHx8IG51bGwsXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVUZXh0dXJlKClcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKVxuICAgICAgICBzZXRUZXh0dXJlKG5hbWUsIGRhdGEpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlciA9IFVuaWZvcm0oY3R4KS5jcmVhdGUobmFtZSwgJ3NhbXBsZXIyRCcsIHRleHR1cmVbbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LnVuaWZvcm0xaSh0aGlzLmxvY2F0aW9uLCB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuc2FtcGxlci5kYXRhKSA9PSAndW5kZWZpbmVkJyB8fCB0aGlzLnNhbXBsZXIuZGF0YSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKHRleERhdGEpIHtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5jb3B5RnJvbUZCTyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICBjdHguY29weVRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBjdHguUkdCQSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMF0sXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMV0sXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLnVwZGF0ZSA9IGZ1bmN0aW9uKHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLnJlc2l6ZSA9IGZ1bmN0aW9uKGRpbSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kaW0gPSBkaW07XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2xDb250ZXh0LmRlbGV0ZVRleHR1cmUodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gdGhpcy5zYW1wbGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmlmb3JtIHNhbXBsZXIyRCAnICsgdGhpcy5zYW1wbGVyLm5hbWUgKyAnO1xcbic7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tICcuL3VuaWZvcm0nO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL2F0dHJpYnV0ZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuaW1wb3J0IFZhcnlpbmcgZnJvbSAnLi92YXJ5aW5nJztcbmltcG9ydCBTdWJyb3V0aW5lIGZyb20gJy4vc3Vicm91dGluZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlKGdsQ29udGV4dCkge1xuICAgIHZhciByZXNvdXJjZSA9ICh0aGlzIGluc3RhbmNlb2YgUmVzb3VyY2UpID8gdGhpcyA6IHt9LFxuICAgICAgICBncHVSZXNvdXJjZXMgPSB7fTtcblxuICAgIHJlc291cmNlLnVuaWZvcm0gPSBuZXcgVW5pZm9ybShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLmF0dHJpYnV0ZSA9IG5ldyBBdHRyaWJ1dGUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS50ZXh0dXJlID0gbmV3IFRleHR1cmUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS52YXJ5aW5nID0gbmV3IFZhcnlpbmcoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5zdWJyb3V0aW5lID0gbmV3IFN1YnJvdXRpbmUoKTtcblxuICAgIHZhciByZXNvdXJjZVR5cGVzID0gWyd1bmlmb3JtJywgJ2F0dHJpYnV0ZScsICd0ZXh0dXJlJywgJ3ZhcnlpbmcnLCAnc3Vicm91dGluZSddO1xuXG4gICAgcmVzb3VyY2UuYWxsb2NhdGUgPSBmdW5jdGlvbih0eXBlLCBwcm9wcykge1xuICAgICAgICBpZiAocmVzb3VyY2VUeXBlcy5pbmRleE9mKHR5cGUpID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJFcnJvcjogSW52YWxpZCByZXNvdXJjZSB0eXBlOiBcIiArIHR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZVt0eXBlXS5jcmVhdGUuYXBwbHkobnVsbCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIHJlcy5yZXNvdXJjZVR5cGUgPSB0eXBlO1xuICAgICAgICBncHVSZXNvdXJjZXNbcmVzLm5hbWVdID0gcmVzO1xuICAgICAgICBpZiAoIWdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXMubmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShncHVSZXNvdXJjZXMsIHJlcy5uYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdwdVJlc291cmNlc1tyZXMubmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHJlc291cmNlLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtLCByZXNvdXJjZXMpIHtcbiAgICAgICAgdmFyIHJlcXVpcmVkUmVzb3VyY2VzID0gKEFycmF5LmlzQXJyYXkocmVzb3VyY2VzKSkgPyByZXNvdXJjZXMgOiBPYmplY3Qua2V5cyhncHVSZXNvdXJjZXMpO1xuICAgICAgICByZXF1aXJlZFJlc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgaWYgKGdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU5hbWUpKVxuICAgICAgICAgICAgICAgIGdwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHJlc291cmNlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXNvdXJjZS5jcmVhdGUgPSByZXNvdXJjZS5hbGxvY2F0ZTtcblxuICAgIHJldHVybiByZXNvdXJjZTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdHRyaWJ1dGUoZ2xDb250ZXh0KSB7XG4gICAgXG4gICAgdmFyIGF0dHJpYnV0ZSA9ICh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBhdHRyaWJ1dGVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSkge1xuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpIHx8IEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSl7XG4gICAgICAgICAgICBpZighQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZVtuYW1lXS5wdHIpO1xuICAgICAgICAgICAgY3R4LmJ1ZmZlckRhdGEoY3R4LkFSUkFZX0JVRkZFUiwgZGF0YSwgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRyaWJ1dGUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBhdHRyaWJ1dGVJRCsrLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlQnVmZmVyKCksXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKSBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSk7XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICBjdHgudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmxvY2F0aW9uLCB0aGlzLnNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgY3R4LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMubG9jYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCBhcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnYXR0cmlidXRlICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguZGVsZXRlQnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYXJ5aW5nKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHZhcnlpbmcgPSAodGhpcyBpbnN0YW5jZW9mIFZhcnlpbmcpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICB2YXJ5aW5nLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgdmFyeWluZ1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBzaXplOiBzaXplIHx8IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5saW5rID0gZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd2YXJ5aW5nICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICAgICAgICBpZih0aGlzLnNpemUgPiAxKVxuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyB0aGlzLnNpemUgKyAnXSc7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcnlpbmdbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcnlpbmc7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJyb3V0aW5lKCkge1xuXG4gICAgdmFyIHN1YnJvdXRpbmUgPSAodGhpcyBpbnN0YW5jZW9mIFN1YnJvdXRpbmUpID8gdGhpcyA6IHt9O1xuXG4gICAgc3Vicm91dGluZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICBzdWJyb3V0aW5lW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJzdWJyb3V0aW5lXCJcbiAgICAgICAgfTtcblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmZuID0gZm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbi50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YnJvdXRpbmVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBzdWJyb3V0aW5lO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2hhZGVyKGdsQ29udGV4dCwgZ2xSZXNvdXJjZSkge1xuICAgIFxuICAgIHZhciBzaGFkZXIgPSAodGhpcyBpbnN0YW5jZW9mIFNoYWRlcikgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgcmVzb3VyY2UgPSBnbFJlc291cmNlLFxuICAgICAgICBwYXJhbWV0ZXJzID0gY3R4Ll9kaWN0IHx8IHt9O1xuXG4gICAgc2hhZGVyLnZlcnRleCA9IHt9O1xuICAgIHNoYWRlci5mcmFnbWVudCA9IHt9O1xuXG4gICAgdmFyIHNoYWRlclR5cGUgPSB7XG4gICAgICAgIHZlcnRleDogY3R4LlZFUlRFWF9TSEFERVIsXG4gICAgICAgIGZyYWdtZW50OiBjdHguRlJBR01FTlRfU0hBREVSXG4gICAgfTtcblxuICAgIC8vIENvbnZlcnQgSlMgZnVuY3Rpb25zIHRvIEdMU0wgY29kZXNcbiAgICBmdW5jdGlvbiB0b0dMU0wocmV0dXJuVHlwZSwgbmFtZSwgZm4pe1xuXG4gICAgICAgIHZhciBnbHNsID0gcmV0dXJuVHlwZSArICcgJyArXG4gICAgICAgICAgICBuYW1lICsgJygnICsgYXBwbHlFbnZQYXJhbWV0ZXJzKGZuLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICAgICAvdmFyXFxzKyhbXFx3fFxcZF0rKVxccyo9XFxzKm5ld1xccysoW1xcd3xcXGRdKylcXCgoLiopXFwpL2csXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZXhwciwgbmFtZSwgZHR5cGUsIHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gW2R0eXBlLnRvTG93ZXJDYXNlKCksIG5hbWUsICc9JywgdmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IFtkdHlwZS50b0xvd2VyQ2FzZSgpLCBuYW1lXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuam9pbignICcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnJlcGxhY2UoL2ZvclxccypcXChcXHMqdmFyXFxzKy9nLCAnZm9yKGludCAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3Zhclxccy9nLCAnZmxvYXQgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC90aGlzLi9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCQoLiopXFwoKC4qKVxcKVxccyooPXw7KS9nLCBcIiQxICQyICQzXCIpO1xuICAgICAgICAgICAgLy8gLnJlcGxhY2UoL1xcJCguKj8pXFwuL2csIFwiJDEgXCIpXG5cbiAgICAgICAgaWYobmFtZSA9PSBcIm1haW5cIikge1xuICAgICAgICAgICAgZ2xzbCA9IGdsc2wucmVwbGFjZSgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqey8sICcpeycpICsgXCJcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gZ2xzbC5tYXRjaCgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqXFwpLylbMV07XG5cbiAgICAgICAgICAgIGlmKGFyZ3MgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzLnJlcGxhY2UoL1xcJChbXFx3fFxcZF0rKV8vZywgXCIkMSBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbHNsID0gZ2xzbFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccypcXCkvLCBhcmdzKycpJykgKyBcIlxcblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbHNsO1xuICAgIH1cblxuICAgIC8vc2V0IHBhcmFtZXRlcnMgaW4gSlMgZnVuY3Rpb25zIGJlZm9yZSBjb252ZXJ0aW5nIHRvIEdMU0wgY29kZXNcbiAgICBmdW5jdGlvbiBhcHBseUVudlBhcmFtZXRlcnMoc3RyKXtcbiAgICAgICAgLy9maW5kIGFsbCAkKC4uLikgYW5kIHJlcGxhY2UgdGhlbSB3aXRoIHBhcmFtZXRlcnNcbiAgICAgICAgdmFyIGVudlBhcmFtID0gT2JqZWN0LmtleXMocGFyYW1ldGVycyk7XG4gICAgICAgIGlmKGVudlBhcmFtLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIlxcXFwkXFxcXCgoXCIrZW52UGFyYW0uam9pbihcInxcIikrXCIpXFxcXClcIixcImdcIik7XG4gICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZSwgZnVuY3Rpb24obWF0Y2hlZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbbWF0Y2hlZC5zbGljZSgyLG1hdGNoZWQubGVuZ3RoLTEpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSB1bmlmb3JtcyB0byBiZSB1c2VkIGFzIHBhcmFtZXRlcnMgaW4gc2hhZGVycywgbGlrZSAkKHVuaWZvcm1OYW1lKVxuICAgICAgICAvLyB2YXIgZW52VW5pZm9ybXMgPSBPYmplY3Qua2V5cyhyZXNvdXJjZS51bmlmb3JtKTtcbiAgICAgICAgLy8gcmUgPSBuZXcgUmVnRXhwKFwiXFxcXCRcXFxcKChcIitlbnZVbmlmb3Jtcy5qb2luKFwifFwiKStcIilcXFxcKVwiLFwiZ1wiKTtcbiAgICAgICAgLy8gc3RyID0gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKG1hdGNoZWQpe1xuICAgICAgICAvLyAgICAgcmV0dXJuIHJlc291cmNlLnVuaWZvcm1bbWF0Y2hlZC5zbGljZSgyLG1hdGNoZWQubGVuZ3RoLTEpXS5kYXRhO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGUoc2hhZGVyVHlwZSwgc2hhZGVyU291cmNlKSB7XG4gICAgICAgIGlmIChzaGFkZXJUeXBlICE9PSBjdHguVkVSVEVYX1NIQURFUiAmJiBzaGFkZXJUeXBlICE9PSBjdHguRlJBR01FTlRfU0hBREVSKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJFcnJvcjogdW5rbm93biBzaGFkZXIgdHlwZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX3NoYWRlciA9IGN0eC5jcmVhdGVTaGFkZXIoc2hhZGVyVHlwZSk7XG4gICAgICAgIGN0eC5zaGFkZXJTb3VyY2UoX3NoYWRlciwgc2hhZGVyU291cmNlKTtcbiAgICAgICAgY3R4LmNvbXBpbGVTaGFkZXIoX3NoYWRlcik7XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhlIGNvbXBpbGUgc3RhdHVzLCBnZXQgY29tcGlsZSBlcnJvciBpZiBhbnlcbiAgICAgICAgdmFyIGNvbXBpbGVkID0gY3R4LmdldFNoYWRlclBhcmFtZXRlcihfc2hhZGVyLCBjdHguQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoIWNvbXBpbGVkKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yID0gY3R4LmdldFNoYWRlckluZm9Mb2coX3NoYWRlcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UgKyAnXFxuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbXBpbGluZyBzaGFkZXIgJ1wiICsgX3NoYWRlciArIFwiJzpcIiArIGxhc3RFcnJvcik7XG5cbiAgICAgICAgICAgIGN0eC5kZWxldGVTaGFkZXIoX3NoYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfc2hhZGVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERlcHMoZm4pIHtcbiAgICAgICAgdmFyIGRlcHMgPSBbXSxcbiAgICAgICAgICAgIHNvdXJjZUNvZGUgPSBmbi50b1N0cmluZygpLFxuICAgICAgICAgICAgc2hhZGVyQXJncyA9IHNvdXJjZUNvZGUubWF0Y2goL2Z1bmN0aW9uXFxzLio/XFwoKFteKV0qKVxcKS8pLFxuICAgICAgICAgICAgYXJncyA9IChzaGFkZXJBcmdzICE9PSBudWxsICYmIHNoYWRlckFyZ3MubGVuZ3RoKSA/IHNoYWRlckFyZ3NbMV0gOiBbXTtcbiAgICAgICAgLy8gYXJncyA9IGFyZ3MucmVwbGFjZSgvKD86XFxyXFxufFxccnxcXG58XFxzKS9nLCAnJyk7XG4gICAgICAgIC8vXG4gICAgICAgIGlmKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXBzID0gYXJncy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnJlcGxhY2UoL1xcL1xcKi4qXFwqXFwvLywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXh0cmFEZXBzID0gZ2V0RXh0cmFEZXBzKHNvdXJjZUNvZGUpO1xuICAgICAgICBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoZXh0cmFEZXBzXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXBzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVwcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRFeHRyYURlcHMoZm5TdHJpbmcpIHtcbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IGZuU3RyaW5nLm1hdGNoKC90aGlzXFwuKFxcdyspL2cpO1xuICAgICAgICBpZihleHRyYURlcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5tYXAoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuc2xpY2UoNSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0cmFEZXBzIHx8IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY2xhcmVEZXAoZGVwKSB7XG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgaWYodHlwZW9mIHJlcyA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlL2RlcGVuZGVuY2UgXCInICsgZGVwICsgJ1wiIGlzIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgaWYocmVzLnJlc291cmNlVHlwZSA9PSAnc3Vicm91dGluZScpXG4gICAgICAgICAgICByZXR1cm4gdG9HTFNMKHJlcy50eXBlLCByZXMubmFtZSwgcmVzLmZuKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHJlcy5oZWFkZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bmlxdWVEZXBzKGRlcHMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0ge307XG4gICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkLCBpKXtcbiAgICAgICAgICAgIG5hbWVzW2RdID0gaTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG5hbWVzKTtcbiAgICB9XG5cbiAgICBzaGFkZXIuY3JlYXRlID0gZnVuY3Rpb24oYXJnLCBmbil7XG4gICAgICAgIHZhciBvcHRpb24gPSBhcmcgfHwge30sXG4gICAgICAgICAgICBuYW1lID0gb3B0aW9uLm5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB0eXBlID0gb3B0aW9uLnR5cGUgfHwgXCJ2ZXJ0ZXhcIixcbiAgICAgICAgICAgIGRlcHMgPSBvcHRpb24ucmVxdWlyZSB8fCBvcHRpb24uZGVwcyB8fCBbXSxcbiAgICAgICAgICAgIHByZWNpc2lvbiA9IG9wdGlvbi5wcmVjaXNpb24gfHwgXCJoaWdoXCIsXG4gICAgICAgICAgICBkZWJ1ZyA9IG9wdGlvbi5kZWJ1ZyB8fCBmYWxzZSxcbiAgICAgICAgICAgIG1haW4gPSBvcHRpb24ubWFpbiB8fCBmbiB8fCBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIHZhciBzaGFkZXJTb3VyY2UgPSAncHJlY2lzaW9uICcgKyBwcmVjaXNpb24gKyAncCBmbG9hdDtcXG4nO1xuXG4gICAgICAgIGlmKGRlcHMubGVuZ3RoID09PSAwKSBkZXBzID0gdW5pcXVlRGVwcyhnZXREZXBzKG1haW4pKTtcblxuICAgICAgICAvL2dldCBkZXBlbmRlbmNlIGZyb20gc3Vicm91dGluZXMgaWYgYW55XG4gICAgICAgIHZhciBleHRyYURlcHMgPSBbXSxcbiAgICAgICAgICAgIHN1YlJvdXRpbmVzID0gW107XG5cbiAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2UuZ2V0KGRlcCk7XG4gICAgICAgICAgICBpZih0eXBlb2YgcmVzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGVwKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvciAoJ0Vycm9yISBVbmRlZmluZWQgdmFyaWFibGUgaW4gc2hhZGVyOiAnKyAgZGVwLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocmVzLnJlc291cmNlVHlwZSA9PSAnc3Vicm91dGluZScpIHtcbiAgICAgICAgICAgICAgICBzdWJSb3V0aW5lcy5wdXNoKHJlcy5uYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgc3ViRGVwcyA9IGdldEV4dHJhRGVwcyhyZXMuZm4udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgaWYoc3ViRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBtYWtlIHRoaXMgcmVjdXJzaXZlIHRvIGNoZWNrIGFsbCBzdWJyb3V0aW5lIGRlcHNcbiAgICAgICAgICAgICAgICAgICAgc3ViRGVwcy5mb3JFYWNoKGZ1bmN0aW9uKHNkZXApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyZXMgPSByZXNvdXJjZS5nZXQoc2RlcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzcmVzLnJlc291cmNlVHlwZSA9PSAnc3Vicm91dGluZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFEZXBzID0gZXh0cmFEZXBzLmNvbmNhdChnZXRFeHRyYURlcHMoc3Jlcy5mbi50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFEZXBzID0gZXh0cmFEZXBzLmNvbmNhdChzdWJEZXBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYoZXh0cmFEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGFsbERlcHMgPSBleHRyYURlcHNcbiAgICAgICAgICAgIC8vIC5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIGRlcHMuaW5kZXhPZihkKSA9PT0gLTE7XG4gICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgLmNvbmNhdChkZXBzLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3ViUm91dGluZXMuaW5kZXhPZihkKSA9PT0gLTE7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5jb25jYXQoc3ViUm91dGluZXMpO1xuXG4gICAgICAgICAgICBkZXBzID0gdW5pcXVlRGVwcyhhbGxEZXBzKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkZXBzKSl7XG4gICAgICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgICAgICBzaGFkZXJTb3VyY2UgKz0gZGVjbGFyZURlcChkZXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlb2YoZGVwcykgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGRlcHMpLmZvckVhY2goZnVuY3Rpb24ocmVzb3VyY2VUeXBlKXtcbiAgICAgICAgICAgICAgICBkZXBzW3Jlc291cmNlVHlwZV0uZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgICAgICAgICBzaGFkZXJTb3VyY2UgKz0gZGVjbGFyZURlcChkZXApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHNoYWRlclNvdXJjZSArPSB0b0dMU0woJ3ZvaWQnLCAnbWFpbicsIG1haW4pO1xuICAgICAgICBpZihkZWJ1ZylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSk7XG4gICAgICAgIHZhciBfc2hhZGVyID0gY29tcGlsZShzaGFkZXJUeXBlW3R5cGVdLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBfc2hhZGVyLl9zaGFkZXJUeXBlID0gc2hhZGVyVHlwZVt0eXBlXTtcbiAgICAgICAgX3NoYWRlci5kZXBzID0gZGVwcztcbiAgICAgICAgX3NoYWRlci5zb3VyY2UgPSBzaGFkZXJTb3VyY2U7XG4gICAgICAgIHNoYWRlclt0eXBlXVtuYW1lXSA9IF9zaGFkZXI7XG4gICAgICAgIHJldHVybiBfc2hhZGVyO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFkZXI7XG59XG4iLCJpbXBvcnQgUmVzb3VyY2UgZnJvbSAnLi9yZXNvdXJjZSc7XG5pbXBvcnQgUHJvZ3JhbU1hbmFnZXIgZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9LFxuICAgICAgICBvcHRpb25zID0gYXJnIHx8IHt9LFxuICAgICAgICBjb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBudWxsLFxuICAgICAgICBjYW52YXMgPSBvcHRpb25zLmNhbnZhcyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgbnVsbCxcbiAgICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgbnVsbCxcbiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyB8fCB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgfSxcbiAgICAgICAgY3R4ID0gb3B0aW9ucy5jb250ZXh0IHx8IG9wdGlvbnMuY3R4IHx8IG51bGwsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgcHJvZ3JhbSA9IG51bGwsXG4gICAgICAgIHNoYXJlZEZ1bmN0aW9uID0gb3B0aW9ucy5zaGFyZWRGdW5jdGlvbiB8fCB7fTtcblxuXG4gICAgaWYgKHR5cGVvZihjYW52YXMpID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKGNhbnZhc1swXSA9PSBcIiNcIikgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzLnN1YnN0cmluZygxKSk7XG4gICAgICAgIGVsc2UgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIgPSAodHlwZW9mKGNvbnRhaW5lcikgPT0gXCJzdHJpbmdcIikgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpIDogY29udGFpbmVyO1xuICAgICAgICBpZiAod2lkdGggPT09IG51bGwpIHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICBpZiAoaGVpZ2h0ID09PSBudWxsKSBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgICAvLyB3aWR0aCAtPSBwYWRkaW5nLmxlZnQgKyBwYWRkaW5nLnJpZ2h0O1xuICAgIC8vIGhlaWdodCAtPSBwYWRkaW5nLnRvcCArIHBhZGRpbmcuYm90dG9tO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gcGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBwYWRkaW5nLnRvcCArIFwicHhcIjtcblxuICAgIGlmIChjdHggPT09IG51bGwpXG4gICAgICAgIGN0eCA9IHNldHVwV2ViR0woY2FudmFzKTtcbiAgICBmbGV4Z2wuY3R4ID0gY3R4O1xuICAgIGZsZXhnbC5jYW52YXMgPSBjYW52YXM7XG5cbiAgICBjdHguX2RpY3QgPSBvcHRpb25zLmVudiB8fCBvcHRpb25zLmRpY3QgfHwgb3B0aW9ucy5kaWN0aW9uYXJ5IHx8IHt9O1xuXG5cbiAgICB2YXIgcmVzb3VyY2VzID0gbmV3IFJlc291cmNlKGN0eCksXG4gICAgICAgIGZyYW1lYnVmZmVycyA9IG5ldyBGcmFtZWJ1ZmZlcihjdHgpLFxuICAgICAgICBwcm9ncmFtTWFuYWdlciA9IG5ldyBQcm9ncmFtTWFuYWdlcihjdHgsIHJlc291cmNlcyksXG4gICAgICAgIHNoYWRlcnMgPSBuZXcgU2hhZGVyKGN0eCwgcmVzb3VyY2VzKTtcblxuICAgIHZhciBibGVuZEV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJFWFRfYmxlbmRfbWlubWF4XCIpO1xuICAgIGlmIChibGVuZEV4dCkge1xuICAgICAgICBjdHguTUFYX0VYVCA9IGJsZW5kRXh0Lk1BWF9FWFQ7XG4gICAgICAgIGN0eC5NSU5fRVhUID0gYmxlbmRFeHQuTUlOX0VYVDtcbiAgICB9XG5cbiAgICBjdHguZXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7XG4gICAgZW5hYmxlRXh0ZW5zaW9uKFtcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdFwiLFxuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiXG4gICAgXSk7XG5cbiAgICBpZiAoY29udGFpbmVyKVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuICAgIGZ1bmN0aW9uIHNldHVwV2ViR0woY2FudmFzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IFtcIndlYmdsXCIsIFwiZXhwZXJpbWVudGFsLXdlYmdsXCJdO1xuICAgICAgICB2YXIgZ2wgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlmIChnbCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuYWJsZUV4dGVuc2lvbihleHRlbnNpb25zKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleHRlbnNpb25zKSkgZXh0ZW5zaW9ucyA9IFtleHRlbnNpb25zXTtcbiAgICAgICAgZXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgICAgICAgICAgdmFyIGV4dFByb3BzID0gY3R4LmdldEV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgICAgICAgICAgaWYgKGV4dFByb3BzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0UHJvcHMpLmZvckVhY2goZnVuY3Rpb24oZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHQuaGFzT3duUHJvcGVydHkoZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZXh0W2VwXSA9IGV4dFByb3BzW2VwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBmbGV4Z2wuZW5hYmxlRXh0ZW5zaW9uID0gZW5hYmxlRXh0ZW5zaW9uO1xuXG4gICAgLyoqXG4gICAgICogQWxsb2NhdGUgQXR0cmlidXRlcyBpbiB2ZXJ0ZXggYnVmZmVyIGFycmF5IHN0b3JlZCBpbiBHUFUgbWVtb3J5XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIGF0dHJpYnV0ZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcImF0dHJpYnV0ZVwiLCBuYW1lLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5hdHRyaWJ1dGUsIG5hbWUsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuICAgIGZsZXhnbC5idWZmZXIgPSBmbGV4Z2wuYXR0cmlidXRlOyAvL2FsaWFzXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgdW5pZm9ybSB2YXJpYWJsZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC51bmlmb3JtID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ1bmlmb3JtXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC51bmlmb3JtLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLnVuaWZvcm0sIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5pc1Byb2dyYW0ocHJvZ3JhbSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5saW5rKHByb2dyYW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIGZsZXhnbC51bmlmb3JtLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGFvYSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYW9hLmZvckVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgc2EgPSBzYS5jb25jYXQoYSk7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzYTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgdGV4dHVyZSB0eXBlOiB1bnNpZ25lZF9ieXRlIG9yIGZsb2F0LCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbY2hhbm5lbD0nYWxwaGEnXSBXZWJHTCBmb3JtYXRzIChyZ2JhLCBhbHBoYSlcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtzYW1wbGVyPW51bGxdIEZMZXhHTCBVbmlmb3JtIE9iamVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnRleHR1cmUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhLCBkaW0sIGNoYW5uZWwsIHNhbXBsZXIpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidGV4dHVyZVwiLCBuYW1lLCB0eXBlLCBkaW0sIGNoYW5uZWwsIGRhdGEsIHNhbXBsZXIpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLnRleHR1cmUsIG5hbWUsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy50ZXh0dXJlW25hbWVdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHJlc291cmNlcy50ZXh0dXJlW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC50ZXh0dXJlLnVwZGF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHJlc291cmNlcy50ZXh0dXJlW25hbWVdLnVwZGF0ZShkYXRhLCBvZmZzZXQsIGRpbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbdHlwZV0gVmFyeWluZyB2YXJpYWJsZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBbc2l6ZT0xXSBkYXRhIGFycmF5XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudmFyeWluZyA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidmFyeWluZ1wiLCBuYW1lLCB0eXBlLCBzaXplKTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIGF0dHJpYnV0ZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFt0ZXh0dXJlPW51bGxdIEZMZXhHTCBUZXh0dXJlIE9iamVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGV4dHVyZSB8fCByZXNvdXJjZXMuYWxsb2NhdGUoJ3RleHR1cmUnLCBuYW1lLCB0eXBlLCBkaW0sICdyZ2JhJywgbnVsbCk7XG5cbiAgICAgICAgZnJhbWVidWZmZXJzLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpO1xuICAgICAgICBpZiAoIWZsZXhnbC5mcmFtZWJ1ZmZlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5mcmFtZWJ1ZmZlciwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcnNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgZnJhbWVidWZmZXJzW25hbWVdLmVuYWJsZVJlYWQocHJvZ3JhbSk7XG4gICAgfVxuXG4gICAgZmxleGdsLmJpbmRGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKGZiTmFtZSkge1xuICAgICAgICBpZiAoZmJOYW1lID09PSBudWxsKVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJzW2ZiTmFtZV0ucHRyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuc3Vicm91dGluZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInN1YnJvdXRpbmVcIiwgbmFtZSwgdHlwZSwgZm4pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5wYXJhbWV0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZVBhaXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGtleVZhbHVlUGFpcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IGtleVZhbHVlUGFpcnNba2V5XTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN0eC5fZGljdFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4Ll9kaWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZVBhaXJzW2tleV1baSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IG5ld0FycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGN0eC5fZGljdFtrZXldKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBkaWN0S2V5cyA9IE9iamVjdC5rZXlzKGN0eC5fZGljdFtrZXldKTtcbiAgICAgICAgICAgICAgICBmeGdsLnVuaWZvcm0oJ2RpY3QnK2tleSwgJ2Zsb2F0JywgZGljdEtleXMubWFwKGQ9PmN0eC5fZGljdFtrZXldW2RdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmRpY3Rpb25hcnkgPSBmbGV4Z2wucGFyYW1ldGVyO1xuXG4gICAgZmxleGdsLnNoYWRlciA9IHByb2dyYW1NYW5hZ2VyLnNoYWRlcjtcblxuICAgIGZsZXhnbC5wcm9ncmFtID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIHByb2dyYW0gPSBwcm9ncmFtTWFuYWdlci5wcm9ncmFtKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuXG4gICAgZmxleGdsLmNyZWF0ZVByb2dyYW0gPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgcHJvZ3JhbSA9IHByb2dyYW1NYW5hZ2VyLmNyZWF0ZShuYW1lLCB2cywgZnMpO1xuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cblxuICAgIGZsZXhnbC5hcHAgPSBmdW5jdGlvbihuYW1lLCBwcm9wcykge1xuICAgICAgICB2YXIgdnMgPSBmbGV4Z2wuc2hhZGVyLnZlcnRleChwcm9wcy52cyksXG4gICAgICAgICAgICBmcyA9IGZsZXhnbC5zaGFkZXIuZnJhZ21lbnQocHJvcHMuZnMpLFxuICAgICAgICAgICAgZmIgPSBwcm9wcy5mcmFtZWJ1ZmZlciB8fCBudWxsO1xuXG4gICAgICAgIGZsZXhnbC5wcm9ncmFtKG5hbWUsIHZzLCBmcyk7XG5cbiAgICAgICAgdmFyIGRyYXcgPSBwcm9wcy5yZW5kZXIgfHwgcHJvcHMuZHJhdztcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIGdsID0gZmxleGdsLnByb2dyYW0obmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gZHJhdy5jYWxsKGdsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZsZXhnbC5kaW1lbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuICAgIH1cblxuICAgIGZsZXhnbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7XG5cbiAgICByZXR1cm4gZmxleGdsO1xufVxuIiwiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVidWZmZXIoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSAodGhpcyBpbnN0YW5jZW9mIEZyYW1lYnVmZmVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnJhbWVidWZmZXIuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0gPSB7XG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgd2lkdGg6IGRpbVswXSB8fCAxMDI0LFxuICAgICAgICAgICAgaGVpZ2h0OiBkaW1bMV0gfHwgMTAyNCxcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlcjogY3R4LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSAodHlwZSA9PSAnZmxvYXQnKSA/XG4gICAgICAgICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KSA6XG4gICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGltWzBdICogZGltWzFdICogNCk7XG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID0gVGV4dHVyZShjdHgpLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIFwicmdiYVwiLCBidWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbmRlcmJ1ZmZlciA9IGZyYW1lYnVmZmVyW25hbWVdLnJlbmRlcmJ1ZmZlcjtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgIGN0eC5yZW5kZXJidWZmZXJTdG9yYWdlKFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLndpZHRoLFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZS5wdHIsXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlclxuICAgICAgICApO1xuICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUucHRyKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZS5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy50ZXh0dXJlLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh0aGlzLnRleHR1cmUubG9jYXRpb24sIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMucmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZS5wdHIpXG4gICAgICAgICAgICBjdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcltuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJhbWVidWZmZXI7XG59XG4iLCJpbXBvcnQgU2hhZGVyIGZyb20gJy4vc2hhZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUHJvZ3JhbShnbENvbnRleHQsIHJlc291cmNlcykge1xuXG4gICAgdmFyIHByb2dyYW0sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgcG0gPSB7fSxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFkZXJzID0gbmV3IFNoYWRlcihnbENvbnRleHQsIHJlc291cmNlcyk7XG5cbiAgICBwbS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBuYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdnMgPSB2cyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGZzID0gZnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBkZXBzID0gW107XG5cbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHBtLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0gPSBjdHguY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0udnMgPSAodHlwZW9mIHZzID09IFwib2JqZWN0XCIpID8gdnMgOiBzaGFkZXJzLnZlcnRleFt2c107XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZnMgPSAodHlwZW9mIGZzID09IFwib2JqZWN0XCIpID8gZnMgOiBzaGFkZXJzLmZyYWdtZW50W2ZzXTtcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0udnMuZGVwcyk7XG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLmZzLmRlcHMpO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmRlcHMgPSBkZXBzO1xuXG4gICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgIH1cblxuICAgIHBtLnVzZSA9IHBtLnByb2dyYW0gPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHByb2dyYW0gPSBrZXJuZWxzW25hbWVdO1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhwcm9ncmFtLCBwcm9ncmFtLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcG0uY3JlYXRlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbS5kZWxldGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbS5zaGFkZXIgPSBmdW5jdGlvbihhcmcsIGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJnO1xuICAgICAgICBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgICAgIHJldHVybiBwbTtcbiAgICB9XG5cbiAgICBwbS5zaGFkZXIudmVydGV4ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcInZlcnRleFwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIH1cblxuICAgIHBtLnNoYWRlci5mcmFnbWVudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgdHlwZTogXCJmcmFnbWVudFwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIH1cblxuICAgIHJldHVybiBwbTtcbn1cbiIsImltcG9ydCBGbGV4R0wgZnJvbSAnLi9mbGV4Z2wnO1xuXG4oZnVuY3Rpb24gbWFrZUdsb2JhbCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93LkZsZXhHTCA9IEZsZXhHTDtcbiAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=