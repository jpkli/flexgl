!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},u=e;function o(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){Array.isArray(r)&&(r.filter(function(e){return Array.isArray(e)})&&(r=o(r)));return a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=u.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=o(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),u["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),u["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),u["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(u.activeTexture(u.TEXTURE0+i.index),u.bindTexture(u.TEXTURE_2D,i.ptr),u.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function u(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],u=t[e].dim[0],o=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,u,o,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,o,f,c,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:o||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},u(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e),this},t[i].load=function(e){return u(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var u=r[t[e].type.toUpperCase()],o=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,o,u,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,u(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,u){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==u&&u.length&&a(e,u),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var u=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===u.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function u(e){var t=this instanceof u?this:{},r=e||{},n=r.container||null,i=r.canvas||document.createElement("canvas"),o=r.width||null,f=r.height||null,c=r.padding||{left:0,right:0,top:0,bottom:0},s=r.context||r.ctx||null;r.sharedFunction;"string"==typeof i&&(i="#"==i[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),n&&(n="string"==typeof n?document.getElementById(n):n,null===o&&(o=n.clientWidth),null===f&&(f=n.clientHeight)),i.width=o,i.height=f,i.style.position="absolute",i.style.marginLeft=c.left+"px",i.style.marginTop=c.top+"px",null===s&&(s=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(i)),t.ctx=s,t.canvas=i,t.resources=l,s._dict=r.env||r.dict||r.dictionary||{};var l=new a(s),d=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(s),h=new function(e,t){var r={},n=e,i={};function a(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}function u(e,t){var r=/\s*(attribute|uniform)\s+\w+\s+(\w+)/;e.split("\n").forEach(function(e){var n=r.exec(e);n&&t.push(n[2])})}return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var a=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs=t,i[e].fs=r,n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);a=(a=a.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=a},r.use=function(e,r,o){if(i.hasOwnProperty(e))return n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e];var f=a(n,n.VERTEX_SHADER,r),c=a(n,n.FRAGMENT_SHADER,o);return f.deps=[],u(r,f.deps),c.deps=[],u(o,c.deps),this.create(e,f,c),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r}(s,l),p=null,m=s.getExtension("EXT_blend_minmax");function E(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=s.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(s.ext[e]=t[e])})})}return m&&(s.MAX_EXT=m.MAX_EXT,s.MIN_EXT=m.MIN_EXT),s.ext=s.getExtension("ANGLE_instanced_arrays"),E(["OES_texture_float","OES_texture_float_linear"]),n&&n.appendChild(i),t.enableExtension=E,t.attribute=function(e,r,n){return l.allocate("attribute",e,r,n),t.attribute.hasOwnProperty(e)||Object.defineProperty(t.attribute,e,{get:()=>l.attribute[e],set(t){l.attribute[e].load(t)}}),t},t.uniform=function(e,r,n){return l.allocate("uniform",e,r,n),t.uniform.hasOwnProperty(e)||Object.defineProperty(t.uniform,e,{get:function(){return l.uniform[e]},set:function(t){l.uniform[e].load(t),s.isProgram(p)&&l.uniform[e].link(p)}}),t},t.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},t.texture=function(e,r,n,i,a,u){return l.allocate("texture",e,r,i,a,n,u),Object.defineProperty(t.texture,e,{get:function(){return l.texture[e]},set:function(t){l.texture[e].load(t)}}),t},t.texture.update=function(e,t,r,n){l.texture[e].update(t,r,n)},t.varying=function(e,r,n){return l.allocate("varying",e,r,n),t},t.framebuffer=function(e,r,n,i){i=i||l.allocate("texture",e,r,n,"rgba",null);return d.create(e,r,n,i),t.framebuffer.hasOwnProperty(e)||Object.defineProperty(t.framebuffer,e,{get:function(){return d[e]}}),t},t.framebuffer.enableRead=function(e,t){d[e].enableRead(t)},t.bindFramebuffer=function(e){null===e?s.bindFramebuffer(s.FRAMEBUFFER,null):s.bindFramebuffer(s.FRAMEBUFFER,d[e].ptr)},t.subroutine=function(e,r,n){return l.allocate("subroutine",e,r,n),t},t.parameter=function(e){return Object.keys(e).forEach(function(t){if(s._dict[t]=e[t],Array.isArray(s._dict[t])){var r=0;Object.defineProperty(s._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,s._dict[t]=e}})}else if("object"==typeof s._dict[t]){var n=Object.keys(s._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>s._dict[t][e]))}}),t},t.dictionary=t.parameter,t.shader=h.shader,t.app=function(e,r){return function(n){return p=h.use(e,r.vertex_shader_source,r.fragment_shader_source),r.render.call(t,n)}},t.dimension=function(){return[i.width,i.height]},t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=u)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWVidWZmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Byb2dyYW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2J1bmRsZS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlVuaWZvcm0iLCJnbENvbnRleHQiLCJ0eXBlIiwiZGF0YSIsInVuaWZvcm0iLCJ0aGlzIiwiY3R4Iiwic2VyaWFsaXplQXJyYXkiLCJhcnJheU9mQXJyYXkiLCJzYSIsImZvckVhY2giLCJhIiwiY29uY2F0IiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIiwibG9jYXRpb24iLCJzaXplIiwicGFyc2VJbnQiLCJzbGljZSIsImxpbmsiLCJwcm9ncmFtIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiYnVmIiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJGbG9hdDMyQXJyYXkiLCJJbnQzMkFycmF5IiwicmVzb3VyY2VUeXBlIiwiYWN0aXZlVGV4dHVyZSIsIlRFWFRVUkUwIiwiaW5kZXgiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJwdHIiLCJ1bmlmb3JtMWkiLCJsb2FkIiwiaGVhZGVyIiwibGVuIiwibGVuZ3RoIiwiVGV4dHVyZSIsInRleHR1cmUiLCJ0ZXh0dXJlSUQiLCJzZXRUZXh0dXJlIiwidGV4RGF0YSIsInRvVXBwZXJDYXNlIiwiZm9ybWF0IiwiY2hhbm5lbCIsIndpZHRoIiwiZGltIiwiaGVpZ2h0IiwidGV4SW1hZ2UyRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJzYW1wbGVyIiwidGV4SW5kZXgiLCJjcmVhdGVUZXh0dXJlIiwiY29weUZyb21GQk8iLCJjb3B5VGV4SW1hZ2UyRCIsIlJHQkEiLCJ1cGRhdGUiLCJvZmZzZXQiLCJ0ZXhTdWJJbWFnZTJEIiwidXBkYXRlVGV4dHVyZSIsInJlc2l6ZSIsImRlbGV0ZSIsImRlbGV0ZVRleHR1cmUiLCJSZXNvdXJjZSIsInJlc291cmNlIiwiZ3B1UmVzb3VyY2VzIiwiYXR0cmlidXRlIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJzZXRBdHRyaWJ1dGUiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlQnVmZmVyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImFycmF5QnVmZmVyIiwiZGVsZXRlQnVmZmVyIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlX25hbWVzIiwia2V5cyIsInJlc291cmNlTmFtZSIsIkZsZXhHTCIsImFyZyIsImZsZXhnbCIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwYWRkaW5nIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29udGV4dCIsInNoYXJlZEZ1bmN0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJjYXZuYXMiLCJzdWJzdHJpbmciLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInN0eWxlIiwicG9zaXRpb24iLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwibmFtZXMiLCJnbCIsImdldENvbnRleHQiLCJlIiwic2V0dXBXZWJHTCIsInJlc291cmNlcyIsIl9kaWN0IiwiZW52IiwiZGljdCIsImRpY3Rpb25hcnkiLCJmcmFtZWJ1ZmZlcnMiLCJGcmFtZWJ1ZmZlciIsImZyYW1lYnVmZmVyIiwiY3JlYXRlRnJhbWVidWZmZXIiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsImZyYW1lYnVmZmVyVGV4dHVyZTJEIiwiQ09MT1JfQVRUQUNITUVOVDAiLCJlbmFibGVSZWFkIiwiYmluZFJlbmRlcmJ1ZmZlciIsIlJFTkRFUkJVRkZFUiIsImRlbGV0ZVJlbmRlcmJ1ZmZlciIsInJlbmRlcmJ1ZmZlciIsImRlbGV0ZUZyYW1lYnVmZmVyIiwia2VybmVscyIsImNyZWF0ZVNoYWRlciIsInNvdXJjZSIsInNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImNvbnNvbGUiLCJsb2ciLCJnZXRTaGFkZXJJbmZvTG9nIiwiZGVsZXRlU2hhZGVyIiwiYWRkRGVwcyIsImRlcHMiLCJyZSIsInNwbGl0IiwidiIsInJlc3VsdCIsImV4ZWMiLCJwdXNoIiwidnMiLCJmcyIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwidXNlIiwidnNvdXJjZSIsImZzb3VyY2UiLCJ1c2VQcm9ncmFtIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsImRldGFjaFNoYWRlciIsImRlbGV0ZVByb2dyYW0iLCJyZWFsUHJvZ3JhbSIsImJsZW5kRXh0IiwiZ2V0RXh0ZW5zaW9uIiwiZW5hYmxlRXh0ZW5zaW9uIiwiZXh0ZW5zaW9ucyIsImV4dGVuc2lvbiIsImV4dFByb3BzIiwiZXAiLCJleHQiLCJNQVhfRVhUIiwiTUlOX0VYVCIsImFwcGVuZENoaWxkIiwiW29iamVjdCBPYmplY3RdIiwiaXNQcm9ncmFtIiwic2VyaWFsaXplIiwiYW9hIiwiZmJOYW1lIiwicGFyYW1ldGVyIiwia2V5VmFsdWVQYWlycyIsIm5ld0FycmF5IiwiZGljdEtleXMiLCJmeGdsIiwibWFwIiwiYXBwIiwiYXJncyIsInZlcnRleF9zaGFkZXJfc291cmNlIiwiZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSIsInJlbmRlciIsImRpbWVuc2lvbiIsIndpbmRvdyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFD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LEtBQUFuRyxFQUFBbUksTUFBQWxKLElBQ0E2TixLQUFBaE4sUUFBQSxPQUFBYixFQUFBLFFBQUE0TixFQUFBRSxJQUFBL08sR0FBQWdDLEVBQUFtSSxNQUFBbEosR0FBQWpCLFFBR0F1SSxHQUdBQSxFQUFBK0IsV0FBQS9CLEVBQUFtRyxVQUNBbkcsRUFBQWlELE9BQUF6SSxFQUFBeUksT0FHQWpELEVBQUF5RyxJQUFBLFNBQUEvTyxFQUFBdUksR0FFQSxnQkFBQXlHLEdBRUEsT0FEQXhCLEVBQUExSyxFQUFBa0ssSUFBQWhOLEVBQUF1SSxFQUFBMEcscUJBQUExRyxFQUFBMkcsd0JBQ0EzRyxFQUFBNEcsT0FBQXZQLEtBQUEwSSxFQUFBMEcsS0FpRkExRyxFQUFBOEcsVUFBQSxXQUNBLE9BQUEzRyxFQUFBaEUsTUFBQWdFLEVBQUE5RCxTQUdBMkQsU0d6VkEsb0JBQUErRyxTQUNBQSxPQUFBakgiLCJmaWxlIjoiZmxleGdsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVW5pZm9ybShnbENvbnRleHQsIG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgIHZhciB1bmlmb3JtID0gKHRoaXMgaW5zdGFuY2VvZiBVbmlmb3JtKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplQXJyYXkoYXJyYXlPZkFycmF5KSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhcnJheU9mQXJyYXkuZm9yRWFjaChmdW5jdGlvbihhKXtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VW5pZm9ybSgpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24sXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zaXplLFxuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCh0eXBlID09ICdmbG9hdCcgfHwgdHlwZSA9PSAnaW50JykgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSlcbiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07XG5cbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHR5cGUuc2xpY2UoMCwzKSA9PSAndmVjJyB8fCB0eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDQpID09ICdpdmVjJyB8fCB0eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnaXYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCwzKSA9PSAnbWF0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybU1hdHJpeCcgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGZhbHNlLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2VUeXBlJykgJiYgZGF0YS5yZXNvdXJjZVR5cGUgPT0gJ3RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2JpbmQgJyArIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgZGF0YS5wdHIpO1xuICAgICAgICAgICAgICAgIGN0eC51bmlmb3JtMWkobG9jYXRpb24sIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5pZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB1bmlmb3JtW25hbWVdID0ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IHBhcnNlSW50KHR5cGUuc2xpY2UoNCw1KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmRhdGEgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0VW5pZm9ybS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3VuaWZvcm0gJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgIT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLmRhdGEubGVuZ3RoIC8gdGhpcy5zaXplO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1RPRE86IGZpeCBkZWNsYXJhdGlvbiBmb3IgbWF0cml4XG4gICAgICAgICAgICBpZihsZW4gPiAxICYmIHR5cGUgIT0gJ21hdDQnKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIGxlbiArICddJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVuaWZvcm1bbmFtZV07XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdW5pZm9ybTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gXCIuL3VuaWZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGV4dHVyZShnbENvbnRleHQpIHtcblxuICAgIHZhciB0ZXh0dXJlID0gKHRoaXMgaW5zdGFuY2VvZiBUZXh0dXJlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICB0ZXh0dXJlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0VGV4dHVyZShuYW1lLCB0ZXhEYXRhKSBcbiAgICB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kYXRhID0gdGV4RGF0YTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShuYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSBkaW1bMF0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1bMV0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhTdWJJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdGV4dHVyZSBjb21wcmVzc2lvblxuICAgIC8vIGZ1bmN0aW9uIGNvbXByZXNzVGV4dHVyZSh0ZXhEYXRhKSB7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGV4dCA9IChcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKVxuICAgIC8vICAgICApO1xuICAgIC8vXG4gICAgLy8gICAgIGN0eC5jb21wcmVzc2VkVGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZXh0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhULCB0ZXh0dXJlW25hbWVdLmRpbVswXSwgdGV4dHVyZVtuYW1lXS5kaW1bMV0sIDAsIHRleERhdGEpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyB9XG5cbiAgICB0ZXh0dXJlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcikge1xuICAgICAgICB2YXIgdGV4SW5kZXggPSAodGV4dHVyZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgPyB0ZXh0dXJlW25hbWVdLmluZGV4IDogdGV4dHVyZUlEKys7XG4gICAgICAgIHRleHR1cmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5kZXg6IHRleEluZGV4LFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICBkaW06IGRpbSB8fCBbNTEyLCA1MTJdLFxuICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBcImFscGhhXCIsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzYW1wbGVyOiBzYW1wbGVyIHx8IG51bGwsXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVUZXh0dXJlKClcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKVxuICAgICAgICBzZXRUZXh0dXJlKG5hbWUsIGRhdGEpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlciA9IFVuaWZvcm0oY3R4KS5jcmVhdGUobmFtZSwgJ3NhbXBsZXIyRCcsIHRleHR1cmVbbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LnVuaWZvcm0xaSh0aGlzLmxvY2F0aW9uLCB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuc2FtcGxlci5kYXRhKSA9PSAndW5kZWZpbmVkJyB8fCB0aGlzLnNhbXBsZXIuZGF0YSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB9ZWxzZXtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygndGV4dHVyZSBkYXRhIGlzIG51bGwhISEnKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxvYWQgPSBmdW5jdGlvbih0ZXhEYXRhKSB7XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uY29weUZyb21GQk8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgY3R4LmNvcHlUZXhJbWFnZTJEKFxuICAgICAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgY3R4LlJHQkEsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzBdLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS51cGRhdGUgPSBmdW5jdGlvbih0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICAgICAgdXBkYXRlVGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0ZXh0dXJlW25hbWVdLnJlc2l6ZSA9IGZ1bmN0aW9uKGRpbSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kaW0gPSBkaW07XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2xDb250ZXh0LmRlbGV0ZVRleHR1cmUodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gdGhpcy5zYW1wbGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmlmb3JtIHNhbXBsZXIyRCAnICsgdGhpcy5zYW1wbGVyLm5hbWUgKyAnO1xcbic7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tICcuL3VuaWZvcm0nO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL2F0dHJpYnV0ZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuaW1wb3J0IFZhcnlpbmcgZnJvbSAnLi92YXJ5aW5nJztcbmltcG9ydCBTdWJyb3V0aW5lIGZyb20gJy4vc3Vicm91dGluZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIHJlc291cmNlID0gKHRoaXMgaW5zdGFuY2VvZiBSZXNvdXJjZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGdwdVJlc291cmNlcyA9IHt9O1xuXG4gICAgcmVzb3VyY2UudW5pZm9ybSA9IG5ldyBVbmlmb3JtKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UuYXR0cmlidXRlID0gbmV3IEF0dHJpYnV0ZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnRleHR1cmUgPSBuZXcgVGV4dHVyZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnZhcnlpbmcgPSBuZXcgVmFyeWluZyhnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnN1YnJvdXRpbmUgPSBuZXcgU3Vicm91dGluZSgpO1xuXG4gICAgdmFyIHJlc291cmNlVHlwZXMgPSBbJ3VuaWZvcm0nLCAnYXR0cmlidXRlJywgJ3RleHR1cmUnLCAndmFyeWluZycsICdzdWJyb3V0aW5lJ107XG5cbiAgICByZXNvdXJjZS5hbGxvY2F0ZSA9IGZ1bmN0aW9uKHR5cGUpIFxuICAgIHtcbiAgICAgICAgaWYgKHJlc291cmNlVHlwZXMuaW5kZXhPZih0eXBlKSA9PT0gLTEpICB7IHRocm93IEVycm9yKFwiRXJyb3I6IEludmFsaWQgcmVzb3VyY2UgdHlwZTogXCIgKyB0eXBlKTsgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlW3R5cGVdLmNyZWF0ZS5hcHBseShudWxsLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgcmVzLnJlc291cmNlVHlwZSA9IHR5cGU7XG4gICAgICAgIGdwdVJlc291cmNlc1tyZXMubmFtZV0gPSByZXM7XG5cbiAgICAgICAgaWYgKCFncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzLm5hbWUpKSBcbiAgICAgICAge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdwdVJlc291cmNlcywgcmVzLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXTt9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkgeyBncHVSZXNvdXJjZXNbcmVzLm5hbWVdLmxvYWQoZGF0YSk7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UubGluayA9IGZ1bmN0aW9uKHByb2dyYW0sIHJlc291cmNlX25hbWVzKSB7XG4gICAgICAgIHZhciByZXF1aXJlZFJlc291cmNlTmFtZXMgPSAoQXJyYXkuaXNBcnJheShyZXNvdXJjZV9uYW1lcykpID8gcmVzb3VyY2VfbmFtZXMgOiBPYmplY3Qua2V5cyhncHVSZXNvdXJjZXMpO1xuICAgICAgICByZXF1aXJlZFJlc291cmNlTmFtZXMuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzb3VyY2VOYW1lKSkge1xuICAgICAgICAgICAgICAgIGdwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHJlc291cmNlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTtcbiAgICB9XG4gICAgcmVzb3VyY2UuY3JlYXRlID0gcmVzb3VyY2UuYWxsb2NhdGU7XG5cbiAgICByZXR1cm4gcmVzb3VyY2U7XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXR0cmlidXRlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIGF0dHJpYnV0ZSA9ICh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBhdHRyaWJ1dGVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBpZiggQXJyYXkuaXNBcnJheShkYXRhKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkgKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZVtuYW1lXS5wdHIpO1xuICAgICAgICAgICAgY3R4LmJ1ZmZlckRhdGEoY3R4LkFSUkFZX0JVRkZFUiwgZGF0YSwgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGF0dHJpYnV0ZVtuYW1lXS5wdHIgPT09IGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyKTtcbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyID0gYXR0cmlidXRlW25hbWVdLnB0cjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF0dHJpYnV0ZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IGF0dHJpYnV0ZUlEKyssXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVCdWZmZXIoKSxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpIFxuICAgICAgICAgICAge3NldEF0dHJpYnV0ZShuYW1lLCBkYXRhKTt9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSBcbiAgICAgICAge1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5sb2NhdGlvbiwgdGhpcy5zaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxvYWQgPSBmdW5jdGlvbihhcnJheUJ1ZmZlcikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkgXG4gICAgICAgICAgICB7cmV0dXJuICdhdHRyaWJ1dGUgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSArICc7XFxuJzt9XG4gICAgICAgIFxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5kZWxldGVCdWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZhcnlpbmcoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdmFyeWluZyA9ICh0aGlzIGluc3RhbmNlb2YgVmFyeWluZykgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIHZhcnlpbmcuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICB2YXJ5aW5nW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIHNpemU6IHNpemUgfHwgMSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmxpbmsgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3ZhcnlpbmcgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZTtcbiAgICAgICAgICAgIGlmKHRoaXMuc2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIHRoaXMuc2l6ZSArICddJztcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyeWluZ1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFyeWluZztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1YnJvdXRpbmUoKSB7XG5cbiAgICB2YXIgc3Vicm91dGluZSA9ICh0aGlzIGluc3RhbmNlb2YgU3Vicm91dGluZSkgPyB0aGlzIDoge307XG5cbiAgICBzdWJyb3V0aW5lLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZm46IGZuLFxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInN1YnJvdXRpbmVcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uZm4gPSBmbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3Vicm91dGluZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN1YnJvdXRpbmU7XG59XG4iLCJpbXBvcnQgUmVzb3VyY2UgZnJvbSAnLi9yZXNvdXJjZSc7XG5pbXBvcnQgUHJvZ3JhbSBmcm9tICcuL3Byb2dyYW0nO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuLy8gaW1wb3J0IFJlYWN0aXZlIGZyb20gJy4vcmVhY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9O1xuXG5cbiAgICB2YXIgb3B0aW9ucyA9IGFyZyB8fCB7fSxcbiAgICAgICAgY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXIgfHwgbnVsbCxcbiAgICAgICAgY2FudmFzID0gb3B0aW9ucy5jYW52YXMgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IG51bGwsXG4gICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgfHwge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGN0eCA9IG9wdGlvbnMuY29udGV4dCB8fCBvcHRpb25zLmN0eCB8fCBudWxsLFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYXJlZEZ1bmN0aW9uID0gb3B0aW9ucy5zaGFyZWRGdW5jdGlvbiB8fCB7fTtcblxuXG5cbiAgICBpZiAodHlwZW9mKGNhbnZhcykgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY2FudmFzWzBdID09IFwiI1wiKSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgZWxzZSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnRhaW5lciA9ICh0eXBlb2YoY29udGFpbmVyKSA9PSBcInN0cmluZ1wiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikgOiBjb250YWluZXI7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmIChoZWlnaHQgPT09IG51bGwpIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8vIHdpZHRoIC09IHBhZGRpbmcubGVmdCArIHBhZGRpbmcucmlnaHQ7XG4gICAgLy8gaGVpZ2h0IC09IHBhZGRpbmcudG9wICsgcGFkZGluZy5ib3R0b207XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpbkxlZnQgPSBwYWRkaW5nLmxlZnQgKyBcInB4XCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpblRvcCA9IHBhZGRpbmcudG9wICsgXCJweFwiO1xuXG5cbiAgICBpZiAoY3R4ID09PSBudWxsKVxuICAgICAgICBjdHggPSBzZXR1cFdlYkdMKGNhbnZhcyk7XG4gICAgZmxleGdsLmN0eCA9IGN0eDtcbiAgICBmbGV4Z2wuY2FudmFzID0gY2FudmFzO1xuICAgIGZsZXhnbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7XG4gICAgY3R4Ll9kaWN0ID0gb3B0aW9ucy5lbnYgfHwgb3B0aW9ucy5kaWN0IHx8IG9wdGlvbnMuZGljdGlvbmFyeSB8fCB7fTtcblxuICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2UoY3R4KSxcbiAgICAgICAgZnJhbWVidWZmZXJzID0gbmV3IEZyYW1lYnVmZmVyKGN0eCksXG4gICAgICAgIHByb2dyYW0gPSBuZXcgUHJvZ3JhbShjdHgsIHJlc291cmNlcyksXG4gICAgICAgIHJlYWxQcm9ncmFtID0gbnVsbDtcblxuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cbiAgICBjdHguZXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7XG4gICAgZW5hYmxlRXh0ZW5zaW9uKFtcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdFwiLFxuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiXG4gICAgXSk7XG4gICAgaWYgKGNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cblxuICAgIGZ1bmN0aW9uIHNldHVwV2ViR0woY2FudmFzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IFtcIndlYmdsXCIsIFwiZXhwZXJpbWVudGFsLXdlYmdsXCJdO1xuICAgICAgICB2YXIgZ2wgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlmIChnbCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuYWJsZUV4dGVuc2lvbihleHRlbnNpb25zKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleHRlbnNpb25zKSkgZXh0ZW5zaW9ucyA9IFtleHRlbnNpb25zXTtcbiAgICAgICAgZXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgICAgICAgICAgdmFyIGV4dFByb3BzID0gY3R4LmdldEV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgICAgICAgICAgaWYgKGV4dFByb3BzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0UHJvcHMpLmZvckVhY2goZnVuY3Rpb24oZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHQuaGFzT3duUHJvcGVydHkoZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZXh0W2VwXSA9IGV4dFByb3BzW2VwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZmxleGdsLmVuYWJsZUV4dGVuc2lvbiA9IGVuYWJsZUV4dGVuc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIEF0dHJpYnV0ZXMgaW4gdmVydGV4IGJ1ZmZlciBhcnJheSBzdG9yZWQgaW4gR1BVIG1lbW9yeVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuYXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJhdHRyaWJ1dGVcIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLmF0dHJpYnV0ZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5hdHRyaWJ1dGUsIG5hbWUsIHsgLy9hZnRlciBhbGxvY2F0aW5nLCBmbGV4Z2wgZ2V0cyBuZXcga2V5IGF0dHJpYnV0ZSwgaGVscGluZyBlYXNpbHkgY2hhbmdlIGF0dHJpYnV0ZSBkYXRhLlxuICAgICAgICAgICAgICAgIGdldCgpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldChkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcbiAgICAvLyBmbGV4Z2wuYnVmZmVyID0gZmxleGdsLmF0dHJpYnV0ZTsgLy9hbGlhc1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHVuaWZvcm0gdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudW5pZm9ybSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidW5pZm9ybVwiLCBuYW1lLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgaWYgKCFmbGV4Z2wudW5pZm9ybS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC51bmlmb3JtLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy51bmlmb3JtW25hbWVdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdHguaXNQcm9ncmFtKHJlYWxQcm9ncmFtKSkgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxpbmsocmVhbFByb2dyYW0pOyAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICBmbGV4Z2wudW5pZm9ybS5zZXJpYWxpemUgPSBmdW5jdGlvbihhb2EpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFvYS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHRleHR1cmUgdHlwZTogdW5zaWduZWRfYnl0ZSBvciBmbG9hdCwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW2NoYW5uZWw9J2FscGhhJ10gV2ViR0wgZm9ybWF0cyAocmdiYSwgYWxwaGEpXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbc2FtcGxlcj1udWxsXSBGTGV4R0wgVW5pZm9ybSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC50ZXh0dXJlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSwgZGltLCBjaGFubmVsLCBzYW1wbGVyKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInRleHR1cmVcIiwgbmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC50ZXh0dXJlLCBuYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudGV4dHVyZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wudGV4dHVyZS51cGRhdGUgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS51cGRhdGUoZGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW3R5cGVdIFZhcnlpbmcgdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW3NpemU9MV0gZGF0YSBhcnJheVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnZhcnlpbmcgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInZhcnlpbmdcIiwgbmFtZSwgdHlwZSwgc2l6ZSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZT1udWxsXSBGTGV4R0wgVGV4dHVyZSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmUgfHwgcmVzb3VyY2VzLmFsbG9jYXRlKCd0ZXh0dXJlJywgbmFtZSwgdHlwZSwgZGltLCAncmdiYScsIG51bGwpO1xuICAgICAgICBmcmFtZWJ1ZmZlcnMuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSk7XG5cbiAgICAgICAgaWYgKCFmbGV4Z2wuZnJhbWVidWZmZXIuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuZnJhbWVidWZmZXIsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihuYW1lLCBwcm9ncmFtKSB7XG4gICAgICAgIGZyYW1lYnVmZmVyc1tuYW1lXS5lbmFibGVSZWFkKHByb2dyYW0pO1xuICAgIH1cblxuICAgIGZsZXhnbC5iaW5kRnJhbWVidWZmZXIgPSBmdW5jdGlvbihmYk5hbWUpIHtcbiAgICAgICAgaWYgKGZiTmFtZSA9PT0gbnVsbClcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyc1tmYk5hbWVdLnB0cik7XG4gICAgfVxuXG4gICAgZmxleGdsLnN1YnJvdXRpbmUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJzdWJyb3V0aW5lXCIsIG5hbWUsIHR5cGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wucGFyYW1ldGVyID0gZnVuY3Rpb24oa2V5VmFsdWVQYWlycykge1xuICAgICAgICBPYmplY3Qua2V5cyhrZXlWYWx1ZVBhaXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBrZXlWYWx1ZVBhaXJzW2tleV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjdHguX2RpY3Rba2V5XSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eC5fZGljdCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5VmFsdWVQYWlyc1trZXldW2krK107XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBuZXdBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihjdHguX2RpY3Rba2V5XSkgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGljdEtleXMgPSBPYmplY3Qua2V5cyhjdHguX2RpY3Rba2V5XSk7XG4gICAgICAgICAgICAgICAgZnhnbC51bmlmb3JtKCdkaWN0JytrZXksICdmbG9hdCcsIGRpY3RLZXlzLm1hcChkPT5jdHguX2RpY3Rba2V5XVtkXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5kaWN0aW9uYXJ5ID0gZmxleGdsLnBhcmFtZXRlcjtcbiAgICBmbGV4Z2wuc2hhZGVyID0gcHJvZ3JhbS5zaGFkZXI7XG5cblxuICAgIGZsZXhnbC5hcHAgPSBmdW5jdGlvbihuYW1lLCBvcHRpb25zKSB7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZ3Mpe1xuICAgICAgICAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCBvcHRpb25zLnZlcnRleF9zaGFkZXJfc291cmNlLCBvcHRpb25zLmZyYWdtZW50X3NoYWRlcl9zb3VyY2UpO1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMucmVuZGVyLmNhbGwoZmxleGdsLCBhcmdzKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gaWYobnVtID09PSAwKXtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgLy8gICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgb3B0aW9ucy52ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgb3B0aW9ucy5mcmFnbWVudF9zaGFkZXJfc291cmNlKTtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX3N1bV90ZXh0dXJlJyk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy50ZXh0dXJlWyd1X3RleHR1cmUnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIGVsc2UgaWYobnVtID09PSAxKXtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2Zfc3VtX3RleHR1cmUnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBlbHNlIGlmKG51bSA9PT0gMil7XG4gICAgICAgIC8vICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcihudWxsKTtcblxuICAgICAgICAvLyAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIDEwMjQsIDEpO1xuICAgICAgICAvLyAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIoJ2ZfbWVtX3RleHR1cmVfMScpO1xuICAgICAgICAvLyAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCBvcHRpb25zLnZlcnRleF9zaGFkZXJfc291cmNlLCBvcHRpb25zLmZyYWdtZW50X3NoYWRlcl9zb3VyY2UpO1xuXG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9tZW1fdGV4dHVyZV8wJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZWxzZSBpZihudW0gPT09IDMpe1xuICAgICAgICAvLyAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG5cbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX21lbV90ZXh0dXJlXzAnKTtcbiAgICAgICAgLy8gICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgb3B0aW9ucy52ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgb3B0aW9ucy5mcmFnbWVudF9zaGFkZXJfc291cmNlKTtcblxuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9zdW1fdGV4dHVyZScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIGVsc2UgaWYobnVtID09PSA0KXtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpOyBcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX21lbV90ZXh0dXJlXzEnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBlbHNlIGlmKG51bSA9PT0gNSl7XG4gICAgICAgIC8vICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcihudWxsKTtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX21lbV90ZXh0dXJlXzAnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyB0aGlzLnVuaWZvcm1bJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pOyAgICBcbiAgICAgICAgLy8gdmFyIGRyYXcgPSBvcHRpb25zLnJlbmRlciB8fCBvcHRpb25zLmRyYXc7XG5cbiAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgLy8gICAgIC8vIHZhciBnbCA9IGZsZXhnbC5wcm9ncmFtKG5hbWUpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGRyYXcuY2FsbChjdHgsIGFyZ3MpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gY3R4LmRyYXdBcnJheXMoY3R4LkxJTkVTLCAwLCAyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGltZW5zaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmxleGdsO1xufVxuIiwiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVidWZmZXIoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSAodGhpcyBpbnN0YW5jZW9mIEZyYW1lYnVmZmVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnJhbWVidWZmZXIuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0gPSB7XG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgd2lkdGg6IGRpbVswXSB8fCAxMDI0LFxuICAgICAgICAgICAgaGVpZ2h0OiBkaW1bMV0gfHwgMTAyNCxcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgIC8vIHJlbmRlcmJ1ZmZlcjogY3R4LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgKGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gICAgIHZhciBidWYgPSAodHlwZSA9PSAnZmxvYXQnKSA/XG4gICAgICAgIC8vICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KSA6XG4gICAgICAgIC8vICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGltWzBdICogZGltWzFdICogNCk7XG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID0gVGV4dHVyZShjdHgpLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIFwicmdiYVwiLCBidWYpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gdmFyIHJlbmRlcmJ1ZmZlciA9IGZyYW1lYnVmZmVyW25hbWVdLnJlbmRlcmJ1ZmZlcjtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyW25hbWVdLnB0cik7XG4gICAgICAgIC8vIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgIC8vIGN0eC5yZW5kZXJidWZmZXJTdG9yYWdlKFxuICAgICAgICAvLyAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgLy8gICAgIGN0eC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLndpZHRoLFxuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0uaGVpZ2h0XG4gICAgICAgIC8vICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZS5wdHIsXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIC8vIGN0eC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihcbiAgICAgICAgLy8gICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgLy8gICAgIGN0eC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAvLyAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgLy8gICAgIHJlbmRlcmJ1ZmZlclxuICAgICAgICAvLyApO1xuICAgICAgICAvLyBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUucHRyKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZS5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy50ZXh0dXJlLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh0aGlzLnRleHR1cmUubG9jYXRpb24sIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgLy8gICAgIHRoaXMudGV4dHVyZS5saW5rKHByb2dyYW0pO1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLnJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUucHRyKVxuICAgICAgICAgICAgY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZyYW1lYnVmZmVyO1xufVxuIiwiaW1wb3J0IFNoYWRlciBmcm9tICcuL3NoYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2dyYW0oZ2xDb250ZXh0LCByZXNvdXJjZXMpIHtcblxuICAgIHZhciBwcm9ncmFtID0ge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAga2VybmVscyA9IHt9O1xuICAgICAgICAvLyBzaGFkZXJzID0gbmV3IFNoYWRlcihnbENvbnRleHQsIHJlc291cmNlcyk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNvdXJjZSkge1xuICAgICAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICB2YXIgbmFtZSA9IG5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB2cyA9IHZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZnMgPSBmcyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcblxuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBrZXJuZWxzW25hbWVdID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS52cyA9IHZzO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmZzID0gZnM7XG4gICAgICAgIC8vIGtlcm5lbHNbbmFtZV0udnMgPSAodHlwZW9mIHZzID09IFwib2JqZWN0XCIpID8gdnMgOiBzaGFkZXJzLnZlcnRleFt2c107XG4gICAgICAgIC8vIGtlcm5lbHNbbmFtZV0uZnMgPSAodHlwZW9mIGZzID09IFwib2JqZWN0XCIpID8gZnMgOiBzaGFkZXJzLmZyYWdtZW50W2ZzXTtcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLnZzLmRlcHMpO1xuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS5mcy5kZXBzKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5kZXBzID0gZGVwcztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZERlcHMoc291cmNlLCBkZXBzKXtcbiAgICAgICAgdmFyIHJlID0gL1xccyooYXR0cmlidXRlfHVuaWZvcm0pXFxzK1xcdytcXHMrKFxcdyspLzsgICAgICAgIFxuICAgICAgICBzb3VyY2Uuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24odil7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmUuZXhlYyh2KTtcbiAgICAgICAgICAgIGlmKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgZGVwcy5wdXNoKHJlc3VsdFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb2dyYW0udXNlID0gZnVuY3Rpb24obmFtZSwgdnNvdXJjZSwgZnNvdXJjZSkge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LlZFUlRFWF9TSEFERVIsIHZzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIGZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LkZSQUdNRU5UX1NIQURFUiwgZnNvdXJjZSk7XG5cbiAgICAgICAgICAgIHZzLmRlcHMgPSBbXTtcbiAgICAgICAgICAgIGFkZERlcHModnNvdXJjZSwgdnMuZGVwcyk7XG4gICAgICAgICAgICBmcy5kZXBzID0gW107XG4gICAgICAgICAgICBhZGREZXBzKGZzb3VyY2UsIGZzLmRlcHMpO1xuIFxuICAgICAgICAgICAgdGhpcy5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5kZWxldGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwcm9ncmFtLnNoYWRlciA9IGZ1bmN0aW9uKGFyZywgZm4pIHtcbiAgICAvLyAgICAgdmFyIG9wdGlvbnMgPSBhcmc7XG4gICAgLy8gICAgIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICAvLyAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgLy8gfVxuXG4gICAgLy8gcHJvZ3JhbS52ZXJ0ZXggPSBmdW5jdGlvbihmbikge1xuICAgIC8vICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAvLyAgICAgICAgIHR5cGU6IFwidmVydGV4XCJcbiAgICAvLyAgICAgfTtcbiAgICAvLyAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgLy8gICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgLy8gfVxuXG4gICAgLy8gcHJvZ3JhbS5mcmFnbWVudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgLy8gICAgIHZhciBvcHRpb25zID0ge1xuICAgIC8vICAgICAgICAgdHlwZTogXCJmcmFnbWVudFwiXG4gICAgLy8gICAgIH07XG4gICAgLy8gICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgIC8vICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIC8vIH1cblxuICAgIHJldHVybiBwcm9ncmFtO1xufVxuIiwiaW1wb3J0IEZsZXhHTCBmcm9tICcuL2ZsZXhnbCc7XG5cbihmdW5jdGlvbiBtYWtlR2xvYmFsKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuRmxleEdMID0gRmxleEdMO1xuICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==