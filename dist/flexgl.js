!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},u=e;function o(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){Array.isArray(r)&&(r.filter(function(e){return Array.isArray(e)})&&(r=o(r)));return a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=u.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=o(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),u["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),u["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),u["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(u.activeTexture(u.TEXTURE0+i.index),u.bindTexture(u.TEXTURE_2D,i.ptr),u.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function u(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],u=t[e].dim[0],o=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,u,o,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,o,f,c,l,s){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:o||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:s||null,ptr:r.createTexture()},u(i,l),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return u(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var u=r[t[e].type.toUpperCase()],o=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,o,u,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,u(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,u){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==u&&u.length&&a(e,u),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var u=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===u.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function u(e,t){var r=this instanceof u?this:{},n=e;n._dict;r.vertex={},r.fragment={};var i={vertex:n.VERTEX_SHADER,fragment:n.FRAGMENT_SHADER};return r.create=function(e,t){var a=e||{},u=a.name||"default",o=a.type||"vertex",f=t,c=function(e,t){if(e!==n.VERTEX_SHADER&&e!==n.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+i)}return r}(i[o],f);return c._shaderType=i[o],c.deps=deps,c.source=f,r[o][u]=c,c},r}function o(e){var t=this instanceof o?this:{},r=e||{},n=r.container||null,f=r.canvas||document.createElement("canvas"),c=r.width||null,l=r.height||null,s=r.padding||{left:0,right:0,top:0,bottom:0},d=r.context||r.ctx||null,h=null;r.sharedFunction;"string"==typeof f&&(f="#"==f[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),n&&(n="string"==typeof n?document.getElementById(n):n,null===c&&(c=n.clientWidth),null===l&&(l=n.clientHeight)),f.width=c,f.height=l,f.style.position="absolute",f.style.marginLeft=s.left+"px",f.style.marginTop=s.top+"px",null===d&&(d=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(f)),t.ctx=d,t.canvas=f,d._dict=r.env||r.dict||r.dictionary||{};var m=new a(d),p=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,a,u){if(r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:a[0]||1024,height:a[1]||1024,texture:u||null,renderbuffer:n.createRenderbuffer()},null===r[e].texture){var o="float"==t?new Float32Array(a[0]*a[1]*4):new Uint8Array(a[0]*a[1]*4);r[e].texture=i(n).create(e,t,a,"rgba",o)}var f=r[e].renderbuffer;return n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.bindRenderbuffer(n.RENDERBUFFER,f),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[e].width,r[e].height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,f),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(d),E=new function(e,t){var r={},n=e,i={},a=new u(e,t);return r.create=function(e,t,u){e=e||"default",t=t||"default",u=u||"default";var o=[];if(i.hasOwnProperty(e)&&r.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof u?u:a.fragment[u],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);return o=(o=o.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=o,i[e]},r.use=function(e,a,u){return i.hasOwnProperty(e)?(r=i[e],n.useProgram(r),t.link(r,r.deps),r):r.create(e,a,u)},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(d,m),y=(new u(d,m),d.getExtension("EXT_blend_minmax"));function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=d.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(d.ext[e]=t[e])})})}return y&&(d.MAX_EXT=y.MAX_EXT,d.MIN_EXT=y.MIN_EXT),d.ext=d.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),n&&n.appendChild(f),t.enableExtension=b,t.attribute=function(e,r,n){return m.allocate("attribute",e,r,n),Object.defineProperty(t.attribute,e,{get:()=>m.attribute[e],set(t){m.attribute[e].load(t)}}),t},t.buffer=t.attribute,t.uniform=function(e,r,n){return m.allocate("uniform",e,r,n),t.uniform.hasOwnProperty(e)||Object.defineProperty(t.uniform,e,{get:function(){return m.uniform[e]},set:function(t){m.uniform[e].load(t),d.isProgram(h)&&m.uniform[e].link(h)}}),t},t.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},t.texture=function(e,r,n,i,a,u){return m.allocate("texture",e,r,i,a,n,u),Object.defineProperty(t.texture,e,{get:function(){return m.texture[e]},set:function(t){m.texture[e].load(t)}}),t},t.texture.update=function(e,t,r,n){m.texture[e].update(t,r,n)},t.varying=function(e,r,n){return m.allocate("varying",e,r,n),t},t.framebuffer=function(e,r,n,i){i=i||m.allocate("texture",e,r,n,"rgba",null);return p.create(e,r,n,i),t.framebuffer.hasOwnProperty(e)||Object.defineProperty(t.framebuffer,e,{get:function(){return p[e]}}),t},t.framebuffer.enableRead=function(e){p[e].enableRead(h)},t.bindFramebuffer=function(e){null===e?d.bindFramebuffer(d.FRAMEBUFFER,null):d.bindFramebuffer(d.FRAMEBUFFER,p[e].ptr)},t.subroutine=function(e,r,n){return m.allocate("subroutine",e,r,n),t},t.parameter=function(e){return Object.keys(e).forEach(function(t){if(d._dict[t]=e[t],Array.isArray(d._dict[t])){var r=0;Object.defineProperty(d._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,d._dict[t]=e}})}else if("object"==typeof d._dict[t]){var n=Object.keys(d._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>d._dict[t][e]))}}),t},t.dictionary=t.parameter,t.shader=E.shader,t.program=function(e,t,r){return h=E.use(e,t,r),d},t.createProgram=function(e,t,r){return h=E.create(e,t,r),d},t.app=function(e,r){var n=t.vertex(r.vs),i=t.fragment(r.fs);r.framebuffer;t.program(e,n,i);var a=r.render||r.draw;return function(r){var n=t.program(e);return a.call(n,r)}},t.dimension=function(){return[f.width,f.height]},t.resources=m,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=o)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxleGdsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVW5pZm9ybSIsImdsQ29udGV4dCIsInR5cGUiLCJkYXRhIiwidW5pZm9ybSIsInRoaXMiLCJjdHgiLCJzZXJpYWxpemVBcnJheSIsImFycmF5T2ZBcnJheSIsInNhIiwiZm9yRWFjaCIsImEiLCJjb25jYXQiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJsb2NhdGlvbiIsInNpemUiLCJwYXJzZUludCIsInNsaWNlIiwibGluayIsInByb2dyYW0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJidWYiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsIkZsb2F0MzJBcnJheSIsIkludDMyQXJyYXkiLCJyZXNvdXJjZVR5cGUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJpbmRleCIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInB0ciIsInVuaWZvcm0xaSIsImxvYWQiLCJoZWFkZXIiLCJsZW4iLCJsZW5ndGgiLCJUZXh0dXJlIiwidGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJ1cGRhdGVUZXh0dXJlIiwicmVzaXplIiwiZGVsZXRlIiwiZGVsZXRlVGV4dHVyZSIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGVCdWZmZXIiLCJ2YXJ5aW5nIiwiVmFyeWluZyIsInN1YnJvdXRpbmUiLCJTdWJyb3V0aW5lIiwiZm4iLCJ0b1N0cmluZyIsInJlc291cmNlVHlwZXMiLCJhbGxvY2F0ZSIsImluZGV4T2YiLCJFcnJvciIsInJlcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic2V0IiwicmVzb3VyY2VzIiwia2V5cyIsInJlc291cmNlTmFtZSIsIlNoYWRlciIsImdsUmVzb3VyY2UiLCJzaGFkZXIiLCJfZGljdCIsInZlcnRleCIsImZyYWdtZW50Iiwic2hhZGVyVHlwZSIsIlZFUlRFWF9TSEFERVIiLCJGUkFHTUVOVF9TSEFERVIiLCJhcmciLCJvcHRpb24iLCJzaGFkZXJTb3VyY2UiLCJfc2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwibGFzdEVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbnNvbGUiLCJsb2ciLCJjb21waWxlIiwiX3NoYWRlclR5cGUiLCJkZXBzIiwic291cmNlIiwiRmxleEdMIiwiZmxleGdsIiwib3B0aW9ucyIsImNvbnRhaW5lciIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInBhZGRpbmciLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJjb250ZXh0IiwicHJvZ3JhbV8iLCJzaGFyZWRGdW5jdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIm5hbWVzIiwiZ2wiLCJnZXRDb250ZXh0IiwiZSIsInNldHVwV2ViR0wiLCJlbnYiLCJkaWN0IiwiZGljdGlvbmFyeSIsImZyYW1lYnVmZmVycyIsIkZyYW1lYnVmZmVyIiwiZnJhbWVidWZmZXIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsInJlbmRlcmJ1ZmZlciIsImNyZWF0ZVJlbmRlcmJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsImJpbmRSZW5kZXJidWZmZXIiLCJSRU5ERVJCVUZGRVIiLCJyZW5kZXJidWZmZXJTdG9yYWdlIiwiREVQVEhfQ09NUE9ORU5UMTYiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiZnJhbWVidWZmZXJSZW5kZXJidWZmZXIiLCJERVBUSF9BVFRBQ0hNRU5UIiwiZW5hYmxlUmVhZCIsImRlbGV0ZVJlbmRlcmJ1ZmZlciIsImRlbGV0ZUZyYW1lYnVmZmVyIiwia2VybmVscyIsInNoYWRlcnMiLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ1c2VQcm9ncmFtIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsImJsZW5kRXh0IiwiZ2V0RXh0ZW5zaW9uIiwiZW5hYmxlRXh0ZW5zaW9uIiwiZXh0ZW5zaW9ucyIsImV4dGVuc2lvbiIsImV4dFByb3BzIiwiZXAiLCJleHQiLCJNQVhfRVhUIiwiTUlOX0VYVCIsImFwcGVuZENoaWxkIiwiW29iamVjdCBPYmplY3RdIiwiYnVmZmVyIiwiaXNQcm9ncmFtIiwic2VyaWFsaXplIiwiYW9hIiwiZmJOYW1lIiwicGFyYW1ldGVyIiwia2V5VmFsdWVQYWlycyIsIm5ld0FycmF5IiwiZGljdEtleXMiLCJmeGdsIiwibWFwIiwiYXBwIiwicHJvcHMiLCJkcmF3IiwicmVuZGVyIiwiYXJncyIsImRpbWVuc2lvbiIsIndpbmRvdyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUks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NVAsS0FBQTBMLEVBQUFvRSxLQUlBNUYsRUFBQTZGLFVBQUEsV0FDQSxPQUFBMUYsRUFBQXhGLE1BQUF3RixFQUFBdEYsU0FHQW1GLEVBQUE3QixZQUVBNkIsU0c3UkEsb0JBQUE4RixTQUNBQSxPQUFBL0YiLCJmaWxlIjoiZmxleGdsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVW5pZm9ybShnbENvbnRleHQsIG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgIHZhciB1bmlmb3JtID0gKHRoaXMgaW5zdGFuY2VvZiBVbmlmb3JtKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplQXJyYXkoYXJyYXlPZkFycmF5KSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhcnJheU9mQXJyYXkuZm9yRWFjaChmdW5jdGlvbihhKXtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VW5pZm9ybSgpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24sXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zaXplLFxuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCh0eXBlID09ICdmbG9hdCcgfHwgdHlwZSA9PSAnaW50JykgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSlcbiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07XG5cbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHR5cGUuc2xpY2UoMCwzKSA9PSAndmVjJyB8fCB0eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDQpID09ICdpdmVjJyB8fCB0eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnaXYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCwzKSA9PSAnbWF0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybU1hdHJpeCcgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGZhbHNlLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2VUeXBlJykgJiYgZGF0YS5yZXNvdXJjZVR5cGUgPT0gJ3RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBkYXRhLnB0cik7XG4gICAgICAgICAgICAgICAgY3R4LnVuaWZvcm0xaShsb2NhdGlvbiwgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmlmb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0gPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgcGFyc2VJbnQodHlwZS5zbGljZSg0LDUpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICBzZXRVbmlmb3JtLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndW5pZm9ybSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIGxlbiA9IDA7XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSAhPSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnNpemU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vVE9ETzogZml4IGRlY2xhcmF0aW9uIGZvciBtYXRyaXhcbiAgICAgICAgICAgIGlmKGxlbiA+IDEgJiYgdHlwZSAhPSAnbWF0NCcpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgbGVuICsgJ10nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdW5pZm9ybVtuYW1lXTtcbiAgICB9XG5cblxuICAgIHJldHVybiB1bmlmb3JtO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSBcIi4vdW5pZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0dXJlKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHRleHR1cmUgPSAodGhpcyBpbnN0YW5jZW9mIFRleHR1cmUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHRleHR1cmVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRUZXh0dXJlKG5hbWUsIHRleERhdGEpIFxuICAgIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRhdGEgPSB0ZXhEYXRhO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0dXJlKG5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IGRpbVswXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IGRpbVsxXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleFN1YkltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciB0ZXh0dXJlIGNvbXByZXNzaW9uXG4gICAgLy8gZnVuY3Rpb24gY29tcHJlc3NUZXh0dXJlKHRleERhdGEpIHtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZXh0ID0gKFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpXG4gICAgLy8gICAgICk7XG4gICAgLy9cbiAgICAvLyAgICAgY3R4LmNvbXByZXNzZWRUZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBleHQuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQsIHRleHR1cmVbbmFtZV0uZGltWzBdLCB0ZXh0dXJlW25hbWVdLmRpbVsxXSwgMCwgdGV4RGF0YSk7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vIH1cblxuICAgIHRleHR1cmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKSB7XG4gICAgICAgIHZhciB0ZXhJbmRleCA9ICh0ZXh0dXJlLmhhc093blByb3BlcnR5KG5hbWUpKSA/IHRleHR1cmVbbmFtZV0uaW5kZXggOiB0ZXh0dXJlSUQrKztcbiAgICAgICAgdGV4dHVyZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbmRleDogdGV4SW5kZXgsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIGRpbTogZGltIHx8IFs1MTIsIDUxMl0sXG4gICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsIHx8IFwiYWxwaGFcIixcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNhbXBsZXI6IHNhbXBsZXIgfHwgbnVsbCxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZVRleHR1cmUoKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpXG4gICAgICAgIHNldFRleHR1cmUobmFtZSwgZGF0YSk7XG5cbiAgICAgICAgaWYgKHRleHR1cmVbbmFtZV0uc2FtcGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyID0gVW5pZm9ybShjdHgpLmNyZWF0ZShuYW1lLCAnc2FtcGxlcjJEJywgdGV4dHVyZVtuYW1lXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBjdHgudW5pZm9ybTFpKHRoaXMubG9jYXRpb24sIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5zYW1wbGVyLmRhdGEpID09ICd1bmRlZmluZWQnIHx8IHRoaXMuc2FtcGxlci5kYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIubGluayhwcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24odGV4RGF0YSkge1xuICAgICAgICAgICAgc2V0VGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmNvcHlGcm9tRkJPID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIGN0eC5jb3B5VGV4SW1hZ2UyRChcbiAgICAgICAgICAgICAgICBjdHguVEVYVFVSRV8yRCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIGN0eC5SR0JBLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVswXSxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVsxXSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0udXBkYXRlID0gZnVuY3Rpb24odGV4RGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgICAgIHVwZGF0ZVRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGV4dHVyZVtuYW1lXS5yZXNpemUgPSBmdW5jdGlvbihkaW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGltID0gZGltO1xuICAgICAgICAgICAgc2V0VGV4dHVyZSh0aGlzLm5hbWUsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdsQ29udGV4dC5kZWxldGVUZXh0dXJlKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lID09IHRoaXMuc2FtcGxlci5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiAndW5pZm9ybSBzYW1wbGVyMkQgJyArIHRoaXMuc2FtcGxlci5uYW1lICsgJztcXG4nO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0dXJlO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSAnLi91bmlmb3JtJztcbmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi9hdHRyaWJ1dGUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcbmltcG9ydCBWYXJ5aW5nIGZyb20gJy4vdmFyeWluZyc7XG5pbXBvcnQgU3Vicm91dGluZSBmcm9tICcuL3N1YnJvdXRpbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZXNvdXJjZShnbENvbnRleHQpIFxue1xuICAgIHZhciByZXNvdXJjZSA9ICh0aGlzIGluc3RhbmNlb2YgUmVzb3VyY2UpID8gdGhpcyA6IHt9LFxuICAgICAgICBncHVSZXNvdXJjZXMgPSB7fTtcblxuICAgIHJlc291cmNlLnVuaWZvcm0gPSBuZXcgVW5pZm9ybShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLmF0dHJpYnV0ZSA9IG5ldyBBdHRyaWJ1dGUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS50ZXh0dXJlID0gbmV3IFRleHR1cmUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS52YXJ5aW5nID0gbmV3IFZhcnlpbmcoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5zdWJyb3V0aW5lID0gbmV3IFN1YnJvdXRpbmUoKTtcblxuICAgIHZhciByZXNvdXJjZVR5cGVzID0gWyd1bmlmb3JtJywgJ2F0dHJpYnV0ZScsICd0ZXh0dXJlJywgJ3ZhcnlpbmcnLCAnc3Vicm91dGluZSddO1xuXG4gICAgcmVzb3VyY2UuYWxsb2NhdGUgPSBmdW5jdGlvbih0eXBlKSBcbiAgICB7XG4gICAgICAgIGlmIChyZXNvdXJjZVR5cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKSAgeyB0aHJvdyBFcnJvcihcIkVycm9yOiBJbnZhbGlkIHJlc291cmNlIHR5cGU6IFwiICsgdHlwZSk7IH1cbiAgICAgICAgXG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZVt0eXBlXS5jcmVhdGUuYXBwbHkobnVsbCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIHJlcy5yZXNvdXJjZVR5cGUgPSB0eXBlO1xuICAgICAgICBncHVSZXNvdXJjZXNbcmVzLm5hbWVdID0gcmVzO1xuICAgICAgICBpZiAoIWdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXMubmFtZSkpIFxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ3B1UmVzb3VyY2VzLCByZXMubmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBncHVSZXNvdXJjZXNbcmVzLm5hbWVdO30sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7IGdwdVJlc291cmNlc1tyZXMubmFtZV0ubG9hZChkYXRhKTt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG5cbiAgICByZXNvdXJjZS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSwgcmVzb3VyY2VzKSBcbiAgICB7XG4gICAgICAgIHZhciByZXF1aXJlZFJlc291cmNlcyA9IChBcnJheS5pc0FycmF5KHJlc291cmNlcykpID8gcmVzb3VyY2VzIDogT2JqZWN0LmtleXMoZ3B1UmVzb3VyY2VzKTtcbiAgICAgICAgcmVxdWlyZWRSZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzb3VyY2VOYW1lKSkge2dwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7fVxuICAgICAgICB9KVxuICAgIH07XG5cbiAgICByZXNvdXJjZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7cmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTt9XG4gICAgcmVzb3VyY2UuY3JlYXRlID0gcmVzb3VyY2UuYWxsb2NhdGU7XG4gICAgcmV0dXJuIHJlc291cmNlO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEF0dHJpYnV0ZShnbENvbnRleHQpIFxue1xuICAgIHZhciBhdHRyaWJ1dGUgPSAodGhpcyBpbnN0YW5jZW9mIEF0dHJpYnV0ZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgYXR0cmlidXRlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5hbWUsIGRhdGEpIFxuICAgIHtcbiAgICAgICAgaWYoIEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpIClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBhdHRyaWJ1dGVbbmFtZV0ucHRyKTtcbiAgICAgICAgICAgIGN0eC5idWZmZXJEYXRhKGN0eC5BUlJBWV9CVUZGRVIsIGRhdGEsIGN0eC5TVEFUSUNfRFJBVyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhdHRyaWJ1dGVbbmFtZV0ucHRyID09PSBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0cik7XG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0ciA9IGF0dHJpYnV0ZVtuYW1lXS5wdHI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBhdHRyaWJ1dGVJRCsrLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlQnVmZmVyKCksXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKSBcbiAgICAgICAgICAgIHtzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSk7fVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMubG9jYXRpb24sIHRoaXMuc2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgICAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIFxuICAgICAgICB7XG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCBhcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIFxuICAgICAgICAgICAge3JldHVybiAnYXR0cmlidXRlICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUgKyAnO1xcbic7fVxuICAgICAgICBcblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguZGVsZXRlQnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYXJ5aW5nKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHZhcnlpbmcgPSAodGhpcyBpbnN0YW5jZW9mIFZhcnlpbmcpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICB2YXJ5aW5nLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgdmFyeWluZ1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBzaXplOiBzaXplIHx8IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5saW5rID0gZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd2YXJ5aW5nICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICAgICAgICBpZih0aGlzLnNpemUgPiAxKVxuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyB0aGlzLnNpemUgKyAnXSc7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcnlpbmdbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcnlpbmc7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJyb3V0aW5lKCkge1xuXG4gICAgdmFyIHN1YnJvdXRpbmUgPSAodGhpcyBpbnN0YW5jZW9mIFN1YnJvdXRpbmUpID8gdGhpcyA6IHt9O1xuXG4gICAgc3Vicm91dGluZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICBzdWJyb3V0aW5lW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJzdWJyb3V0aW5lXCJcbiAgICAgICAgfTtcblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmZuID0gZm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbi50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YnJvdXRpbmVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBzdWJyb3V0aW5lO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2hhZGVyKGdsQ29udGV4dCwgZ2xSZXNvdXJjZSkge1xuICAgIFxuICAgIHZhciBzaGFkZXIgPSAodGhpcyBpbnN0YW5jZW9mIFNoYWRlcikgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgcmVzb3VyY2UgPSBnbFJlc291cmNlLFxuICAgICAgICBwYXJhbWV0ZXJzID0gY3R4Ll9kaWN0IHx8IHt9O1xuXG4gICAgc2hhZGVyLnZlcnRleCA9IHt9O1xuICAgIHNoYWRlci5mcmFnbWVudCA9IHt9O1xuXG4gICAgdmFyIHNoYWRlclR5cGUgPSB7XG4gICAgICAgIHZlcnRleDogY3R4LlZFUlRFWF9TSEFERVIsXG4gICAgICAgIGZyYWdtZW50OiBjdHguRlJBR01FTlRfU0hBREVSXG4gICAgfTtcblxuICAgIC8vIENvbnZlcnQgSlMgZnVuY3Rpb25zIHRvIEdMU0wgY29kZXNcbiAgICBmdW5jdGlvbiB0b0dMU0wocmV0dXJuVHlwZSwgbmFtZSwgZm4pe1xuXG4gICAgICAgIHZhciBnbHNsID0gcmV0dXJuVHlwZSArICcgJyArXG4gICAgICAgICAgICBuYW1lICsgJygnICsgYXBwbHlFbnZQYXJhbWV0ZXJzKGZuLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICAgICAvdmFyXFxzKyhbXFx3fFxcZF0rKVxccyo9XFxzKm5ld1xccysoW1xcd3xcXGRdKylcXCgoLiopXFwpL2csXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZXhwciwgbmFtZSwgZHR5cGUsIHZhbHVlKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gW2R0eXBlLnRvTG93ZXJDYXNlKCksIG5hbWUsICc9JywgdmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IFtkdHlwZS50b0xvd2VyQ2FzZSgpLCBuYW1lXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFydHMuam9pbignICcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnJlcGxhY2UoL2ZvclxccypcXChcXHMqdmFyXFxzKy9nLCAnZm9yKGludCAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3Zhclxccy9nLCAnZmxvYXQgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC90aGlzLi9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXCQoLiopXFwoKC4qKVxcKVxccyooPXw7KS9nLCBcIiQxICQyICQzXCIpO1xuICAgICAgICAgICAgLy8gLnJlcGxhY2UoL1xcJCguKj8pXFwuL2csIFwiJDEgXCIpXG5cbiAgICAgICAgaWYobmFtZSA9PSBcIm1haW5cIikge1xuICAgICAgICAgICAgZ2xzbCA9IGdsc2wucmVwbGFjZSgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqey8sICcpeycpICsgXCJcXG5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gZ2xzbC5tYXRjaCgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqXFwpLylbMV07XG5cbiAgICAgICAgICAgIGlmKGFyZ3MgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmdzLnJlcGxhY2UoL1xcJChbXFx3fFxcZF0rKV8vZywgXCIkMSBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbHNsID0gZ2xzbFxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccypcXCkvLCBhcmdzKycpJykgKyBcIlxcblwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbHNsO1xuICAgIH1cblxuICAgIC8vc2V0IHBhcmFtZXRlcnMgaW4gSlMgZnVuY3Rpb25zIGJlZm9yZSBjb252ZXJ0aW5nIHRvIEdMU0wgY29kZXNcbiAgICBmdW5jdGlvbiBhcHBseUVudlBhcmFtZXRlcnMoc3RyKXtcbiAgICAgICAgLy9maW5kIGFsbCAkKC4uLikgYW5kIHJlcGxhY2UgdGhlbSB3aXRoIHBhcmFtZXRlcnNcbiAgICAgICAgdmFyIGVudlBhcmFtID0gT2JqZWN0LmtleXMocGFyYW1ldGVycyk7XG4gICAgICAgIGlmKGVudlBhcmFtLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChcIlxcXFwkXFxcXCgoXCIrZW52UGFyYW0uam9pbihcInxcIikrXCIpXFxcXClcIixcImdcIik7XG4gICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZSwgZnVuY3Rpb24obWF0Y2hlZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbbWF0Y2hlZC5zbGljZSgyLG1hdGNoZWQubGVuZ3RoLTEpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSB1bmlmb3JtcyB0byBiZSB1c2VkIGFzIHBhcmFtZXRlcnMgaW4gc2hhZGVycywgbGlrZSAkKHVuaWZvcm1OYW1lKVxuICAgICAgICAvLyB2YXIgZW52VW5pZm9ybXMgPSBPYmplY3Qua2V5cyhyZXNvdXJjZS51bmlmb3JtKTtcbiAgICAgICAgLy8gcmUgPSBuZXcgUmVnRXhwKFwiXFxcXCRcXFxcKChcIitlbnZVbmlmb3Jtcy5qb2luKFwifFwiKStcIilcXFxcKVwiLFwiZ1wiKTtcbiAgICAgICAgLy8gc3RyID0gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKG1hdGNoZWQpe1xuICAgICAgICAvLyAgICAgcmV0dXJuIHJlc291cmNlLnVuaWZvcm1bbWF0Y2hlZC5zbGljZSgyLG1hdGNoZWQubGVuZ3RoLTEpXS5kYXRhO1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBpbGUoc2hhZGVyVHlwZSwgc2hhZGVyU291cmNlKSB7XG4gICAgICAgIGlmIChzaGFkZXJUeXBlICE9PSBjdHguVkVSVEVYX1NIQURFUiAmJiBzaGFkZXJUeXBlICE9PSBjdHguRlJBR01FTlRfU0hBREVSKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJFcnJvcjogdW5rbm93biBzaGFkZXIgdHlwZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX3NoYWRlciA9IGN0eC5jcmVhdGVTaGFkZXIoc2hhZGVyVHlwZSk7XG4gICAgICAgIGN0eC5zaGFkZXJTb3VyY2UoX3NoYWRlciwgc2hhZGVyU291cmNlKTtcbiAgICAgICAgY3R4LmNvbXBpbGVTaGFkZXIoX3NoYWRlcik7XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhlIGNvbXBpbGUgc3RhdHVzLCBnZXQgY29tcGlsZSBlcnJvciBpZiBhbnlcbiAgICAgICAgdmFyIGNvbXBpbGVkID0gY3R4LmdldFNoYWRlclBhcmFtZXRlcihfc2hhZGVyLCBjdHguQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoIWNvbXBpbGVkKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yID0gY3R4LmdldFNoYWRlckluZm9Mb2coX3NoYWRlcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UgKyAnXFxuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbXBpbGluZyBzaGFkZXIgJ1wiICsgX3NoYWRlciArIFwiJzpcIiArIGxhc3RFcnJvcik7XG5cbiAgICAgICAgICAgIGN0eC5kZWxldGVTaGFkZXIoX3NoYWRlcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfc2hhZGVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERlcHMoZm4pIHtcbiAgICAgICAgdmFyIGRlcHMgPSBbXSxcbiAgICAgICAgICAgIHNvdXJjZUNvZGUgPSBmbi50b1N0cmluZygpLFxuICAgICAgICAgICAgc2hhZGVyQXJncyA9IHNvdXJjZUNvZGUubWF0Y2goL2Z1bmN0aW9uXFxzLio/XFwoKFteKV0qKVxcKS8pLFxuICAgICAgICAgICAgYXJncyA9IChzaGFkZXJBcmdzICE9PSBudWxsICYmIHNoYWRlckFyZ3MubGVuZ3RoKSA/IHNoYWRlckFyZ3NbMV0gOiBbXTtcbiAgICAgICAgLy8gYXJncyA9IGFyZ3MucmVwbGFjZSgvKD86XFxyXFxufFxccnxcXG58XFxzKS9nLCAnJyk7XG4gICAgICAgIC8vXG4gICAgICAgIGlmKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXBzID0gYXJncy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnJlcGxhY2UoL1xcL1xcKi4qXFwqXFwvLywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXh0cmFEZXBzID0gZ2V0RXh0cmFEZXBzKHNvdXJjZUNvZGUpO1xuICAgICAgICBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoZXh0cmFEZXBzXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXBzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGVwcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRFeHRyYURlcHMoZm5TdHJpbmcpIHtcbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IGZuU3RyaW5nLm1hdGNoKC90aGlzXFwuKFxcdyspL2cpO1xuICAgICAgICBpZihleHRyYURlcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5tYXAoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuc2xpY2UoNSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0cmFEZXBzIHx8IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY2xhcmVEZXAoZGVwKSB7XG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgaWYodHlwZW9mIHJlcyA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlL2RlcGVuZGVuY2UgXCInICsgZGVwICsgJ1wiIGlzIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgaWYocmVzLnJlc291cmNlVHlwZSA9PSAnc3Vicm91dGluZScpXG4gICAgICAgICAgICByZXR1cm4gdG9HTFNMKHJlcy50eXBlLCByZXMubmFtZSwgcmVzLmZuKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHJlcy5oZWFkZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bmlxdWVEZXBzKGRlcHMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0ge307XG4gICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkLCBpKXtcbiAgICAgICAgICAgIG5hbWVzW2RdID0gaTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG5hbWVzKTtcbiAgICB9XG5cbiAgICBzaGFkZXIuY3JlYXRlID0gZnVuY3Rpb24oYXJnLCBmbil7XG4gICAgICAgIHZhciBvcHRpb24gPSBhcmcgfHwge30sXG4gICAgICAgICAgICBuYW1lID0gb3B0aW9uLm5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB0eXBlID0gb3B0aW9uLnR5cGUgfHwgXCJ2ZXJ0ZXhcIjtcbiAgICAgICAgLy8gdmFyIG9wdGlvbiA9IGFyZyB8fCB7fSxcbiAgICAgICAgLy8gICAgIG5hbWUgPSBvcHRpb24ubmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgLy8gICAgIHR5cGUgPSBvcHRpb24udHlwZSB8fCBcInZlcnRleFwiLFxuICAgICAgICAvLyAgICAgZGVwcyA9IG9wdGlvbi5yZXF1aXJlIHx8IG9wdGlvbi5kZXBzIHx8IFtdLFxuICAgICAgICAvLyAgICAgcHJlY2lzaW9uID0gb3B0aW9uLnByZWNpc2lvbiB8fCBcImhpZ2hcIixcbiAgICAgICAgLy8gICAgIGRlYnVnID0gb3B0aW9uLmRlYnVnIHx8IGZhbHNlLFxuICAgICAgICAvLyAgICAgbWFpbiA9IG9wdGlvbi5tYWluIHx8IGZuIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgLy8gdmFyIHNoYWRlclNvdXJjZSA9ICdwcmVjaXNpb24gJyArIHByZWNpc2lvbiArICdwIGZsb2F0O1xcbic7XG5cbiAgICAgICAgLy8gaWYoZGVwcy5sZW5ndGggPT09IDApIGRlcHMgPSB1bmlxdWVEZXBzKGdldERlcHMobWFpbikpO1xuXG4gICAgICAgIC8vIC8vZ2V0IGRlcGVuZGVuY2UgZnJvbSBzdWJyb3V0aW5lcyBpZiBhbnlcbiAgICAgICAgLy8gdmFyIGV4dHJhRGVwcyA9IFtdLFxuICAgICAgICAvLyAgICAgc3ViUm91dGluZXMgPSBbXTtcblxuICAgICAgICAvLyBkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgLy8gICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgLy8gICAgIGlmKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhkZXApO1xuICAgICAgICAvLyAgICAgICAgIHRocm93IEVycm9yICgnRXJyb3IhIFVuZGVmaW5lZCB2YXJpYWJsZSBpbiBzaGFkZXI6ICcrICBkZXAubmFtZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJykge1xuICAgICAgICAvLyAgICAgICAgIHN1YlJvdXRpbmVzLnB1c2gocmVzLm5hbWUpO1xuICAgICAgICAvLyAgICAgICAgIHZhciBzdWJEZXBzID0gZ2V0RXh0cmFEZXBzKHJlcy5mbi50b1N0cmluZygpKTtcbiAgICAgICAgLy8gICAgICAgICBpZihzdWJEZXBzLmxlbmd0aCkge1xuICAgICAgICAvLyAgICAgICAgICAgICAvL1RPRE86IG1ha2UgdGhpcyByZWN1cnNpdmUgdG8gY2hlY2sgYWxsIHN1YnJvdXRpbmUgZGVwc1xuICAgICAgICAvLyAgICAgICAgICAgICBzdWJEZXBzLmZvckVhY2goZnVuY3Rpb24oc2RlcCl7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB2YXIgc3JlcyA9IHJlc291cmNlLmdldChzZGVwKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmKHNyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KGdldEV4dHJhRGVwcyhzcmVzLmZuLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgLy8gICAgICAgICAgICAgfSlcblxuICAgICAgICAvLyAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KHN1YkRlcHMpO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcblxuICAgICAgICAvLyBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgIC8vICAgICB2YXIgYWxsRGVwcyA9IGV4dHJhRGVwc1xuICAgICAgICAvLyAgICAgLy8gLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgLy8gICAgIC8vICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgLy8gICAgIC8vIH0pXG4gICAgICAgIC8vICAgICAuY29uY2F0KGRlcHMuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAvLyAgICAgICAgIHJldHVybiBzdWJSb3V0aW5lcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgLy8gICAgIH0pKVxuICAgICAgICAvLyAgICAgLmNvbmNhdChzdWJSb3V0aW5lcyk7XG5cbiAgICAgICAgLy8gICAgIGRlcHMgPSB1bmlxdWVEZXBzKGFsbERlcHMpO1xuICAgICAgICAvLyB9XG5cblxuICAgICAgICAvLyBpZihBcnJheS5pc0FycmF5KGRlcHMpKXtcbiAgICAgICAgLy8gICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAvLyAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy8gfSBlbHNlIGlmKHR5cGVvZihkZXBzKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyAgICAgT2JqZWN0LmtleXMoZGVwcykuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZVR5cGUpe1xuICAgICAgICAvLyAgICAgICAgIGRlcHNbcmVzb3VyY2VUeXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgIC8vICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgIC8vICAgICB9KVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gc2hhZGVyU291cmNlICs9IHRvR0xTTCgndm9pZCcsICdtYWluJywgbWFpbik7XG5cbiAgICAgICAgLy8gaWYoZGVidWcpXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UpO1xuXG5cbiAgICAgICAgdmFyIHNoYWRlclNvdXJjZSA9IGZuO1xuICAgICAgICB2YXIgX3NoYWRlciA9IGNvbXBpbGUoc2hhZGVyVHlwZVt0eXBlXSwgc2hhZGVyU291cmNlKTtcbiAgICAgICAgX3NoYWRlci5fc2hhZGVyVHlwZSA9IHNoYWRlclR5cGVbdHlwZV07XG4gICAgICAgIF9zaGFkZXIuZGVwcyA9IGRlcHM7XG4gICAgICAgIF9zaGFkZXIuc291cmNlID0gc2hhZGVyU291cmNlO1xuICAgICAgICBzaGFkZXJbdHlwZV1bbmFtZV0gPSBfc2hhZGVyO1xuICAgICAgICByZXR1cm4gX3NoYWRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuIiwiaW1wb3J0IFJlc291cmNlIGZyb20gJy4vcmVzb3VyY2UnO1xuaW1wb3J0IFByb2dyYW0gZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuLy8gaW1wb3J0IFJlYWN0aXZlIGZyb20gJy4vcmVhY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9LFxuICAgICAgICBvcHRpb25zID0gYXJnIHx8IHt9LFxuICAgICAgICBjb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBudWxsLFxuICAgICAgICBjYW52YXMgPSBvcHRpb25zLmNhbnZhcyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgbnVsbCxcbiAgICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgbnVsbCxcbiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyB8fCB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgfSxcbiAgICAgICAgY3R4ID0gb3B0aW9ucy5jb250ZXh0IHx8IG9wdGlvbnMuY3R4IHx8IG51bGwsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgcHJvZ3JhbV8gPSBudWxsLFxuICAgICAgICBzaGFyZWRGdW5jdGlvbiA9IG9wdGlvbnMuc2hhcmVkRnVuY3Rpb24gfHwge307XG5cblxuICAgIGlmICh0eXBlb2YoY2FudmFzKSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChjYW52YXNbMF0gPT0gXCIjXCIpIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcy5zdWJzdHJpbmcoMSkpO1xuICAgICAgICBlbHNlIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcyk7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyID0gKHR5cGVvZihjb250YWluZXIpID09IFwic3RyaW5nXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKSA6IGNvbnRhaW5lcjtcbiAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgaWYgKGhlaWdodCA9PT0gbnVsbCkgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgLy8gd2lkdGggLT0gcGFkZGluZy5sZWZ0ICsgcGFkZGluZy5yaWdodDtcbiAgICAvLyBoZWlnaHQgLT0gcGFkZGluZy50b3AgKyBwYWRkaW5nLmJvdHRvbTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luTGVmdCA9IHBhZGRpbmcubGVmdCArIFwicHhcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luVG9wID0gcGFkZGluZy50b3AgKyBcInB4XCI7XG5cbiAgICBpZiAoY3R4ID09PSBudWxsKVxuICAgICAgICBjdHggPSBzZXR1cFdlYkdMKGNhbnZhcyk7XG4gICAgZmxleGdsLmN0eCA9IGN0eDtcbiAgICBmbGV4Z2wuY2FudmFzID0gY2FudmFzO1xuXG4gICAgY3R4Ll9kaWN0ID0gb3B0aW9ucy5lbnYgfHwgb3B0aW9ucy5kaWN0IHx8IG9wdGlvbnMuZGljdGlvbmFyeSB8fCB7fTtcblxuXG4gICAgdmFyIHJlc291cmNlcyA9IG5ldyBSZXNvdXJjZShjdHgpLFxuICAgICAgICBmcmFtZWJ1ZmZlcnMgPSBuZXcgRnJhbWVidWZmZXIoY3R4KSxcbiAgICAgICAgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGN0eCwgcmVzb3VyY2VzKSxcbiAgICAgICAgc2hhZGVycyA9IG5ldyBTaGFkZXIoY3R4LCByZXNvdXJjZXMpO1xuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cblxuICAgIGN0eC5leHQgPSBjdHguZ2V0RXh0ZW5zaW9uKFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtcbiAgICBlbmFibGVFeHRlbnNpb24oW1xuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0XCIsXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCJcbiAgICBdKTtcblxuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgZnVuY3Rpb24gc2V0dXBXZWJHTChjYW52YXMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIl07XG4gICAgICAgIHZhciBnbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKGdsKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2w7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5hYmxlRXh0ZW5zaW9uKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4dGVuc2lvbnMpKSBleHRlbnNpb25zID0gW2V4dGVuc2lvbnNdO1xuICAgICAgICBleHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgZXh0UHJvcHMgPSBjdHguZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gICAgICAgICAgICBpZiAoZXh0UHJvcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRQcm9wcykuZm9yRWFjaChmdW5jdGlvbihlcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4dC5oYXNPd25Qcm9wZXJ0eShlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5leHRbZXBdID0gZXh0UHJvcHNbZXBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmF0dHJpYnV0ZSwgbmFtZSwgeyAvL2FmdGVyIGFsbG9jYXRpbmcsIGZsZXhnbCBnZXRzIG5ldyBrZXkgYXR0cmlidXRlLCBoZWxwaW5nIGVhc2lseSBjaGFuZ2UgYXR0cmlidXRlIGRhdGEuXG4gICAgICAgICAgICBnZXQoKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoZGF0YSl7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuICAgIGZsZXhnbC5idWZmZXIgPSBmbGV4Z2wuYXR0cmlidXRlOyAvL2FsaWFzXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgdW5pZm9ybSB2YXJpYWJsZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC51bmlmb3JtID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ1bmlmb3JtXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC51bmlmb3JtLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLnVuaWZvcm0sIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5pc1Byb2dyYW0ocHJvZ3JhbV8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV0ubGluayhwcm9ncmFtXyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgZmxleGdsLnVuaWZvcm0uc2VyaWFsaXplID0gZnVuY3Rpb24oYW9hKSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhb2EuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB0ZXh0dXJlIHR5cGU6IHVuc2lnbmVkX2J5dGUgb3IgZmxvYXQsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjaGFubmVsPSdhbHBoYSddIFdlYkdMIGZvcm1hdHMgKHJnYmEsIGFscGhhKVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3NhbXBsZXI9bnVsbF0gRkxleEdMIFVuaWZvcm0gT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudGV4dHVyZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEsIGRpbSwgY2hhbm5lbCwgc2FtcGxlcikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ0ZXh0dXJlXCIsIG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudGV4dHVyZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnRleHR1cmVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnRleHR1cmUudXBkYXRlID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0udXBkYXRlKGRhdGEsIG9mZnNldCwgZGltKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt0eXBlXSBWYXJ5aW5nIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzaXplPTFdIGRhdGEgYXJyYXlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC52YXJ5aW5nID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ2YXJ5aW5nXCIsIG5hbWUsIHR5cGUsIHNpemUpO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmU9bnVsbF0gRkxleEdMIFRleHR1cmUgT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlIHx8IHJlc291cmNlcy5hbGxvY2F0ZSgndGV4dHVyZScsIG5hbWUsIHR5cGUsIGRpbSwgJ3JnYmEnLCBudWxsKTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcnMuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSk7XG4gICAgICAgIGlmICghZmxleGdsLmZyYW1lYnVmZmVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmZyYW1lYnVmZmVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBmcmFtZWJ1ZmZlcnNbbmFtZV0uZW5hYmxlUmVhZChwcm9ncmFtXyk7XG4gICAgfVxuXG4gICAgZmxleGdsLmJpbmRGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKGZiTmFtZSkge1xuICAgICAgICBpZiAoZmJOYW1lID09PSBudWxsKVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJzW2ZiTmFtZV0ucHRyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuc3Vicm91dGluZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInN1YnJvdXRpbmVcIiwgbmFtZSwgdHlwZSwgZm4pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5wYXJhbWV0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZVBhaXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGtleVZhbHVlUGFpcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IGtleVZhbHVlUGFpcnNba2V5XTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN0eC5fZGljdFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4Ll9kaWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZVBhaXJzW2tleV1baSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IG5ld0FycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGN0eC5fZGljdFtrZXldKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBkaWN0S2V5cyA9IE9iamVjdC5rZXlzKGN0eC5fZGljdFtrZXldKTtcbiAgICAgICAgICAgICAgICBmeGdsLnVuaWZvcm0oJ2RpY3QnK2tleSwgJ2Zsb2F0JywgZGljdEtleXMubWFwKGQ9PmN0eC5fZGljdFtrZXldW2RdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmRpY3Rpb25hcnkgPSBmbGV4Z2wucGFyYW1ldGVyO1xuXG4gICAgZmxleGdsLnNoYWRlciA9IHByb2dyYW0uc2hhZGVyO1xuXG4gICAgZmxleGdsLnByb2dyYW0gPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgcHJvZ3JhbV8gPSBwcm9ncmFtLnVzZShuYW1lLCB2cywgZnMpO1xuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cblxuICAgIGZsZXhnbC5jcmVhdGVQcm9ncmFtID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIHByb2dyYW1fID0gcHJvZ3JhbS5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuYXBwID0gZnVuY3Rpb24obmFtZSwgcHJvcHMpIHtcbiAgICAgICAgdmFyIHZzID0gZmxleGdsLnZlcnRleChwcm9wcy52cyksXG4gICAgICAgICAgICBmcyA9IGZsZXhnbC5mcmFnbWVudChwcm9wcy5mcyksXG4gICAgICAgICAgICBmYiA9IHByb3BzLmZyYW1lYnVmZmVyIHx8IG51bGw7XG5cbiAgICAgICAgZmxleGdsLnByb2dyYW0obmFtZSwgdnMsIGZzKTtcblxuICAgICAgICB2YXIgZHJhdyA9IHByb3BzLnJlbmRlciB8fCBwcm9wcy5kcmF3O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ2wgPSBmbGV4Z2wucHJvZ3JhbShuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBkcmF3LmNhbGwoZ2wsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmxleGdsLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgfVxuXG4gICAgZmxleGdsLnJlc291cmNlcyA9IHJlc291cmNlcztcblxuICAgIHJldHVybiBmbGV4Z2w7XG59XG4iLCJpbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGcmFtZWJ1ZmZlcihnbENvbnRleHQpIHtcblxuICAgIHZhciBmcmFtZWJ1ZmZlciA9ICh0aGlzIGluc3RhbmNlb2YgRnJhbWVidWZmZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmcmFtZWJ1ZmZlci5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXSA9IHtcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCksXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICB3aWR0aDogZGltWzBdIHx8IDEwMjQsXG4gICAgICAgICAgICBoZWlnaHQ6IGRpbVsxXSB8fCAxMDI0LFxuICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSB8fCBudWxsLFxuICAgICAgICAgICAgcmVuZGVyYnVmZmVyOiBjdHguY3JlYXRlUmVuZGVyYnVmZmVyKCksXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJ1ZiA9ICh0eXBlID09ICdmbG9hdCcpID9cbiAgICAgICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpIDpcbiAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KTtcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPSBUZXh0dXJlKGN0eCkuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgXCJyZ2JhXCIsIGJ1Zik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVuZGVyYnVmZmVyID0gZnJhbWVidWZmZXJbbmFtZV0ucmVuZGVyYnVmZmVyO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgY3R4LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoXG4gICAgICAgICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkRFUFRIX0NPTVBPTkVOVDE2LFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0ud2lkdGgsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5oZWlnaHRcbiAgICAgICAgKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlLnB0cixcbiAgICAgICAgICAgIDBcbiAgICAgICAgKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkRFUFRIX0FUVEFDSE1FTlQsXG4gICAgICAgICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAgICAgcmVuZGVyYnVmZmVyXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5wdHIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLnRleHR1cmUubmFtZSk7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHRoaXMudGV4dHVyZS5sb2NhdGlvbiwgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZW5kZXJidWZmZXIpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVRleHR1cmUodGhpcy50ZXh0dXJlLnB0cilcbiAgICAgICAgICAgIGN0eC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLnB0cik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBmcmFtZWJ1ZmZlcjtcbn1cbiIsImltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9ncmFtKGdsQ29udGV4dCwgcmVzb3VyY2VzKSB7XG5cbiAgICB2YXIgcHJvZ3JhbSA9IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgc2hhZGVycyA9IG5ldyBTaGFkZXIoZ2xDb250ZXh0LCByZXNvdXJjZXMpO1xuXG4gICAgcHJvZ3JhbS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBuYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdnMgPSB2cyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGZzID0gZnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBkZXBzID0gW107XG5cbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHByb2dyYW0uZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAga2VybmVsc1tuYW1lXSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICAgICAga2VybmVsc1tuYW1lXS52cyA9ICh0eXBlb2YgdnMgPT0gXCJvYmplY3RcIikgPyB2cyA6IHNoYWRlcnMudmVydGV4W3ZzXTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5mcyA9ICh0eXBlb2YgZnMgPT0gXCJvYmplY3RcIikgPyBmcyA6IHNoYWRlcnMuZnJhZ21lbnRbZnNdO1xuXG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5mcyk7XG4gICAgICAgIGN0eC5saW5rUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgdmFyIGxpbmtlZCA9IGN0eC5nZXRQcm9ncmFtUGFyYW1ldGVyKGtlcm5lbHNbbmFtZV0sIGN0eC5MSU5LX1NUQVRVUyk7XG4gICAgICAgIGlmICghbGlua2VkKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yID0gY3R4LmdldFByb2dyYW1JbmZvTG9nKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOlwiICsgbGFzdEVycm9yKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS52cy5kZXBzKTtcbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0uZnMuZGVwcyk7XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZGVwcyA9IGRlcHM7XG5cbiAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgfVxuXG4gICAgcHJvZ3JhbS51c2UgPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHByb2dyYW0gPSBrZXJuZWxzW25hbWVdO1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhwcm9ncmFtLCBwcm9ncmFtLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbS5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyYW0uZGVsZXRlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLnZzKTtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5mcyk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIGRlbGV0ZSBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5zaGFkZXIgPSBmdW5jdGlvbihhcmcsIGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJnO1xuICAgICAgICBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgIH1cblxuICAgIHByb2dyYW0udmVydGV4ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcInZlcnRleFwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIH1cblxuICAgIHByb2dyYW0uZnJhZ21lbnQgPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnJhZ21lbnRcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm4ubmFtZSkgb3B0aW9ucy5uYW1lID0gZm4ubmFtZTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cbiIsImltcG9ydCBGbGV4R0wgZnJvbSAnLi9mbGV4Z2wnO1xuXG4oZnVuY3Rpb24gbWFrZUdsb2JhbCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93LkZsZXhHTCA9IEZsZXhHTDtcbiAgfVxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=