!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){Array.isArray(r)&&(r.filter(function(e){return Array.isArray(e)})&&(r=u(r)));return a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function o(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],o=t[e].dim[0],u=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,o,u,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,u,c,f,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:u||"float",dim:c||[512,512],channel:f||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},o(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return o(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var o=r[t[e].type.toUpperCase()],u=r[t[e].channel.toUpperCase()],c=a[0]||t[e].dim[0],f=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],c,f,u,o,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,o(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var o=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===o.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function o(e,t){var r=this instanceof o?this:{},n=e,i=t,a=n._dict||{};r.vertex={},r.fragment={};var u={vertex:n.VERTEX_SHADER,fragment:n.FRAGMENT_SHADER};function c(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(a);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return a[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function f(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=i.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?c(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return r.create=function(e,t){var a=e||{},o=a.name||"default",d=a.type||"vertex",h=a.require||a.deps||[],p=a.precision||"high",m=a.debug||!1,E=a.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=e.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=f(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}(E)));var b=[],g=[];if(h.forEach(function(e){var t=i.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=f(t.fn.toString());r.length&&(r.forEach(function(e){var t=i.get(e);"subroutine"==t.resourceType&&(b=b.concat(f(t.fn.toString())))}),b=b.concat(r))}}),b.length){var v=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(v)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=c("void","main",E),m&&console.log(y);var T=function(e,t){if(e!==n.VERTEX_SHADER&&e!==n.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+i)}return r}(u[d],y);return T._shaderType=u[d],T.deps=h,T.source=y,r[d][o]=T,T},r}function u(e){var t=this instanceof u?this:{},r=e||{},n=r.container||null,i=r.canvas||document.createElement("canvas"),c=r.width||null,f=r.height||null,s=r.padding||{left:0,right:0,top:0,bottom:0},l=r.context||r.ctx||null;r.sharedFunction;"string"==typeof i&&(i="#"==i[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),n&&(n="string"==typeof n?document.getElementById(n):n,null===c&&(c=n.clientWidth),null===f&&(f=n.clientHeight)),i.width=c,i.height=f,i.style.position="absolute",i.style.marginLeft=s.left+"px",i.style.marginTop=s.top+"px",null===l&&(l=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(i)),t.ctx=l,t.canvas=i,t.resources=d,l._dict=r.env||r.dict||r.dictionary||{};var d=new a(l),h=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(l),p=new function(e,t){var r={},n=e,i={},a=new o(e,t);return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var o=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof r?r:a.fragment[r],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);o=(o=o.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=o},r.use=function(e,r,a){return i.hasOwnProperty(e)?(n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]):(this.create(e,r,a),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e])},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(l,d),m=null,E=l.getExtension("EXT_blend_minmax");function y(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=l.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(l.ext[e]=t[e])})})}function b(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}return E&&(l.MAX_EXT=E.MAX_EXT,l.MIN_EXT=E.MIN_EXT),l.ext=l.getExtension("ANGLE_instanced_arrays"),y(["OES_texture_float","OES_texture_float_linear"]),n&&n.appendChild(i),t.enableExtension=y,t.attribute=function(e,r,n){return d.allocate("attribute",e,r,n),t.attribute.hasOwnProperty(e)||Object.defineProperty(t.attribute,e,{get:()=>d.attribute[e],set(t){d.attribute[e].load(t)}}),t},t.uniform=function(e,r,n){return d.allocate("uniform",e,r,n),t.uniform.hasOwnProperty(e)||Object.defineProperty(t.uniform,e,{get:function(){return d.uniform[e]},set:function(t){d.uniform[e].load(t),l.isProgram(m)&&d.uniform[e].link(m)}}),t},t.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},t.texture=function(e,r,n,i,a,o){return d.allocate("texture",e,r,i,a,n,o),Object.defineProperty(t.texture,e,{get:function(){return d.texture[e]},set:function(t){d.texture[e].load(t)}}),t},t.texture.update=function(e,t,r,n){d.texture[e].update(t,r,n)},t.varying=function(e,r,n){return d.allocate("varying",e,r,n),t},t.framebuffer=function(e,r,n,i){i=i||d.allocate("texture",e,r,n,"rgba",null);return h.create(e,r,n,i),t.framebuffer.hasOwnProperty(e)||Object.defineProperty(t.framebuffer,e,{get:function(){return h[e]}}),t},t.framebuffer.enableRead=function(e,t){h[e].enableRead(t)},t.bindFramebuffer=function(e){null===e?l.bindFramebuffer(l.FRAMEBUFFER,null):l.bindFramebuffer(l.FRAMEBUFFER,h[e].ptr)},t.subroutine=function(e,r,n){return d.allocate("subroutine",e,r,n),t},t.parameter=function(e){return Object.keys(e).forEach(function(t){if(l._dict[t]=e[t],Array.isArray(l._dict[t])){var r=0;Object.defineProperty(l._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,l._dict[t]=e}})}else if("object"==typeof l._dict[t]){var n=Object.keys(l._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>l._dict[t][e]))}}),t},t.dictionary=t.parameter,t.shader=p.shader,t.app=function(e,t,r){var n=b(l,l.VERTEX_SHADER,t.vsource),i=b(l,l.FRAGMENT_SHADER,t.fsource);0===r?(l.viewport(0,0,1024,1),m=p.use(e,n,i),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.texture.u_texture.link(m),this.bindFramebuffer("f_sum_texture")):(l.viewport(0,0,l.canvas.width,l.canvas.height),m=p.use(e,n,i),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer(null),this.framebuffer.enableRead("f_sum_texture",m)),l.drawArrays(l.LINES,0,2)},t.dimension=function(){return[i.width,i.height]},t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=u)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxleGdsLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVW5pZm9ybSIsImdsQ29udGV4dCIsInR5cGUiLCJkYXRhIiwidW5pZm9ybSIsInRoaXMiLCJjdHgiLCJzZXJpYWxpemVBcnJheSIsImFycmF5T2ZBcnJheSIsInNhIiwiZm9yRWFjaCIsImEiLCJjb25jYXQiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJsb2NhdGlvbiIsInNpemUiLCJwYXJzZUludCIsInNsaWNlIiwibGluayIsInByb2dyYW0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJidWYiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsIkZsb2F0MzJBcnJheSIsIkludDMyQXJyYXkiLCJyZXNvdXJjZVR5cGUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJpbmRleCIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInB0ciIsInVuaWZvcm0xaSIsImxvYWQiLCJoZWFkZXIiLCJsZW4iLCJsZW5ndGgiLCJUZXh0dXJlIiwidGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJ1cGRhdGVUZXh0dXJlIiwicmVzaXplIiwiZGVsZXRlIiwiZGVsZXRlVGV4dHVyZSIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGVCdWZmZXIiLCJ2YXJ5aW5nIiwiVmFyeWluZyIsInN1YnJvdXRpbmUiLCJTdWJyb3V0aW5lIiwiZm4iLCJ0b1N0cmluZyIsInJlc291cmNlVHlwZXMiLCJhbGxvY2F0ZSIsImluZGV4T2YiLCJFcnJvciIsInJlcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic2V0IiwicmVzb3VyY2VzIiwia2V5cyIsInJlc291cmNlTmFtZSIsIlNoYWRlciIsImdsUmVzb3VyY2UiLCJzaGFkZXIiLCJwYXJhbWV0ZXJzIiwiX2RpY3QiLCJ2ZXJ0ZXgiLCJmcmFnbWVudCIsInNoYWRlclR5cGUiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwidG9HTFNMIiwicmV0dXJuVHlwZSIsImdsc2wiLCJzdHIiLCJlbnZQYXJhbSIsInJlIiwiUmVnRXhwIiwiam9pbiIsInJlcGxhY2UiLCJtYXRjaGVkIiwiYXBwbHlFbnZQYXJhbWV0ZXJzIiwiZXhwciIsImR0eXBlIiwidG9Mb3dlckNhc2UiLCJhcmdzIiwibWF0Y2giLCJnZXRFeHRyYURlcHMiLCJmblN0cmluZyIsImV4dHJhRGVwcyIsIm1hcCIsImRlY2xhcmVEZXAiLCJkZXAiLCJ1bmlxdWVEZXBzIiwiZGVwcyIsIm5hbWVzIiwiYXJnIiwib3B0aW9uIiwicmVxdWlyZSIsInByZWNpc2lvbiIsImRlYnVnIiwibWFpbiIsInNoYWRlclNvdXJjZSIsInNvdXJjZUNvZGUiLCJzaGFkZXJBcmdzIiwic3BsaXQiLCJ0cmltIiwiZ2V0RGVwcyIsInN1YlJvdXRpbmVzIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJzdWJEZXBzIiwic2RlcCIsInNyZXMiLCJhbGxEZXBzIiwiX3NoYWRlciIsImNyZWF0ZVNoYWRlciIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImxhc3RFcnJvciIsImdldFNoYWRlckluZm9Mb2ciLCJjb21waWxlIiwiX3NoYWRlclR5cGUiLCJzb3VyY2UiLCJGbGV4R0wiLCJmbGV4Z2wiLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJzaGFyZWRGdW5jdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsImdsIiwiZ2V0Q29udGV4dCIsImUiLCJzZXR1cFdlYkdMIiwiZW52IiwiZGljdCIsImRpY3Rpb25hcnkiLCJmcmFtZWJ1ZmZlcnMiLCJGcmFtZWJ1ZmZlciIsImZyYW1lYnVmZmVyIiwiY3JlYXRlRnJhbWVidWZmZXIiLCJiaW5kRnJhbWVidWZmZXIiLCJGUkFNRUJVRkZFUiIsImZyYW1lYnVmZmVyVGV4dHVyZTJEIiwiQ09MT1JfQVRUQUNITUVOVDAiLCJlbmFibGVSZWFkIiwiYmluZFJlbmRlcmJ1ZmZlciIsIlJFTkRFUkJVRkZFUiIsImRlbGV0ZVJlbmRlcmJ1ZmZlciIsInJlbmRlcmJ1ZmZlciIsImRlbGV0ZUZyYW1lYnVmZmVyIiwia2VybmVscyIsInNoYWRlcnMiLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ1c2VQcm9ncmFtIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsInJlYWxQcm9ncmFtIiwiYmxlbmRFeHQiLCJnZXRFeHRlbnNpb24iLCJlbmFibGVFeHRlbnNpb24iLCJleHRlbnNpb25zIiwiZXh0ZW5zaW9uIiwiZXh0UHJvcHMiLCJlcCIsImV4dCIsImRlbGV0ZVNoYWRlciIsIk1BWF9FWFQiLCJNSU5fRVhUIiwiYXBwZW5kQ2hpbGQiLCJbb2JqZWN0IE9iamVjdF0iLCJpc1Byb2dyYW0iLCJzZXJpYWxpemUiLCJhb2EiLCJmYk5hbWUiLCJwYXJhbWV0ZXIiLCJrZXlWYWx1ZVBhaXJzIiwibmV3QXJyYXkiLCJkaWN0S2V5cyIsImZ4Z2wiLCJhcHAiLCJwcm9wcyIsIm51bSIsInZzb3VyY2UiLCJmc291cmNlIiwidmlld3BvcnQiLCJkcmF3QXJyYXlzIiwiTElORVMiLCJkaW1lbnNpb24iLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxL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K0gsS0FBQW5HLEVBQUF5RyxNQUFBeEgsSUFDQXFRLEtBQUF4UCxRQUFBLE9BQUFiLEVBQUEsUUFBQW9RLEVBQUFuSCxJQUFBbEssR0FBQWdDLEVBQUF5RyxNQUFBeEgsR0FBQWpCLFFBR0F1TSxHQUdBQSxFQUFBNEIsV0FBQTVCLEVBQUEyRSxVQUNBM0UsRUFBQWhFLE9BQUF4RixFQUFBd0YsT0FlQWdFLEVBQUFnRixJQUFBLFNBQUF0UixFQUFBdVIsRUFBQUMsR0FFQSxJQUFBckMsRUFBQXZELEVBQUE3SixJQUFBNkcsY0FBQTJJLEVBQUFFLFNBQ0FyQyxFQUFBeEQsRUFBQTdKLElBQUE4RyxnQkFBQTBJLEVBQUFHLFNBSUEsSUFBQUYsR0FDQXpQLEVBQUE0UCxTQUFBLFlBQ0E1QixFQUFBak4sRUFBQTZNLElBQUEzUCxFQUFBbVAsRUFBQUMsR0FDQXROLEtBQUFzRSxVQUFBLFdBQUF2RCxLQUFBa04sR0FDQWpPLEtBQUFzRSxVQUFBLFdBQUF2RCxLQUFBa04sR0FDQWpPLEtBQUFvQyxRQUFBLFVBQUFyQixLQUFBa04sR0FFQWpPLEtBQUF5TSxnQkFBQSxtQkFJQXhNLEVBQUE0UCxTQUFBLElBQUE1UCxFQUFBMEssT0FBQWhJLE1BQUExQyxFQUFBMEssT0FBQTlILFFBQ0FvTCxFQUFBak4sRUFBQTZNLElBQUEzUCxFQUFBbVAsRUFBQUMsR0FDQXROLEtBQUFzRSxVQUFBLFdBQUF2RCxLQUFBa04sR0FDQWpPLEtBQUFzRSxVQUFBLFdBQUF2RCxLQUFBa04sR0FFQWpPLEtBQUF5TSxnQkFBQSxNQUNBek0sS0FBQXVNLFlBQUFNLFdBQUEsZ0JBQUFvQixJQVdBaE8sRUFBQTZQLFdBQUE3UCxFQUFBOFAsTUFBQSxNQUlBdkYsRUFBQXdGLFVBQUEsV0FDQSxPQUFBckYsRUFBQWhJLE1BQUFnSSxFQUFBOUgsU0FHQTJILFNHdlRBLG9CQUFBeUYsU0FDQUEsT0FBQTFGIiwiZmlsZSI6ImZsZXhnbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFVuaWZvcm0oZ2xDb250ZXh0LCBuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICB2YXIgdW5pZm9ybSA9ICh0aGlzIGluc3RhbmNlb2YgVW5pZm9ybSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5KGFycmF5T2ZBcnJheSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYXJyYXlPZkFycmF5LmZvckVhY2goZnVuY3Rpb24oYSl7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFVuaWZvcm0oKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlLFxuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uLFxuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZigodHlwZSA9PSAnZmxvYXQnIHx8IHR5cGUgPT0gJ2ludCcpICYmICFBcnJheS5pc0FycmF5KGRhdGEpICYmICFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpXG4gICAgICAgICAgICBkYXRhID0gW2RhdGFdO1xuXG4gICAgICAgIHZhciBidWY7XG4gICAgICAgIGlmICh0eXBlLnNsaWNlKDAsMykgPT0gJ3ZlYycgfHwgdHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCw0KSA9PSAnaXZlYycgfHwgdHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBidWYgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2l2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsMykgPT0gJ21hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm1NYXRyaXgnICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBmYWxzZSwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoJ3Jlc291cmNlVHlwZScpICYmIGRhdGEucmVzb3VyY2VUeXBlID09ICd0ZXh0dXJlJykge1xuICAgICAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgZGF0YS5wdHIpO1xuICAgICAgICAgICAgICAgIGN0eC51bmlmb3JtMWkobG9jYXRpb24sIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5pZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB1bmlmb3JtW25hbWVdID0ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IHBhcnNlSW50KHR5cGUuc2xpY2UoNCw1KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmRhdGEgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0VW5pZm9ybS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3VuaWZvcm0gJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgIT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLmRhdGEubGVuZ3RoIC8gdGhpcy5zaXplO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1RPRE86IGZpeCBkZWNsYXJhdGlvbiBmb3IgbWF0cml4XG4gICAgICAgICAgICBpZihsZW4gPiAxICYmIHR5cGUgIT0gJ21hdDQnKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIGxlbiArICddJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVuaWZvcm1bbmFtZV07XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdW5pZm9ybTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gXCIuL3VuaWZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGV4dHVyZShnbENvbnRleHQpIHtcblxuICAgIHZhciB0ZXh0dXJlID0gKHRoaXMgaW5zdGFuY2VvZiBUZXh0dXJlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICB0ZXh0dXJlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0VGV4dHVyZShuYW1lLCB0ZXhEYXRhKSBcbiAgICB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kYXRhID0gdGV4RGF0YTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShuYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSBkaW1bMF0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1bMV0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhTdWJJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdGV4dHVyZSBjb21wcmVzc2lvblxuICAgIC8vIGZ1bmN0aW9uIGNvbXByZXNzVGV4dHVyZSh0ZXhEYXRhKSB7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGV4dCA9IChcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKVxuICAgIC8vICAgICApO1xuICAgIC8vXG4gICAgLy8gICAgIGN0eC5jb21wcmVzc2VkVGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZXh0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhULCB0ZXh0dXJlW25hbWVdLmRpbVswXSwgdGV4dHVyZVtuYW1lXS5kaW1bMV0sIDAsIHRleERhdGEpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyB9XG5cbiAgICB0ZXh0dXJlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcikge1xuICAgICAgICB2YXIgdGV4SW5kZXggPSAodGV4dHVyZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgPyB0ZXh0dXJlW25hbWVdLmluZGV4IDogdGV4dHVyZUlEKys7XG4gICAgICAgIHRleHR1cmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5kZXg6IHRleEluZGV4LFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICBkaW06IGRpbSB8fCBbNTEyLCA1MTJdLFxuICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBcImFscGhhXCIsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzYW1wbGVyOiBzYW1wbGVyIHx8IG51bGwsXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVUZXh0dXJlKClcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKVxuICAgICAgICBzZXRUZXh0dXJlKG5hbWUsIGRhdGEpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlciA9IFVuaWZvcm0oY3R4KS5jcmVhdGUobmFtZSwgJ3NhbXBsZXIyRCcsIHRleHR1cmVbbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LnVuaWZvcm0xaSh0aGlzLmxvY2F0aW9uLCB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuc2FtcGxlci5kYXRhKSA9PSAndW5kZWZpbmVkJyB8fCB0aGlzLnNhbXBsZXIuZGF0YSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKHRleERhdGEpIHtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5jb3B5RnJvbUZCTyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICBjdHguY29weVRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBjdHguUkdCQSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMF0sXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMV0sXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLnVwZGF0ZSA9IGZ1bmN0aW9uKHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRleHR1cmVbbmFtZV0ucmVzaXplID0gZnVuY3Rpb24oZGltLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnbENvbnRleHQuZGVsZXRlVGV4dHVyZSh0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSB0aGlzLnNhbXBsZXIubmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaWZvcm0gc2FtcGxlcjJEICcgKyB0aGlzLnNhbXBsZXIubmFtZSArICc7XFxuJztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dHVyZVtuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gJy4vdW5pZm9ybSc7XG5pbXBvcnQgQXR0cmlidXRlIGZyb20gJy4vYXR0cmlidXRlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vdGV4dHVyZSc7XG5pbXBvcnQgVmFyeWluZyBmcm9tICcuL3ZhcnlpbmcnO1xuaW1wb3J0IFN1YnJvdXRpbmUgZnJvbSAnLi9zdWJyb3V0aW5lJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUmVzb3VyY2UoZ2xDb250ZXh0KSBcbntcbiAgICB2YXIgcmVzb3VyY2UgPSAodGhpcyBpbnN0YW5jZW9mIFJlc291cmNlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgZ3B1UmVzb3VyY2VzID0ge307XG5cbiAgICByZXNvdXJjZS51bmlmb3JtID0gbmV3IFVuaWZvcm0oZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5hdHRyaWJ1dGUgPSBuZXcgQXR0cmlidXRlKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UudGV4dHVyZSA9IG5ldyBUZXh0dXJlKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UudmFyeWluZyA9IG5ldyBWYXJ5aW5nKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2Uuc3Vicm91dGluZSA9IG5ldyBTdWJyb3V0aW5lKCk7XG5cbiAgICB2YXIgcmVzb3VyY2VUeXBlcyA9IFsndW5pZm9ybScsICdhdHRyaWJ1dGUnLCAndGV4dHVyZScsICd2YXJ5aW5nJywgJ3N1YnJvdXRpbmUnXTtcblxuICAgIHJlc291cmNlLmFsbG9jYXRlID0gZnVuY3Rpb24odHlwZSkgXG4gICAge1xuICAgICAgICBpZiAocmVzb3VyY2VUeXBlcy5pbmRleE9mKHR5cGUpID09PSAtMSkgIHsgdGhyb3cgRXJyb3IoXCJFcnJvcjogSW52YWxpZCByZXNvdXJjZSB0eXBlOiBcIiArIHR5cGUpOyB9XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2VbdHlwZV0uY3JlYXRlLmFwcGx5KG51bGwsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICByZXMucmVzb3VyY2VUeXBlID0gdHlwZTtcbiAgICAgICAgZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXSA9IHJlcztcbiAgICAgICAgaWYgKCFncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzLm5hbWUpKSBcbiAgICAgICAge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdwdVJlc291cmNlcywgcmVzLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXTt9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkgeyBncHVSZXNvdXJjZXNbcmVzLm5hbWVdLmxvYWQoZGF0YSk7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UubGluayA9IGZ1bmN0aW9uKHByb2dyYW0sIHJlc291cmNlcykgXG4gICAge1xuICAgICAgICB2YXIgcmVxdWlyZWRSZXNvdXJjZXMgPSAoQXJyYXkuaXNBcnJheShyZXNvdXJjZXMpKSA/IHJlc291cmNlcyA6IE9iamVjdC5rZXlzKGdwdVJlc291cmNlcyk7XG4gICAgICAgIHJlcXVpcmVkUmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24ocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgICAgICBpZiAoZ3B1UmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlc291cmNlTmFtZSkpIHtncHVSZXNvdXJjZXNbcmVzb3VyY2VOYW1lXS5saW5rKHByb2dyYW0pO31cbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UuZ2V0ID0gZnVuY3Rpb24obmFtZSkge3JldHVybiBncHVSZXNvdXJjZXNbbmFtZV07fVxuICAgIHJlc291cmNlLmNyZWF0ZSA9IHJlc291cmNlLmFsbG9jYXRlO1xuICAgIHJldHVybiByZXNvdXJjZTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdHRyaWJ1dGUoZ2xDb250ZXh0KSBcbntcbiAgICB2YXIgYXR0cmlidXRlID0gKHRoaXMgaW5zdGFuY2VvZiBBdHRyaWJ1dGUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIGF0dHJpYnV0ZUlEID0gMDtcblxuICAgIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShuYW1lLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGlmKCBBcnJheS5pc0FycmF5KGRhdGEpIHx8IEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKCFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlW25hbWVdLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgYXR0cmlidXRlW25hbWVdLnB0cik7XG4gICAgICAgICAgICBjdHguYnVmZmVyRGF0YShjdHguQVJSQVlfQlVGRkVSLCBkYXRhLCBjdHguU1RBVElDX0RSQVcpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXR0cmlidXRlW25hbWVdLnB0ciA9PT0gYXR0cmlidXRlW25hbWVdLm9sZF9wdHIpO1xuICAgICAgICAgICAgLy8gYXR0cmlidXRlW25hbWVdLm9sZF9wdHIgPSBhdHRyaWJ1dGVbbmFtZV0ucHRyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXR0cmlidXRlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIFxuICAgIHtcbiAgICAgICAgYXR0cmlidXRlW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogYXR0cmlidXRlSUQrKyxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUJ1ZmZlcigpLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQodHlwZS5zbGljZSgzLDQpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYoZGF0YSAhPT0gbnVsbCAmJiBkYXRhLmxlbmd0aCkgXG4gICAgICAgICAgICB7c2V0QXR0cmlidXRlKG5hbWUsIGRhdGEpO31cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIFxuICAgICAgICB7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICBjdHgudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmxvY2F0aW9uLCB0aGlzLnNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgY3R4LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMubG9jYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGFycmF5QnVmZmVyKSBcbiAgICAgICAge1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlKHRoaXMubmFtZSwgYXJyYXlCdWZmZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSBcbiAgICAgICAgICAgIHtyZXR1cm4gJ2F0dHJpYnV0ZSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lICsgJztcXG4nO31cbiAgICAgICAgXG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmRlbGV0ZUJ1ZmZlcih0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXR0cmlidXRlW25hbWVdO1xuICAgIH07XG5cbiAgICByZXR1cm4gYXR0cmlidXRlO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmFyeWluZyhnbENvbnRleHQpIHtcblxuICAgIHZhciB2YXJ5aW5nID0gKHRoaXMgaW5zdGFuY2VvZiBWYXJ5aW5nKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgdmFyeWluZy5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHZhcnlpbmdbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSB8fCAxLFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0ubGluayA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndmFyeWluZyAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lO1xuICAgICAgICAgICAgaWYodGhpcy5zaXplID4gMSlcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgdGhpcy5zaXplICsgJ10nO1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YXJ5aW5nW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB2YXJ5aW5nO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3Vicm91dGluZSgpIHtcblxuICAgIHZhciBzdWJyb3V0aW5lID0gKHRoaXMgaW5zdGFuY2VvZiBTdWJyb3V0aW5lKSA/IHRoaXMgOiB7fTtcblxuICAgIHN1YnJvdXRpbmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgc3Vicm91dGluZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBmbjogZm4sXG4gICAgICAgICAgICByZXNvdXJjZVR5cGU6IFwic3Vicm91dGluZVwiXG4gICAgICAgIH07XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxvYWQgPSBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgc3Vicm91dGluZVtuYW1lXS5mbiA9IGZuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm4udG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJyb3V0aW5lW25hbWVdO1xuICAgIH07XG5cbiAgICByZXR1cm4gc3Vicm91dGluZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoYWRlcihnbENvbnRleHQsIGdsUmVzb3VyY2UpIHtcbiAgICBcbiAgICB2YXIgc2hhZGVyID0gKHRoaXMgaW5zdGFuY2VvZiBTaGFkZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHJlc291cmNlID0gZ2xSZXNvdXJjZSxcbiAgICAgICAgcGFyYW1ldGVycyA9IGN0eC5fZGljdCB8fCB7fTtcblxuICAgIHNoYWRlci52ZXJ0ZXggPSB7fTtcbiAgICBzaGFkZXIuZnJhZ21lbnQgPSB7fTtcblxuICAgIHZhciBzaGFkZXJUeXBlID0ge1xuICAgICAgICB2ZXJ0ZXg6IGN0eC5WRVJURVhfU0hBREVSLFxuICAgICAgICBmcmFnbWVudDogY3R4LkZSQUdNRU5UX1NIQURFUlxuICAgIH07XG5cbiAgICAvLyBDb252ZXJ0IEpTIGZ1bmN0aW9ucyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gdG9HTFNMKHJldHVyblR5cGUsIG5hbWUsIGZuKXtcblxuICAgICAgICB2YXIgZ2xzbCA9IHJldHVyblR5cGUgKyAnICcgK1xuICAgICAgICAgICAgbmFtZSArICcoJyArIGFwcGx5RW52UGFyYW1ldGVycyhmbi50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL3ZhclxccysoW1xcd3xcXGRdKylcXHMqPVxccypuZXdcXHMrKFtcXHd8XFxkXSspXFwoKC4qKVxcKS9nLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV4cHIsIG5hbWUsIGR0eXBlLCB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IFtkdHlwZS50b0xvd2VyQ2FzZSgpLCBuYW1lLCAnPScsIHZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZV07XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9mb3JcXHMqXFwoXFxzKnZhclxccysvZywgJ2ZvcihpbnQgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC92YXJcXHMvZywgJ2Zsb2F0ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdGhpcy4vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwkKC4qKVxcKCguKilcXClcXHMqKD18OykvZywgXCIkMSAkMiAkM1wiKTtcbiAgICAgICAgICAgIC8vIC5yZXBsYWNlKC9cXCQoLio/KVxcLi9nLCBcIiQxIFwiKVxuXG4gICAgICAgIGlmKG5hbWUgPT0gXCJtYWluXCIpIHtcbiAgICAgICAgICAgIGdsc2wgPSBnbHNsLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKnsvLCAnKXsnKSArIFwiXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGdsc2wubWF0Y2goL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8pWzFdO1xuXG4gICAgICAgICAgICBpZihhcmdzICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJncy5yZXBsYWNlKC9cXCQoW1xcd3xcXGRdKylfL2csIFwiJDEgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2xzbCA9IGdsc2xcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqXFwpLywgYXJncysnKScpICsgXCJcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xzbDtcbiAgICB9XG5cbiAgICAvL3NldCBwYXJhbWV0ZXJzIGluIEpTIGZ1bmN0aW9ucyBiZWZvcmUgY29udmVydGluZyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gYXBwbHlFbnZQYXJhbWV0ZXJzKHN0cil7XG4gICAgICAgIC8vZmluZCBhbGwgJCguLi4pIGFuZCByZXBsYWNlIHRoZW0gd2l0aCBwYXJhbWV0ZXJzXG4gICAgICAgIHZhciBlbnZQYXJhbSA9IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpO1xuICAgICAgICBpZihlbnZQYXJhbS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlBhcmFtLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKG1hdGNoZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgdW5pZm9ybXMgdG8gYmUgdXNlZCBhcyBwYXJhbWV0ZXJzIGluIHNoYWRlcnMsIGxpa2UgJCh1bmlmb3JtTmFtZSlcbiAgICAgICAgLy8gdmFyIGVudlVuaWZvcm1zID0gT2JqZWN0LmtleXMocmVzb3VyY2UudW5pZm9ybSk7XG4gICAgICAgIC8vIHJlID0gbmV3IFJlZ0V4cChcIlxcXFwkXFxcXCgoXCIrZW52VW5pZm9ybXMuam9pbihcInxcIikrXCIpXFxcXClcIixcImdcIik7XG4gICAgICAgIC8vIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgLy8gICAgIHJldHVybiByZXNvdXJjZS51bmlmb3JtW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV0uZGF0YTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21waWxlKHNoYWRlclR5cGUsIHNoYWRlclNvdXJjZSkge1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gY3R4LlZFUlRFWF9TSEFERVIgJiYgc2hhZGVyVHlwZSAhPT0gY3R4LkZSQUdNRU5UX1NIQURFUikge1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3I6IHVua25vd24gc2hhZGVyIHR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjdHguY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xuICAgICAgICBjdHguc2hhZGVyU291cmNlKF9zaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIGN0eC5jb21waWxlU2hhZGVyKF9zaGFkZXIpO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBjb21waWxlIHN0YXR1cywgZ2V0IGNvbXBpbGUgZXJyb3IgaWYgYW55XG4gICAgICAgIHZhciBjb21waWxlZCA9IGN0eC5nZXRTaGFkZXJQYXJhbWV0ZXIoX3NoYWRlciwgY3R4LkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFjb21waWxlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRTaGFkZXJJbmZvTG9nKF9zaGFkZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2hhZGVyU291cmNlICsgJ1xcbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb21waWxpbmcgc2hhZGVyICdcIiArIF9zaGFkZXIgKyBcIic6XCIgKyBsYXN0RXJyb3IpO1xuXG4gICAgICAgICAgICBjdHguZGVsZXRlU2hhZGVyKF9zaGFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3NoYWRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREZXBzKGZuKSB7XG4gICAgICAgIHZhciBkZXBzID0gW10sXG4gICAgICAgICAgICBzb3VyY2VDb2RlID0gZm4udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNoYWRlckFyZ3MgPSBzb3VyY2VDb2RlLm1hdGNoKC9mdW5jdGlvblxccy4qP1xcKChbXildKilcXCkvKSxcbiAgICAgICAgICAgIGFyZ3MgPSAoc2hhZGVyQXJncyAhPT0gbnVsbCAmJiBzaGFkZXJBcmdzLmxlbmd0aCkgPyBzaGFkZXJBcmdzWzFdIDogW107XG4gICAgICAgIC8vIGFyZ3MgPSBhcmdzLnJlcGxhY2UoLyg/OlxcclxcbnxcXHJ8XFxufFxccykvZywgJycpO1xuICAgICAgICAvL1xuICAgICAgICBpZihhcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGFyZ3Muc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5yZXBsYWNlKC9cXC9cXCouKlxcKlxcLy8sICcnKS50cmltKCk7XG4gICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IGdldEV4dHJhRGVwcyhzb3VyY2VDb2RlKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGV4dHJhRGVwc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlcHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RXh0cmFEZXBzKGZuU3RyaW5nKSB7XG4gICAgICAgIHZhciBleHRyYURlcHMgPSBmblN0cmluZy5tYXRjaCgvdGhpc1xcLihcXHcrKS9nKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMubWFwKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkLnNsaWNlKDUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhRGVwcyB8fCBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNsYXJlRGVwKGRlcCkge1xuICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2UuZ2V0KGRlcCk7XG4gICAgICAgIGlmKHR5cGVvZiByZXMgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZS9kZXBlbmRlbmNlIFwiJyArIGRlcCArICdcIiBpcyBub3QgZm91bmQuJyk7XG4gICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgcmV0dXJuIHRvR0xTTChyZXMudHlwZSwgcmVzLm5hbWUsIHJlcy5mbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXMuaGVhZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlRGVwcyhkZXBzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IHt9O1xuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZCwgaSl7XG4gICAgICAgICAgICBuYW1lc1tkXSA9IGk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhuYW1lcyk7XG4gICAgfVxuXG4gICAgc2hhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKGFyZywgZm4pe1xuICAgICAgICB2YXIgb3B0aW9uID0gYXJnIHx8IHt9LFxuICAgICAgICAgICAgbmFtZSA9IG9wdGlvbi5uYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdHlwZSA9IG9wdGlvbi50eXBlIHx8IFwidmVydGV4XCIsXG4gICAgICAgICAgICBkZXBzID0gb3B0aW9uLnJlcXVpcmUgfHwgb3B0aW9uLmRlcHMgfHwgW10sXG4gICAgICAgICAgICBwcmVjaXNpb24gPSBvcHRpb24ucHJlY2lzaW9uIHx8IFwiaGlnaFwiLFxuICAgICAgICAgICAgZGVidWcgPSBvcHRpb24uZGVidWcgfHwgZmFsc2UsXG4gICAgICAgICAgICBtYWluID0gb3B0aW9uLm1haW4gfHwgZm4gfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXIgc2hhZGVyU291cmNlID0gJ3ByZWNpc2lvbiAnICsgcHJlY2lzaW9uICsgJ3AgZmxvYXQ7XFxuJztcblxuICAgICAgICBpZihkZXBzLmxlbmd0aCA9PT0gMCkgZGVwcyA9IHVuaXF1ZURlcHMoZ2V0RGVwcyhtYWluKSk7XG5cbiAgICAgICAgLy9nZXQgZGVwZW5kZW5jZSBmcm9tIHN1YnJvdXRpbmVzIGlmIGFueVxuICAgICAgICB2YXIgZXh0cmFEZXBzID0gW10sXG4gICAgICAgICAgICBzdWJSb3V0aW5lcyA9IFtdO1xuXG4gICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICAgICAgaWYodHlwZW9mIHJlcyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlcCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IgKCdFcnJvciEgVW5kZWZpbmVkIHZhcmlhYmxlIGluIHNoYWRlcjogJysgIGRlcC5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKSB7XG4gICAgICAgICAgICAgICAgc3ViUm91dGluZXMucHVzaChyZXMubmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YkRlcHMgPSBnZXRFeHRyYURlcHMocmVzLmZuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGlmKHN1YkRlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETzogbWFrZSB0aGlzIHJlY3Vyc2l2ZSB0byBjaGVjayBhbGwgc3Vicm91dGluZSBkZXBzXG4gICAgICAgICAgICAgICAgICAgIHN1YkRlcHMuZm9yRWFjaChmdW5jdGlvbihzZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmVzID0gcmVzb3VyY2UuZ2V0KHNkZXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoZ2V0RXh0cmFEZXBzKHNyZXMuZm4udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoc3ViRGVwcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBhbGxEZXBzID0gZXh0cmFEZXBzXG4gICAgICAgICAgICAvLyAuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgLy8gICAgIHJldHVybiBkZXBzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC5jb25jYXQoZGVwcy5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YlJvdXRpbmVzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuY29uY2F0KHN1YlJvdXRpbmVzKTtcblxuICAgICAgICAgICAgZGVwcyA9IHVuaXF1ZURlcHMoYWxsRGVwcyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGVwcykpe1xuICAgICAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGRlcHMpID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkZXBzKS5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlVHlwZSl7XG4gICAgICAgICAgICAgICAgZGVwc1tyZXNvdXJjZVR5cGVdLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzaGFkZXJTb3VyY2UgKz0gdG9HTFNMKCd2b2lkJywgJ21haW4nLCBtYWluKTtcblxuICAgICAgICBpZihkZWJ1ZylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSk7XG5cbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjb21waWxlKHNoYWRlclR5cGVbdHlwZV0sIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIF9zaGFkZXIuX3NoYWRlclR5cGUgPSBzaGFkZXJUeXBlW3R5cGVdO1xuICAgICAgICBfc2hhZGVyLmRlcHMgPSBkZXBzO1xuICAgICAgICBfc2hhZGVyLnNvdXJjZSA9IHNoYWRlclNvdXJjZTtcbiAgICAgICAgc2hhZGVyW3R5cGVdW25hbWVdID0gX3NoYWRlcjtcbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cbiIsImltcG9ydCBSZXNvdXJjZSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCBQcm9ncmFtIGZyb20gJy4vcHJvZ3JhbSc7XG5pbXBvcnQgRnJhbWVidWZmZXIgZnJvbSAnLi9mcmFtZWJ1ZmZlcic7XG4vLyBpbXBvcnQgUmVhY3RpdmUgZnJvbSAnLi9yZWFjdGl2ZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZsZXhHTChhcmcpIHtcblxuICAgIHZhciBmbGV4Z2wgPSAodGhpcyBpbnN0YW5jZW9mIEZsZXhHTCkgPyB0aGlzIDoge307XG5cblxuICAgIHZhciBvcHRpb25zID0gYXJnIHx8IHt9LFxuICAgICAgICBjb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBudWxsLFxuICAgICAgICBjYW52YXMgPSBvcHRpb25zLmNhbnZhcyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgbnVsbCxcbiAgICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgbnVsbCxcbiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyB8fCB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgfSxcbiAgICAgICAgY3R4ID0gb3B0aW9ucy5jb250ZXh0IHx8IG9wdGlvbnMuY3R4IHx8IG51bGwsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgc2hhcmVkRnVuY3Rpb24gPSBvcHRpb25zLnNoYXJlZEZ1bmN0aW9uIHx8IHt9O1xuXG5cblxuICAgIGlmICh0eXBlb2YoY2FudmFzKSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChjYW52YXNbMF0gPT0gXCIjXCIpIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcy5zdWJzdHJpbmcoMSkpO1xuICAgICAgICBlbHNlIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcyk7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyID0gKHR5cGVvZihjb250YWluZXIpID09IFwic3RyaW5nXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKSA6IGNvbnRhaW5lcjtcbiAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgaWYgKGhlaWdodCA9PT0gbnVsbCkgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgLy8gd2lkdGggLT0gcGFkZGluZy5sZWZ0ICsgcGFkZGluZy5yaWdodDtcbiAgICAvLyBoZWlnaHQgLT0gcGFkZGluZy50b3AgKyBwYWRkaW5nLmJvdHRvbTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luTGVmdCA9IHBhZGRpbmcubGVmdCArIFwicHhcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luVG9wID0gcGFkZGluZy50b3AgKyBcInB4XCI7XG5cblxuICAgIGlmIChjdHggPT09IG51bGwpXG4gICAgICAgIGN0eCA9IHNldHVwV2ViR0woY2FudmFzKTtcbiAgICBmbGV4Z2wuY3R4ID0gY3R4O1xuICAgIGZsZXhnbC5jYW52YXMgPSBjYW52YXM7XG4gICAgZmxleGdsLnJlc291cmNlcyA9IHJlc291cmNlcztcbiAgICBjdHguX2RpY3QgPSBvcHRpb25zLmVudiB8fCBvcHRpb25zLmRpY3QgfHwgb3B0aW9ucy5kaWN0aW9uYXJ5IHx8IHt9O1xuXG4gICAgdmFyIHJlc291cmNlcyA9IG5ldyBSZXNvdXJjZShjdHgpLFxuICAgICAgICBmcmFtZWJ1ZmZlcnMgPSBuZXcgRnJhbWVidWZmZXIoY3R4KSxcbiAgICAgICAgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGN0eCwgcmVzb3VyY2VzKSxcbiAgICAgICAgcmVhbFByb2dyYW0gPSBudWxsO1xuXG5cbiAgICB2YXIgYmxlbmRFeHQgPSBjdHguZ2V0RXh0ZW5zaW9uKFwiRVhUX2JsZW5kX21pbm1heFwiKTtcbiAgICBpZiAoYmxlbmRFeHQpIHtcbiAgICAgICAgY3R4Lk1BWF9FWFQgPSBibGVuZEV4dC5NQVhfRVhUO1xuICAgICAgICBjdHguTUlOX0VYVCA9IGJsZW5kRXh0Lk1JTl9FWFQ7XG4gICAgfVxuICAgIGN0eC5leHQgPSBjdHguZ2V0RXh0ZW5zaW9uKFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtcbiAgICBlbmFibGVFeHRlbnNpb24oW1xuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0XCIsXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCJcbiAgICBdKTtcbiAgICBpZiAoY29udGFpbmVyKVxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuXG4gICAgZnVuY3Rpb24gc2V0dXBXZWJHTChjYW52YXMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIl07XG4gICAgICAgIHZhciBnbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKGdsKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2w7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5hYmxlRXh0ZW5zaW9uKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4dGVuc2lvbnMpKSBleHRlbnNpb25zID0gW2V4dGVuc2lvbnNdO1xuICAgICAgICBleHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgZXh0UHJvcHMgPSBjdHguZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gICAgICAgICAgICBpZiAoZXh0UHJvcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRQcm9wcykuZm9yRWFjaChmdW5jdGlvbihlcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4dC5oYXNPd25Qcm9wZXJ0eShlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5leHRbZXBdID0gZXh0UHJvcHNbZXBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBmbGV4Z2wuZW5hYmxlRXh0ZW5zaW9uID0gZW5hYmxlRXh0ZW5zaW9uO1xuXG4gICAgLyoqXG4gICAgICogQWxsb2NhdGUgQXR0cmlidXRlcyBpbiB2ZXJ0ZXggYnVmZmVyIGFycmF5IHN0b3JlZCBpbiBHUFUgbWVtb3J5XG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIGF0dHJpYnV0ZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcImF0dHJpYnV0ZVwiLCBuYW1lLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgaWYgKCFmbGV4Z2wuYXR0cmlidXRlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmF0dHJpYnV0ZSwgbmFtZSwgeyAvL2FmdGVyIGFsbG9jYXRpbmcsIGZsZXhnbCBnZXRzIG5ldyBrZXkgYXR0cmlidXRlLCBoZWxwaW5nIGVhc2lseSBjaGFuZ2UgYXR0cmlidXRlIGRhdGEuXG4gICAgICAgICAgICAgICAgZ2V0KCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMuYXR0cmlidXRlW25hbWVdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KGRhdGEpe1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMuYXR0cmlidXRlW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuICAgIC8vIGZsZXhnbC5idWZmZXIgPSBmbGV4Z2wuYXR0cmlidXRlOyAvL2FsaWFzXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgdW5pZm9ybSB2YXJpYWJsZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC51bmlmb3JtID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ1bmlmb3JtXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC51bmlmb3JtLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLnVuaWZvcm0sIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5pc1Byb2dyYW0ocmVhbFByb2dyYW0pKSAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnVuaWZvcm1bbmFtZV0ubGluayhyZWFsUHJvZ3JhbSk7ICAgICAgICAvLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIGZsZXhnbC51bmlmb3JtLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGFvYSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYW9hLmZvckVhY2goZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgc2EgPSBzYS5jb25jYXQoYSk7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzYTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgdGV4dHVyZSB0eXBlOiB1bnNpZ25lZF9ieXRlIG9yIGZsb2F0LCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbY2hhbm5lbD0nYWxwaGEnXSBXZWJHTCBmb3JtYXRzIChyZ2JhLCBhbHBoYSlcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtzYW1wbGVyPW51bGxdIEZMZXhHTCBVbmlmb3JtIE9iamVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnRleHR1cmUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhLCBkaW0sIGNoYW5uZWwsIHNhbXBsZXIpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidGV4dHVyZVwiLCBuYW1lLCB0eXBlLCBkaW0sIGNoYW5uZWwsIGRhdGEsIHNhbXBsZXIpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLnRleHR1cmUsIG5hbWUsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy50ZXh0dXJlW25hbWVdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHJlc291cmNlcy50ZXh0dXJlW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC50ZXh0dXJlLnVwZGF0ZSA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHJlc291cmNlcy50ZXh0dXJlW25hbWVdLnVwZGF0ZShkYXRhLCBvZmZzZXQsIGRpbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbdHlwZV0gVmFyeWluZyB2YXJpYWJsZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBbc2l6ZT0xXSBkYXRhIGFycmF5XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudmFyeWluZyA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidmFyeWluZ1wiLCBuYW1lLCB0eXBlLCBzaXplKTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIGF0dHJpYnV0ZSB0eXBlOiBmbG9hdCwgdmVjMiwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFt0ZXh0dXJlPW51bGxdIEZMZXhHTCBUZXh0dXJlIE9iamVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGV4dHVyZSB8fCByZXNvdXJjZXMuYWxsb2NhdGUoJ3RleHR1cmUnLCBuYW1lLCB0eXBlLCBkaW0sICdyZ2JhJywgbnVsbCk7XG4gICAgICAgIGZyYW1lYnVmZmVycy5jcmVhdGUobmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKTtcblxuICAgICAgICBpZiAoIWZsZXhnbC5mcmFtZWJ1ZmZlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5mcmFtZWJ1ZmZlciwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcnNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKG5hbWUsIHByb2dyYW0pIHtcbiAgICAgICAgZnJhbWVidWZmZXJzW25hbWVdLmVuYWJsZVJlYWQocHJvZ3JhbSk7XG4gICAgfVxuXG4gICAgZmxleGdsLmJpbmRGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKGZiTmFtZSkge1xuICAgICAgICBpZiAoZmJOYW1lID09PSBudWxsKVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJzW2ZiTmFtZV0ucHRyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuc3Vicm91dGluZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInN1YnJvdXRpbmVcIiwgbmFtZSwgdHlwZSwgZm4pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5wYXJhbWV0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZVBhaXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGtleVZhbHVlUGFpcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IGtleVZhbHVlUGFpcnNba2V5XTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN0eC5fZGljdFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4Ll9kaWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZVBhaXJzW2tleV1baSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IG5ld0FycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGN0eC5fZGljdFtrZXldKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBkaWN0S2V5cyA9IE9iamVjdC5rZXlzKGN0eC5fZGljdFtrZXldKTtcbiAgICAgICAgICAgICAgICBmeGdsLnVuaWZvcm0oJ2RpY3QnK2tleSwgJ2Zsb2F0JywgZGljdEtleXMubWFwKGQ9PmN0eC5fZGljdFtrZXldW2RdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmRpY3Rpb25hcnkgPSBmbGV4Z2wucGFyYW1ldGVyO1xuICAgIGZsZXhnbC5zaGFkZXIgPSBwcm9ncmFtLnNoYWRlcjtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbCwgdHlwZSwgc291cmNlKSB7XG4gICAgICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgIH1cblxuXG4gICAgZmxleGdsLmFwcCA9IGZ1bmN0aW9uKG5hbWUsIHByb3BzLCBudW0pIHtcblxuICAgICAgICB2YXIgdnMgPSBjcmVhdGVTaGFkZXIoY3R4LCBjdHguVkVSVEVYX1NIQURFUiwgcHJvcHMudnNvdXJjZSksXG4gICAgICAgICAgICBmcyA9IGNyZWF0ZVNoYWRlcihjdHgsIGN0eC5GUkFHTUVOVF9TSEFERVIsIHByb3BzLmZzb3VyY2UpO1xuICAgICAgICAgICAgLy8gZmIgPSBwcm9wcy5mcmFtZWJ1ZmZlciB8fCBudWxsO1xuXG5cbiAgICAgICAgaWYobnVtID09PSAwKXtcbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlWyd1X3RleHR1cmUnXS5saW5rKHJlYWxQcm9ncmFtKTtcblxuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIoJ2Zfc3VtX3RleHR1cmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBjdHgudmlld3BvcnQoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCB2cywgZnMpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcy51bmlmb3JtWyd1X3RleHR1cmUnXS5saW5rKHJlYWxQcm9ncmFtKTsgICAgXG4gICAgICAgIC8vIHZhciBkcmF3ID0gcHJvcHMucmVuZGVyIHx8IHByb3BzLmRyYXc7XG5cbiAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgLy8gICAgIC8vIHZhciBnbCA9IGZsZXhnbC5wcm9ncmFtKG5hbWUpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGRyYXcuY2FsbChjdHgsIGFyZ3MpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgY3R4LmRyYXdBcnJheXMoY3R4LkxJTkVTLCAwLCAyKTtcblxuICAgIH1cblxuICAgIGZsZXhnbC5kaW1lbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuICAgIH1cblxuICAgIHJldHVybiBmbGV4Z2w7XG59XG4iLCJpbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGcmFtZWJ1ZmZlcihnbENvbnRleHQpIHtcblxuICAgIHZhciBmcmFtZWJ1ZmZlciA9ICh0aGlzIGluc3RhbmNlb2YgRnJhbWVidWZmZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmcmFtZWJ1ZmZlci5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXSA9IHtcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCksXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICB3aWR0aDogZGltWzBdIHx8IDEwMjQsXG4gICAgICAgICAgICBoZWlnaHQ6IGRpbVsxXSB8fCAxMDI0LFxuICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSB8fCBudWxsLFxuICAgICAgICAgICAgLy8gcmVuZGVyYnVmZmVyOiBjdHguY3JlYXRlUmVuZGVyYnVmZmVyKCksXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAoZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyAgICAgdmFyIGJ1ZiA9ICh0eXBlID09ICdmbG9hdCcpID9cbiAgICAgICAgLy8gICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpIDpcbiAgICAgICAgLy8gICAgICAgICBuZXcgVWludDhBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KTtcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPSBUZXh0dXJlKGN0eCkuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgXCJyZ2JhXCIsIGJ1Zik7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyB2YXIgcmVuZGVyYnVmZmVyID0gZnJhbWVidWZmZXJbbmFtZV0ucmVuZGVyYnVmZmVyO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJbbmFtZV0ucHRyKTtcbiAgICAgICAgLy8gY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgLy8gY3R4LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoXG4gICAgICAgIC8vICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAvLyAgICAgY3R4LkRFUFRIX0NPTVBPTkVOVDE2LFxuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0ud2lkdGgsXG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5oZWlnaHRcbiAgICAgICAgLy8gKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlLnB0cixcbiAgICAgICAgICAgIDBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gY3R4LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgICAvLyAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAvLyAgICAgY3R4LkRFUFRIX0FUVEFDSE1FTlQsXG4gICAgICAgIC8vICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAvLyAgICAgcmVuZGVyYnVmZmVyXG4gICAgICAgIC8vICk7XG4gICAgICAgIC8vIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5wdHIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLnRleHR1cmUubmFtZSk7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHRoaXMudGV4dHVyZS5sb2NhdGlvbiwgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZW5kZXJidWZmZXIpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVRleHR1cmUodGhpcy50ZXh0dXJlLnB0cilcbiAgICAgICAgICAgIGN0eC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLnB0cik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBmcmFtZWJ1ZmZlcjtcbn1cbiIsImltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9ncmFtKGdsQ29udGV4dCwgcmVzb3VyY2VzKSB7XG5cbiAgICB2YXIgcHJvZ3JhbSA9IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgc2hhZGVycyA9IG5ldyBTaGFkZXIoZ2xDb250ZXh0LCByZXNvdXJjZXMpO1xuXG4gICAgcHJvZ3JhbS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBuYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdnMgPSB2cyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGZzID0gZnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBkZXBzID0gW107XG5cbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAga2VybmVsc1tuYW1lXSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICAgICAga2VybmVsc1tuYW1lXS52cyA9ICh0eXBlb2YgdnMgPT0gXCJvYmplY3RcIikgPyB2cyA6IHNoYWRlcnMudmVydGV4W3ZzXTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5mcyA9ICh0eXBlb2YgZnMgPT0gXCJvYmplY3RcIikgPyBmcyA6IHNoYWRlcnMuZnJhZ21lbnRbZnNdO1xuXG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5mcyk7XG4gICAgICAgIGN0eC5saW5rUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgdmFyIGxpbmtlZCA9IGN0eC5nZXRQcm9ncmFtUGFyYW1ldGVyKGtlcm5lbHNbbmFtZV0sIGN0eC5MSU5LX1NUQVRVUyk7XG4gICAgICAgIGlmICghbGlua2VkKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yID0gY3R4LmdldFByb2dyYW1JbmZvTG9nKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOlwiICsgbGFzdEVycm9yKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0udnMuZGVwcyk7XG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLmZzLmRlcHMpO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmRlcHMgPSBkZXBzO1xuXG4gICAgfVxuXG4gICAgcHJvZ3JhbS51c2UgPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5kZWxldGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9ncmFtLnNoYWRlciA9IGZ1bmN0aW9uKGFyZywgZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmc7XG4gICAgICAgIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgfVxuXG4gICAgcHJvZ3JhbS52ZXJ0ZXggPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwidmVydGV4XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5mcmFnbWVudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgdHlwZTogXCJmcmFnbWVudFwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9ncmFtO1xufVxuIiwiaW1wb3J0IEZsZXhHTCBmcm9tICcuL2ZsZXhnbCc7XG5cbihmdW5jdGlvbiBtYWtlR2xvYmFsKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuRmxleEdMID0gRmxleEdMO1xuICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==