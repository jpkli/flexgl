!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=u(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function o(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],o=t[e].dim[0],u=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,o,u,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,u,f,c,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:u||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},o(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return o(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var o=r[t[e].type.toUpperCase()],u=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,u,o,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,o(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var o=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===o.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},o=n.container||null,u=n.canvas||document.createElement("canvas"),f=n.width||null,c=n.height||null,s=n.padding||{left:0,right:0,top:0,bottom:0},l=n.context||n.ctx||null;n.sharedFunction,"string"==typeof u&&(u="#"==u[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),o&&(o="string"==typeof o?document.getElementById(o):o,null===f&&(f=o.clientWidth),null===c&&(c=o.clientHeight)),u.width=f,u.height=c,u.style.position="absolute",u.style.marginLeft=s.left+"px",u.style.marginTop=s.top+"px",null===l&&(l=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(u)),r.ctx=l,r.canvas=u,r.resources=d,l._dict=n.env||n.dict||n.dictionary||{};var d=new a(l),h=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,a,o){if(r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:a[0]||1024,height:a[1]||1024,texture:o||null,renderbuffer:n.createRenderbuffer()},null===r[e].texture){var u="float"==t?new Float32Array(a[0]*a[1]*4):new Uint8Array(a[0]*a[1]*4);r[e].texture=i(n).create(e,t,a,"rgba",u)}var f=r[e].renderbuffer;return n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.bindRenderbuffer(n.RENDERBUFFER,f),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[e].width,r[e].height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,f),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(l),p=new function(e,t){var r={},n=l,i={},a=new function e(t,r){var n=this instanceof e?this:{},i=t,a=r,o=i._dict||{};n.vertex={},n.fragment={};var u={vertex:i.VERTEX_SHADER,fragment:i.FRAGMENT_SHADER};function f(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(o);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return o[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function c(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=a.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?f(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return n.create=function(e,t){var r=e||{},o=r.name||"default",d=r.type||"vertex",h=r.require||r.deps||[],p=r.precision||"high",m=r.debug||!1,E=r.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=E.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=c(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}()));var b=[],g=[];if(h.forEach(function(e){var t=a.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=c(t.fn.toString());r.length&&(r.forEach(function(e){var t=a.get(e);"subroutine"==t.resourceType&&(b=b.concat(c(t.fn.toString())))}),b=b.concat(r))}}),b.length){var T=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(T)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=f("void","main",E),m&&console.log(y);var v=function(e,t){if(e!==i.VERTEX_SHADER&&e!==i.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=i.createShader(e);if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){var n=i.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+n)}return r}(u[d],y);return v._shaderType=u[d],v.deps=h,v.source=y,n[d][o]=v,v},n}(l,t);return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var o=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof r?r:a.fragment[r],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);o=(o=o.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=o},r.use=function(e,r,a){return i.hasOwnProperty(e)?(n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]):(this.create(e,r,a),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e])},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(l,d),m=null,E=l.getExtension("EXT_blend_minmax");function y(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=l.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(l.ext[e]=t[e])})})}function b(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}return E&&(l.MAX_EXT=E.MAX_EXT,l.MIN_EXT=E.MIN_EXT),l.ext=l.getExtension("ANGLE_instanced_arrays"),y(["OES_texture_float","OES_texture_float_linear"]),o&&o.appendChild(u),r.enableExtension=y,r.attribute=function(e,t,n){return d.allocate("attribute",e,t,n),r.attribute.hasOwnProperty(e)||Object.defineProperty(r.attribute,e,{get:()=>d.attribute[e],set(t){d.attribute[e].load(t)}}),r},r.uniform=function(e,t,n){return d.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return d.uniform[e]},set:function(t){d.uniform[e].load(t),l.isProgram(m)&&d.uniform[e].link(m)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,o){return d.allocate("texture",e,t,i,a,n,o),Object.defineProperty(r.texture,e,{get:function(){return d.texture[e]},set:function(t){d.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){d.texture[e].update(t,r,n)},r.varying=function(e,t,n){return d.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||d.allocate("texture",e,t,n,"rgba",null),h.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return h[e]}}),r},r.framebuffer.enableRead=function(e){h[e].enableRead(m)},r.bindFramebuffer=function(e){null===e?l.bindFramebuffer(l.FRAMEBUFFER,null):l.bindFramebuffer(l.FRAMEBUFFER,h[e].ptr)},r.subroutine=function(e,t,n){return d.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(l._dict[t]=e[t],Array.isArray(l._dict[t])){var r=0;Object.defineProperty(l._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,l._dict[t]=e}})}else if("object"==typeof l._dict[t]){var n=Object.keys(l._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>l._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=p.shader,r.app=function(e,t){var r=b(l,l.VERTEX_SHADER,t.vsource),n=b(l,l.FRAGMENT_SHADER,t.fsource);t.framebuffer,m=p.use(e,r,n),this.attribute.a_position.link(m),this.texture.u_texture.link(m);var i=t.render||t.draw;return function(e){return i.call(l,e)}},r.dimension=function(){return[u.width,u.height]},r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlRleHR1cmUiLCJ0ZXh0dXJlIiwidGV4dHVyZUlEIiwic2V0VGV4dHVyZSIsInRleERhdGEiLCJ0b1VwcGVyQ2FzZSIsImZvcm1hdCIsImNoYW5uZWwiLCJ3aWR0aCIsImRpbSIsImhlaWdodCIsInRleEltYWdlMkQiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsIlRFWFRVUkVfV1JBUF9TIiwiQ0xBTVBfVE9fRURHRSIsIlRFWFRVUkVfV1JBUF9UIiwic2FtcGxlciIsInRleEluZGV4IiwiY3JlYXRlVGV4dHVyZSIsImNvcHlGcm9tRkJPIiwiY29weVRleEltYWdlMkQiLCJSR0JBIiwidXBkYXRlIiwib2Zmc2V0IiwidGV4U3ViSW1hZ2UyRCIsInJlc2l6ZSIsImRlbGV0ZSIsImRlbGV0ZVRleHR1cmUiLCJSZXNvdXJjZSIsInJlc291cmNlIiwiZ3B1UmVzb3VyY2VzIiwiYXR0cmlidXRlIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJzZXRBdHRyaWJ1dGUiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlQnVmZmVyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImFycmF5QnVmZmVyIiwiZGVsZXRlQnVmZmVyIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlcyIsImtleXMiLCJyZXNvdXJjZU5hbWUiLCJmbGV4Z2wiLCJ3aW5kb3ciLCJGbGV4R0wiLCJhcmciLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJzaGFyZWRGdW5jdGlvbiIsImYiLCJnZXRFbGVtZW50QnlJZCIsImNhdm5hcyIsInN1YnN0cmluZyIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Iiwic3R5bGUiLCJwb3NpdGlvbiIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJuYW1lcyIsImdsIiwiZ2V0Q29udGV4dCIsIl9kaWN0IiwiZW52IiwiZGljdCIsImRpY3Rpb25hcnkiLCJmcmFtZWJ1ZmZlcnMiLCJGcmFtZWJ1ZmZlciIsImZyYW1lYnVmZmVyIiwiY3JlYXRlRnJhbWVidWZmZXIiLCJyZW5kZXJidWZmZXIiLCJjcmVhdGVSZW5kZXJidWZmZXIiLCJVaW50OEFycmF5IiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwicmVuZGVyYnVmZmVyU3RvcmFnZSIsIkRFUFRIX0NPTVBPTkVOVDE2IiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyIiwiREVQVEhfQVRUQUNITUVOVCIsImVuYWJsZVJlYWQiLCJkZWxldGVSZW5kZXJidWZmZXIiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImtlcm5lbHMiLCJzaGFkZXJzIiwiU2hhZGVyIiwiZ2xSZXNvdXJjZSIsInNoYWRlciIsInBhcmFtZXRlcnMiLCJ2ZXJ0ZXgiLCJmcmFnbWVudCIsInNoYWRlclR5cGUiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwidG9HTFNMIiwicmV0dXJuVHlwZSIsImdsc2wiLCJzdHIiLCJlbnZQYXJhbSIsInJlIiwiUmVnRXhwIiwiam9pbiIsInJlcGxhY2UiLCJtYXRjaGVkIiwiZXhwciIsImR0eXBlIiwidG9Mb3dlckNhc2UiLCJhcmdzIiwibWF0Y2giLCJnZXRFeHRyYURlcHMiLCJmblN0cmluZyIsImV4dHJhRGVwcyIsIm1hcCIsImRlY2xhcmVEZXAiLCJkZXAiLCJ1bmlxdWVEZXBzIiwiZGVwcyIsIm9wdGlvbiIsInJlcXVpcmUiLCJwcmVjaXNpb24iLCJkZWJ1ZyIsIm1haW4iLCJzaGFkZXJTb3VyY2UiLCJzb3VyY2VDb2RlIiwic2hhZGVyQXJncyIsInNwbGl0IiwidHJpbSIsInN1YlJvdXRpbmVzIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJzdWJEZXBzIiwic2RlcCIsInNyZXMiLCJhbGxEZXBzIiwiaCIsIl9zaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJsYXN0RXJyb3IiLCJnZXRTaGFkZXJJbmZvTG9nIiwiX3NoYWRlclR5cGUiLCJzb3VyY2UiLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ1c2VQcm9ncmFtIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsInJlYWxQcm9ncmFtIiwiYmxlbmRFeHQiLCJnZXRFeHRlbnNpb24iLCJlbmFibGVFeHRlbnNpb24iLCJleHRlbnNpb25zIiwiZXh0ZW5zaW9uIiwiZXh0UHJvcHMiLCJlcCIsImV4dCIsImRlbGV0ZVNoYWRlciIsIk1BWF9FWFQiLCJNSU5fRVhUIiwiYXBwZW5kQ2hpbGQiLCJbb2JqZWN0IE9iamVjdF0iLCJpc1Byb2dyYW0iLCJzZXJpYWxpemUiLCJhb2EiLCJmYk5hbWUiLCJwYXJhbWV0ZXIiLCJrZXlWYWx1ZVBhaXJzIiwibmV3QXJyYXkiLCJkaWN0S2V5cyIsImZ4Z2wiLCJhcHAiLCJwcm9wcyIsInZzb3VyY2UiLCJmc291cmNlIiwiYV9wb3NpdGlvbiIsInVfdGV4dHVyZSIsImRyYXciLCJyZW5kZXIiLCJkaW1lbnNpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksS0FDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxLQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxjQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixZQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdB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QUFnTixJQUFBaFEsRUFBQXdQLEVBQUFDLEdBRUF6TixLQUFBcUUsVUFBQTBMLFdBQUFoUCxLQUFBcU4sR0FFQXBPLEtBQUFvQyxRQUFBNE4sVUFBQWpQLEtBQUFxTixHQUVBLElBQUE2QixFQUFBTCxFQUFBTSxRQUFBTixFQUFBSyxLQUVBLGdCQUFBL0UsR0FFQSxPQUFBK0UsRUFBQXJTLEtBQUFxQyxFQUFBaUwsS0FJQTdFLEVBQUE4SixVQUFBLFdBQ0EsT0FBQXhKLEVBQUFoRSxNQUFBZ0UsRUFBQTlELFNBR0F3RCIsImZpbGUiOiJmbGV4Z2wubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVW5pZm9ybShnbENvbnRleHQsIG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgIHZhciB1bmlmb3JtID0gKHRoaXMgaW5zdGFuY2VvZiBVbmlmb3JtKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplQXJyYXkoYXJyYXlPZkFycmF5KSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhcnJheU9mQXJyYXkuZm9yRWFjaChmdW5jdGlvbihhKXtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VW5pZm9ybSgpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24sXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zaXplLFxuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCh0eXBlID09ICdmbG9hdCcgfHwgdHlwZSA9PSAnaW50JykgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSlcbiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07XG5cbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHR5cGUuc2xpY2UoMCwzKSA9PSAndmVjJyB8fCB0eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDQpID09ICdpdmVjJyB8fCB0eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnaXYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCwzKSA9PSAnbWF0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybU1hdHJpeCcgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGZhbHNlLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2VUeXBlJykgJiYgZGF0YS5yZXNvdXJjZVR5cGUgPT0gJ3RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBkYXRhLnB0cik7XG4gICAgICAgICAgICAgICAgY3R4LnVuaWZvcm0xaShsb2NhdGlvbiwgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmlmb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0gPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgcGFyc2VJbnQodHlwZS5zbGljZSg0LDUpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICBzZXRVbmlmb3JtLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndW5pZm9ybSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIGxlbiA9IDA7XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSAhPSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnNpemU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vVE9ETzogZml4IGRlY2xhcmF0aW9uIGZvciBtYXRyaXhcbiAgICAgICAgICAgIGlmKGxlbiA+IDEgJiYgdHlwZSAhPSAnbWF0NCcpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgbGVuICsgJ10nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdW5pZm9ybVtuYW1lXTtcbiAgICB9XG5cblxuICAgIHJldHVybiB1bmlmb3JtO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSBcIi4vdW5pZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0dXJlKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHRleHR1cmUgPSAodGhpcyBpbnN0YW5jZW9mIFRleHR1cmUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHRleHR1cmVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRUZXh0dXJlKG5hbWUsIHRleERhdGEpIFxuICAgIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRhdGEgPSB0ZXhEYXRhO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0dXJlKG5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IGRpbVswXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IGRpbVsxXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleFN1YkltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciB0ZXh0dXJlIGNvbXByZXNzaW9uXG4gICAgLy8gZnVuY3Rpb24gY29tcHJlc3NUZXh0dXJlKHRleERhdGEpIHtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZXh0ID0gKFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpXG4gICAgLy8gICAgICk7XG4gICAgLy9cbiAgICAvLyAgICAgY3R4LmNvbXByZXNzZWRUZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBleHQuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQsIHRleHR1cmVbbmFtZV0uZGltWzBdLCB0ZXh0dXJlW25hbWVdLmRpbVsxXSwgMCwgdGV4RGF0YSk7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vIH1cblxuICAgIHRleHR1cmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKSB7XG4gICAgICAgIHZhciB0ZXhJbmRleCA9ICh0ZXh0dXJlLmhhc093blByb3BlcnR5KG5hbWUpKSA/IHRleHR1cmVbbmFtZV0uaW5kZXggOiB0ZXh0dXJlSUQrKztcbiAgICAgICAgdGV4dHVyZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbmRleDogdGV4SW5kZXgsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIGRpbTogZGltIHx8IFs1MTIsIDUxMl0sXG4gICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsIHx8IFwiYWxwaGFcIixcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNhbXBsZXI6IHNhbXBsZXIgfHwgbnVsbCxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZVRleHR1cmUoKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpXG4gICAgICAgIHNldFRleHR1cmUobmFtZSwgZGF0YSk7XG5cbiAgICAgICAgaWYgKHRleHR1cmVbbmFtZV0uc2FtcGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyID0gVW5pZm9ybShjdHgpLmNyZWF0ZShuYW1lLCAnc2FtcGxlcjJEJywgdGV4dHVyZVtuYW1lXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBjdHgudW5pZm9ybTFpKHRoaXMubG9jYXRpb24sIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5zYW1wbGVyLmRhdGEpID09ICd1bmRlZmluZWQnIHx8IHRoaXMuc2FtcGxlci5kYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIubGluayhwcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24odGV4RGF0YSkge1xuICAgICAgICAgICAgc2V0VGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmNvcHlGcm9tRkJPID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIGN0eC5jb3B5VGV4SW1hZ2UyRChcbiAgICAgICAgICAgICAgICBjdHguVEVYVFVSRV8yRCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIGN0eC5SR0JBLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVswXSxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVsxXSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0udXBkYXRlID0gZnVuY3Rpb24odGV4RGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgICAgIHVwZGF0ZVRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGV4dHVyZVtuYW1lXS5yZXNpemUgPSBmdW5jdGlvbihkaW0sIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGltID0gZGltO1xuICAgICAgICAgICAgc2V0VGV4dHVyZSh0aGlzLm5hbWUsIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdsQ29udGV4dC5kZWxldGVUZXh0dXJlKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lID09IHRoaXMuc2FtcGxlci5uYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiAndW5pZm9ybSBzYW1wbGVyMkQgJyArIHRoaXMuc2FtcGxlci5uYW1lICsgJztcXG4nO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXh0dXJlO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSAnLi91bmlmb3JtJztcbmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi9hdHRyaWJ1dGUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcbmltcG9ydCBWYXJ5aW5nIGZyb20gJy4vdmFyeWluZyc7XG5pbXBvcnQgU3Vicm91dGluZSBmcm9tICcuL3N1YnJvdXRpbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZXNvdXJjZShnbENvbnRleHQpIFxue1xuICAgIHZhciByZXNvdXJjZSA9ICh0aGlzIGluc3RhbmNlb2YgUmVzb3VyY2UpID8gdGhpcyA6IHt9LFxuICAgICAgICBncHVSZXNvdXJjZXMgPSB7fTtcblxuICAgIHJlc291cmNlLnVuaWZvcm0gPSBuZXcgVW5pZm9ybShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLmF0dHJpYnV0ZSA9IG5ldyBBdHRyaWJ1dGUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS50ZXh0dXJlID0gbmV3IFRleHR1cmUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS52YXJ5aW5nID0gbmV3IFZhcnlpbmcoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5zdWJyb3V0aW5lID0gbmV3IFN1YnJvdXRpbmUoKTtcblxuICAgIHZhciByZXNvdXJjZVR5cGVzID0gWyd1bmlmb3JtJywgJ2F0dHJpYnV0ZScsICd0ZXh0dXJlJywgJ3ZhcnlpbmcnLCAnc3Vicm91dGluZSddO1xuXG4gICAgcmVzb3VyY2UuYWxsb2NhdGUgPSBmdW5jdGlvbih0eXBlKSBcbiAgICB7XG4gICAgICAgIGlmIChyZXNvdXJjZVR5cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKSAgeyB0aHJvdyBFcnJvcihcIkVycm9yOiBJbnZhbGlkIHJlc291cmNlIHR5cGU6IFwiICsgdHlwZSk7IH1cbiAgICAgICAgXG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZVt0eXBlXS5jcmVhdGUuYXBwbHkobnVsbCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIHJlcy5yZXNvdXJjZVR5cGUgPSB0eXBlO1xuICAgICAgICBncHVSZXNvdXJjZXNbcmVzLm5hbWVdID0gcmVzO1xuICAgICAgICBpZiAoIWdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXMubmFtZSkpIFxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ3B1UmVzb3VyY2VzLCByZXMubmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBncHVSZXNvdXJjZXNbcmVzLm5hbWVdO30sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7IGdwdVJlc291cmNlc1tyZXMubmFtZV0ubG9hZChkYXRhKTt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG5cbiAgICByZXNvdXJjZS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSwgcmVzb3VyY2VzKSBcbiAgICB7XG4gICAgICAgIHZhciByZXF1aXJlZFJlc291cmNlcyA9IChBcnJheS5pc0FycmF5KHJlc291cmNlcykpID8gcmVzb3VyY2VzIDogT2JqZWN0LmtleXMoZ3B1UmVzb3VyY2VzKTtcbiAgICAgICAgcmVxdWlyZWRSZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzb3VyY2VOYW1lKSkge2dwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7fVxuICAgICAgICB9KVxuICAgIH07XG5cbiAgICByZXNvdXJjZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7cmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTt9XG4gICAgcmVzb3VyY2UuY3JlYXRlID0gcmVzb3VyY2UuYWxsb2NhdGU7XG4gICAgcmV0dXJuIHJlc291cmNlO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEF0dHJpYnV0ZShnbENvbnRleHQpIFxue1xuICAgIHZhciBhdHRyaWJ1dGUgPSAodGhpcyBpbnN0YW5jZW9mIEF0dHJpYnV0ZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgYXR0cmlidXRlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5hbWUsIGRhdGEpIFxuICAgIHtcbiAgICAgICAgaWYoIEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpIClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBhdHRyaWJ1dGVbbmFtZV0ucHRyKTtcbiAgICAgICAgICAgIGN0eC5idWZmZXJEYXRhKGN0eC5BUlJBWV9CVUZGRVIsIGRhdGEsIGN0eC5TVEFUSUNfRFJBVyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhdHRyaWJ1dGVbbmFtZV0ucHRyID09PSBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0cik7XG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0ciA9IGF0dHJpYnV0ZVtuYW1lXS5wdHI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBhdHRyaWJ1dGVJRCsrLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlQnVmZmVyKCksXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKSBcbiAgICAgICAgICAgIHtzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSk7fVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMubG9jYXRpb24sIHRoaXMuc2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgICAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIFxuICAgICAgICB7XG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCBhcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIFxuICAgICAgICAgICAge3JldHVybiAnYXR0cmlidXRlICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUgKyAnO1xcbic7fVxuICAgICAgICBcblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguZGVsZXRlQnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYXJ5aW5nKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHZhcnlpbmcgPSAodGhpcyBpbnN0YW5jZW9mIFZhcnlpbmcpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICB2YXJ5aW5nLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgdmFyeWluZ1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBzaXplOiBzaXplIHx8IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5saW5rID0gZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd2YXJ5aW5nICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICAgICAgICBpZih0aGlzLnNpemUgPiAxKVxuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyB0aGlzLnNpemUgKyAnXSc7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcnlpbmdbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcnlpbmc7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJyb3V0aW5lKCkge1xuXG4gICAgdmFyIHN1YnJvdXRpbmUgPSAodGhpcyBpbnN0YW5jZW9mIFN1YnJvdXRpbmUpID8gdGhpcyA6IHt9O1xuXG4gICAgc3Vicm91dGluZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICBzdWJyb3V0aW5lW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJzdWJyb3V0aW5lXCJcbiAgICAgICAgfTtcblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmZuID0gZm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbi50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YnJvdXRpbmVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBzdWJyb3V0aW5lO1xufVxuIiwiaW1wb3J0IFJlc291cmNlIGZyb20gJy4vcmVzb3VyY2UnO1xuaW1wb3J0IFByb2dyYW0gZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBGcmFtZWJ1ZmZlciBmcm9tICcuL2ZyYW1lYnVmZmVyJztcbi8vIGltcG9ydCBSZWFjdGl2ZSBmcm9tICcuL3JlYWN0aXZlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmxleEdMKGFyZykge1xuXG4gICAgdmFyIGZsZXhnbCA9ICh0aGlzIGluc3RhbmNlb2YgRmxleEdMKSA/IHRoaXMgOiB7fTtcblxuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmcgfHwge30sXG4gICAgICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyIHx8IG51bGwsXG4gICAgICAgIGNhbnZhcyA9IG9wdGlvbnMuY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIHdpZHRoID0gb3B0aW9ucy53aWR0aCB8fCBudWxsLFxuICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBudWxsLFxuICAgICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nIHx8IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuICAgICAgICBjdHggPSBvcHRpb25zLmNvbnRleHQgfHwgb3B0aW9ucy5jdHggfHwgbnVsbCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFyZWRGdW5jdGlvbiA9IG9wdGlvbnMuc2hhcmVkRnVuY3Rpb24gfHwge307XG5cblxuXG4gICAgaWYgKHR5cGVvZihjYW52YXMpID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKGNhbnZhc1swXSA9PSBcIiNcIikgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzLnN1YnN0cmluZygxKSk7XG4gICAgICAgIGVsc2UgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIgPSAodHlwZW9mKGNvbnRhaW5lcikgPT0gXCJzdHJpbmdcIikgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpIDogY29udGFpbmVyO1xuICAgICAgICBpZiAod2lkdGggPT09IG51bGwpIHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICBpZiAoaGVpZ2h0ID09PSBudWxsKSBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgICAvLyB3aWR0aCAtPSBwYWRkaW5nLmxlZnQgKyBwYWRkaW5nLnJpZ2h0O1xuICAgIC8vIGhlaWdodCAtPSBwYWRkaW5nLnRvcCArIHBhZGRpbmcuYm90dG9tO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gcGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBwYWRkaW5nLnRvcCArIFwicHhcIjtcblxuXG4gICAgaWYgKGN0eCA9PT0gbnVsbClcbiAgICAgICAgY3R4ID0gc2V0dXBXZWJHTChjYW52YXMpO1xuICAgIGZsZXhnbC5jdHggPSBjdHg7XG4gICAgZmxleGdsLmNhbnZhcyA9IGNhbnZhcztcbiAgICBmbGV4Z2wucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgIGN0eC5fZGljdCA9IG9wdGlvbnMuZW52IHx8IG9wdGlvbnMuZGljdCB8fCBvcHRpb25zLmRpY3Rpb25hcnkgfHwge307XG5cbiAgICB2YXIgcmVzb3VyY2VzID0gbmV3IFJlc291cmNlKGN0eCksXG4gICAgICAgIGZyYW1lYnVmZmVycyA9IG5ldyBGcmFtZWJ1ZmZlcihjdHgpLFxuICAgICAgICBwcm9ncmFtID0gbmV3IFByb2dyYW0oY3R4LCByZXNvdXJjZXMpLFxuICAgICAgICByZWFsUHJvZ3JhbSA9IG51bGw7XG5cblxuICAgIHZhciBibGVuZEV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJFWFRfYmxlbmRfbWlubWF4XCIpO1xuICAgIGlmIChibGVuZEV4dCkge1xuICAgICAgICBjdHguTUFYX0VYVCA9IGJsZW5kRXh0Lk1BWF9FWFQ7XG4gICAgICAgIGN0eC5NSU5fRVhUID0gYmxlbmRFeHQuTUlOX0VYVDtcbiAgICB9XG4gICAgY3R4LmV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO1xuICAgIGVuYWJsZUV4dGVuc2lvbihbXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRcIixcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIlxuICAgIF0pO1xuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5cbiAgICBmdW5jdGlvbiBzZXR1cFdlYkdMKGNhbnZhcykge1xuICAgICAgICB2YXIgbmFtZXMgPSBbXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtcbiAgICAgICAgdmFyIGdsID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2ldKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICBpZiAoZ2wpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmFibGVFeHRlbnNpb24oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXh0ZW5zaW9ucykpIGV4dGVuc2lvbnMgPSBbZXh0ZW5zaW9uc107XG4gICAgICAgIGV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBleHRQcm9wcyA9IGN0eC5nZXRFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICAgICAgICAgIGlmIChleHRQcm9wcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0Lmhhc093blByb3BlcnR5KGVwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmV4dFtlcF0gPSBleHRQcm9wc1tlcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC5hdHRyaWJ1dGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuYXR0cmlidXRlLCBuYW1lLCB7IC8vYWZ0ZXIgYWxsb2NhdGluZywgZmxleGdsIGdldHMgbmV3IGtleSBhdHRyaWJ1dGUsIGhlbHBpbmcgZWFzaWx5IGNoYW5nZSBhdHRyaWJ1dGUgZGF0YS5cbiAgICAgICAgICAgICAgICBnZXQoKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQoZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG4gICAgLy8gZmxleGdsLmJ1ZmZlciA9IGZsZXhnbC5hdHRyaWJ1dGU7IC8vYWxpYXNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB1bmlmb3JtIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnVuaWZvcm0gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInVuaWZvcm1cIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLnVuaWZvcm0uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudW5pZm9ybSwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudW5pZm9ybVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmlzUHJvZ3JhbShyZWFsUHJvZ3JhbSkpICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5saW5rKHJlYWxQcm9ncmFtKTsgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgZmxleGdsLnVuaWZvcm0uc2VyaWFsaXplID0gZnVuY3Rpb24oYW9hKSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhb2EuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB0ZXh0dXJlIHR5cGU6IHVuc2lnbmVkX2J5dGUgb3IgZmxvYXQsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjaGFubmVsPSdhbHBoYSddIFdlYkdMIGZvcm1hdHMgKHJnYmEsIGFscGhhKVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3NhbXBsZXI9bnVsbF0gRkxleEdMIFVuaWZvcm0gT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudGV4dHVyZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEsIGRpbSwgY2hhbm5lbCwgc2FtcGxlcikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ0ZXh0dXJlXCIsIG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudGV4dHVyZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnRleHR1cmVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnRleHR1cmUudXBkYXRlID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0udXBkYXRlKGRhdGEsIG9mZnNldCwgZGltKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt0eXBlXSBWYXJ5aW5nIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzaXplPTFdIGRhdGEgYXJyYXlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC52YXJ5aW5nID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ2YXJ5aW5nXCIsIG5hbWUsIHR5cGUsIHNpemUpO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmU9bnVsbF0gRkxleEdMIFRleHR1cmUgT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlIHx8IHJlc291cmNlcy5hbGxvY2F0ZSgndGV4dHVyZScsIG5hbWUsIHR5cGUsIGRpbSwgJ3JnYmEnLCBudWxsKTtcbiAgICAgICAgZnJhbWVidWZmZXJzLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpO1xuXG4gICAgICAgIGlmICghZmxleGdsLmZyYW1lYnVmZmVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmZyYW1lYnVmZmVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBmcmFtZWJ1ZmZlcnNbbmFtZV0uZW5hYmxlUmVhZChyZWFsUHJvZ3JhbSk7XG4gICAgfVxuXG4gICAgZmxleGdsLmJpbmRGcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKGZiTmFtZSkge1xuICAgICAgICBpZiAoZmJOYW1lID09PSBudWxsKVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJzW2ZiTmFtZV0ucHRyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuc3Vicm91dGluZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInN1YnJvdXRpbmVcIiwgbmFtZSwgdHlwZSwgZm4pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5wYXJhbWV0ZXIgPSBmdW5jdGlvbihrZXlWYWx1ZVBhaXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGtleVZhbHVlUGFpcnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IGtleVZhbHVlUGFpcnNba2V5XTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN0eC5fZGljdFtrZXldKSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4Ll9kaWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZVBhaXJzW2tleV1baSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguX2RpY3Rba2V5XSA9IG5ld0FycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGN0eC5fZGljdFtrZXldKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBkaWN0S2V5cyA9IE9iamVjdC5rZXlzKGN0eC5fZGljdFtrZXldKTtcbiAgICAgICAgICAgICAgICBmeGdsLnVuaWZvcm0oJ2RpY3QnK2tleSwgJ2Zsb2F0JywgZGljdEtleXMubWFwKGQ9PmN0eC5fZGljdFtrZXldW2RdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmRpY3Rpb25hcnkgPSBmbGV4Z2wucGFyYW1ldGVyO1xuICAgIGZsZXhnbC5zaGFkZXIgPSBwcm9ncmFtLnNoYWRlcjtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbCwgdHlwZSwgc291cmNlKSB7XG4gICAgICAgIHZhciBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XG4gICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgIH1cblxuXG4gICAgZmxleGdsLmFwcCA9IGZ1bmN0aW9uKG5hbWUsIHByb3BzKSB7XG4gICAgICAgIC8vIHZhciB2cyA9IHByb2dyYW0udmVydGV4KHByb3BzLnZzKSxcbiAgICAgICAgLy8gICAgIGZzID0gcHJvZ3JhbS5mcmFnbWVudChwcm9wcy5mcyksXG4gICAgICAgIC8vICAgICBmYiA9IHByb3BzLmZyYW1lYnVmZmVyIHx8IG51bGw7XG5cbiAgICAgICAgdmFyIHZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LlZFUlRFWF9TSEFERVIsIHByb3BzLnZzb3VyY2UpLFxuICAgICAgICAgICAgZnMgPSBjcmVhdGVTaGFkZXIoY3R4LCBjdHguRlJBR01FTlRfU0hBREVSLCBwcm9wcy5mc291cmNlKSxcbiAgICAgICAgICAgIGZiID0gcHJvcHMuZnJhbWVidWZmZXIgfHwgbnVsbDtcblxuICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHZzLCBmcyk7XG5cbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gdGhpcy51bmlmb3JtWyd1X2NvbG9yJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIHRoaXMudGV4dHVyZVsndV90ZXh0dXJlJ10ubGluayhyZWFsUHJvZ3JhbSk7XG5cbiAgICAgICAgdmFyIGRyYXcgPSBwcm9wcy5yZW5kZXIgfHwgcHJvcHMuZHJhdztcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgLy8gdmFyIGdsID0gZmxleGdsLnByb2dyYW0obmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gZHJhdy5jYWxsKGN0eCwgYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmbGV4Z2wuZGltZW5zaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmxleGdsO1xufVxuIiwiaW1wb3J0IEZsZXhHTCBmcm9tICcuL2ZsZXhnbCc7XG5cbihmdW5jdGlvbiBtYWtlR2xvYmFsKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuRmxleEdMID0gRmxleEdMO1xuICB9XG59KSgpO1xuIiwiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVidWZmZXIoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSAodGhpcyBpbnN0YW5jZW9mIEZyYW1lYnVmZmVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnJhbWVidWZmZXIuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0gPSB7XG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgd2lkdGg6IGRpbVswXSB8fCAxMDI0LFxuICAgICAgICAgICAgaGVpZ2h0OiBkaW1bMV0gfHwgMTAyNCxcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlcjogY3R4LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSAodHlwZSA9PSAnZmxvYXQnKSA/XG4gICAgICAgICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KSA6XG4gICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGltWzBdICogZGltWzFdICogNCk7XG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID0gVGV4dHVyZShjdHgpLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIFwicmdiYVwiLCBidWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbmRlcmJ1ZmZlciA9IGZyYW1lYnVmZmVyW25hbWVdLnJlbmRlcmJ1ZmZlcjtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgIGN0eC5yZW5kZXJidWZmZXJTdG9yYWdlKFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLndpZHRoLFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZS5wdHIsXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlclxuICAgICAgICApO1xuICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUucHRyKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZS5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy50ZXh0dXJlLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh0aGlzLnRleHR1cmUubG9jYXRpb24sIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMucmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZS5wdHIpXG4gICAgICAgICAgICBjdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcltuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJhbWVidWZmZXI7XG59XG4iLCJpbXBvcnQgU2hhZGVyIGZyb20gJy4vc2hhZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUHJvZ3JhbShnbENvbnRleHQsIHJlc291cmNlcykge1xuXG4gICAgdmFyIHByb2dyYW0gPSB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYWRlcnMgPSBuZXcgU2hhZGVyKGdsQ29udGV4dCwgcmVzb3VyY2VzKTtcblxuICAgIHByb2dyYW0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIHZhciBuYW1lID0gbmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHZzID0gdnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBmcyA9IGZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZGVwcyA9IFtdO1xuXG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0gPSBjdHguY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0udnMgPSAodHlwZW9mIHZzID09IFwib2JqZWN0XCIpID8gdnMgOiBzaGFkZXJzLnZlcnRleFt2c107XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZnMgPSAodHlwZW9mIGZzID09IFwib2JqZWN0XCIpID8gZnMgOiBzaGFkZXJzLmZyYWdtZW50W2ZzXTtcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLnZzLmRlcHMpO1xuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS5mcy5kZXBzKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5kZXBzID0gZGVwcztcblxuICAgIH1cblxuICAgIHByb2dyYW0udXNlID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBjdHgudXNlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHJlc291cmNlcy5saW5rKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZGVwcyk7XG4gICAgICAgICAgICByZXR1cm4ga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgICAgICBjdHgudXNlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHJlc291cmNlcy5saW5rKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZGVwcyk7XG4gICAgICAgICAgICByZXR1cm4ga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyYW0uZGVsZXRlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLnZzKTtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5mcyk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIGRlbGV0ZSBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5zaGFkZXIgPSBmdW5jdGlvbihhcmcsIGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXJnO1xuICAgICAgICBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgIH1cblxuICAgIHByb2dyYW0udmVydGV4ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcInZlcnRleFwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIH1cblxuICAgIHByb2dyYW0uZnJhZ21lbnQgPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnJhZ21lbnRcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm4ubmFtZSkgb3B0aW9ucy5uYW1lID0gZm4ubmFtZTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoYWRlcihnbENvbnRleHQsIGdsUmVzb3VyY2UpIHtcbiAgICBcbiAgICB2YXIgc2hhZGVyID0gKHRoaXMgaW5zdGFuY2VvZiBTaGFkZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHJlc291cmNlID0gZ2xSZXNvdXJjZSxcbiAgICAgICAgcGFyYW1ldGVycyA9IGN0eC5fZGljdCB8fCB7fTtcblxuICAgIHNoYWRlci52ZXJ0ZXggPSB7fTtcbiAgICBzaGFkZXIuZnJhZ21lbnQgPSB7fTtcblxuICAgIHZhciBzaGFkZXJUeXBlID0ge1xuICAgICAgICB2ZXJ0ZXg6IGN0eC5WRVJURVhfU0hBREVSLFxuICAgICAgICBmcmFnbWVudDogY3R4LkZSQUdNRU5UX1NIQURFUlxuICAgIH07XG5cbiAgICAvLyBDb252ZXJ0IEpTIGZ1bmN0aW9ucyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gdG9HTFNMKHJldHVyblR5cGUsIG5hbWUsIGZuKXtcblxuICAgICAgICB2YXIgZ2xzbCA9IHJldHVyblR5cGUgKyAnICcgK1xuICAgICAgICAgICAgbmFtZSArICcoJyArIGFwcGx5RW52UGFyYW1ldGVycyhmbi50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL3ZhclxccysoW1xcd3xcXGRdKylcXHMqPVxccypuZXdcXHMrKFtcXHd8XFxkXSspXFwoKC4qKVxcKS9nLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV4cHIsIG5hbWUsIGR0eXBlLCB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IFtkdHlwZS50b0xvd2VyQ2FzZSgpLCBuYW1lLCAnPScsIHZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZV07XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9mb3JcXHMqXFwoXFxzKnZhclxccysvZywgJ2ZvcihpbnQgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC92YXJcXHMvZywgJ2Zsb2F0ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdGhpcy4vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwkKC4qKVxcKCguKilcXClcXHMqKD18OykvZywgXCIkMSAkMiAkM1wiKTtcbiAgICAgICAgICAgIC8vIC5yZXBsYWNlKC9cXCQoLio/KVxcLi9nLCBcIiQxIFwiKVxuXG4gICAgICAgIGlmKG5hbWUgPT0gXCJtYWluXCIpIHtcbiAgICAgICAgICAgIGdsc2wgPSBnbHNsLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKnsvLCAnKXsnKSArIFwiXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGdsc2wubWF0Y2goL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8pWzFdO1xuXG4gICAgICAgICAgICBpZihhcmdzICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJncy5yZXBsYWNlKC9cXCQoW1xcd3xcXGRdKylfL2csIFwiJDEgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2xzbCA9IGdsc2xcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqXFwpLywgYXJncysnKScpICsgXCJcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xzbDtcbiAgICB9XG5cbiAgICAvL3NldCBwYXJhbWV0ZXJzIGluIEpTIGZ1bmN0aW9ucyBiZWZvcmUgY29udmVydGluZyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gYXBwbHlFbnZQYXJhbWV0ZXJzKHN0cil7XG4gICAgICAgIC8vZmluZCBhbGwgJCguLi4pIGFuZCByZXBsYWNlIHRoZW0gd2l0aCBwYXJhbWV0ZXJzXG4gICAgICAgIHZhciBlbnZQYXJhbSA9IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpO1xuICAgICAgICBpZihlbnZQYXJhbS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlBhcmFtLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKG1hdGNoZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgdW5pZm9ybXMgdG8gYmUgdXNlZCBhcyBwYXJhbWV0ZXJzIGluIHNoYWRlcnMsIGxpa2UgJCh1bmlmb3JtTmFtZSlcbiAgICAgICAgLy8gdmFyIGVudlVuaWZvcm1zID0gT2JqZWN0LmtleXMocmVzb3VyY2UudW5pZm9ybSk7XG4gICAgICAgIC8vIHJlID0gbmV3IFJlZ0V4cChcIlxcXFwkXFxcXCgoXCIrZW52VW5pZm9ybXMuam9pbihcInxcIikrXCIpXFxcXClcIixcImdcIik7XG4gICAgICAgIC8vIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgLy8gICAgIHJldHVybiByZXNvdXJjZS51bmlmb3JtW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV0uZGF0YTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21waWxlKHNoYWRlclR5cGUsIHNoYWRlclNvdXJjZSkge1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gY3R4LlZFUlRFWF9TSEFERVIgJiYgc2hhZGVyVHlwZSAhPT0gY3R4LkZSQUdNRU5UX1NIQURFUikge1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3I6IHVua25vd24gc2hhZGVyIHR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjdHguY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xuICAgICAgICBjdHguc2hhZGVyU291cmNlKF9zaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIGN0eC5jb21waWxlU2hhZGVyKF9zaGFkZXIpO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBjb21waWxlIHN0YXR1cywgZ2V0IGNvbXBpbGUgZXJyb3IgaWYgYW55XG4gICAgICAgIHZhciBjb21waWxlZCA9IGN0eC5nZXRTaGFkZXJQYXJhbWV0ZXIoX3NoYWRlciwgY3R4LkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFjb21waWxlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRTaGFkZXJJbmZvTG9nKF9zaGFkZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2hhZGVyU291cmNlICsgJ1xcbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb21waWxpbmcgc2hhZGVyICdcIiArIF9zaGFkZXIgKyBcIic6XCIgKyBsYXN0RXJyb3IpO1xuXG4gICAgICAgICAgICBjdHguZGVsZXRlU2hhZGVyKF9zaGFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3NoYWRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREZXBzKGZuKSB7XG4gICAgICAgIHZhciBkZXBzID0gW10sXG4gICAgICAgICAgICBzb3VyY2VDb2RlID0gZm4udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNoYWRlckFyZ3MgPSBzb3VyY2VDb2RlLm1hdGNoKC9mdW5jdGlvblxccy4qP1xcKChbXildKilcXCkvKSxcbiAgICAgICAgICAgIGFyZ3MgPSAoc2hhZGVyQXJncyAhPT0gbnVsbCAmJiBzaGFkZXJBcmdzLmxlbmd0aCkgPyBzaGFkZXJBcmdzWzFdIDogW107XG4gICAgICAgIC8vIGFyZ3MgPSBhcmdzLnJlcGxhY2UoLyg/OlxcclxcbnxcXHJ8XFxufFxccykvZywgJycpO1xuICAgICAgICAvL1xuICAgICAgICBpZihhcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGFyZ3Muc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5yZXBsYWNlKC9cXC9cXCouKlxcKlxcLy8sICcnKS50cmltKCk7XG4gICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IGdldEV4dHJhRGVwcyhzb3VyY2VDb2RlKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGV4dHJhRGVwc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlcHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RXh0cmFEZXBzKGZuU3RyaW5nKSB7XG4gICAgICAgIHZhciBleHRyYURlcHMgPSBmblN0cmluZy5tYXRjaCgvdGhpc1xcLihcXHcrKS9nKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMubWFwKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkLnNsaWNlKDUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhRGVwcyB8fCBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNsYXJlRGVwKGRlcCkge1xuICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2UuZ2V0KGRlcCk7XG4gICAgICAgIGlmKHR5cGVvZiByZXMgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZS9kZXBlbmRlbmNlIFwiJyArIGRlcCArICdcIiBpcyBub3QgZm91bmQuJyk7XG4gICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgcmV0dXJuIHRvR0xTTChyZXMudHlwZSwgcmVzLm5hbWUsIHJlcy5mbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXMuaGVhZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlRGVwcyhkZXBzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IHt9O1xuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZCwgaSl7XG4gICAgICAgICAgICBuYW1lc1tkXSA9IGk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhuYW1lcyk7XG4gICAgfVxuXG4gICAgc2hhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKGFyZywgZm4pe1xuICAgICAgICB2YXIgb3B0aW9uID0gYXJnIHx8IHt9LFxuICAgICAgICAgICAgbmFtZSA9IG9wdGlvbi5uYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdHlwZSA9IG9wdGlvbi50eXBlIHx8IFwidmVydGV4XCIsXG4gICAgICAgICAgICBkZXBzID0gb3B0aW9uLnJlcXVpcmUgfHwgb3B0aW9uLmRlcHMgfHwgW10sXG4gICAgICAgICAgICBwcmVjaXNpb24gPSBvcHRpb24ucHJlY2lzaW9uIHx8IFwiaGlnaFwiLFxuICAgICAgICAgICAgZGVidWcgPSBvcHRpb24uZGVidWcgfHwgZmFsc2UsXG4gICAgICAgICAgICBtYWluID0gb3B0aW9uLm1haW4gfHwgZm4gfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXIgc2hhZGVyU291cmNlID0gJ3ByZWNpc2lvbiAnICsgcHJlY2lzaW9uICsgJ3AgZmxvYXQ7XFxuJztcblxuICAgICAgICBpZihkZXBzLmxlbmd0aCA9PT0gMCkgZGVwcyA9IHVuaXF1ZURlcHMoZ2V0RGVwcyhtYWluKSk7XG5cbiAgICAgICAgLy9nZXQgZGVwZW5kZW5jZSBmcm9tIHN1YnJvdXRpbmVzIGlmIGFueVxuICAgICAgICB2YXIgZXh0cmFEZXBzID0gW10sXG4gICAgICAgICAgICBzdWJSb3V0aW5lcyA9IFtdO1xuXG4gICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICAgICAgaWYodHlwZW9mIHJlcyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlcCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IgKCdFcnJvciEgVW5kZWZpbmVkIHZhcmlhYmxlIGluIHNoYWRlcjogJysgIGRlcC5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKSB7XG4gICAgICAgICAgICAgICAgc3ViUm91dGluZXMucHVzaChyZXMubmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YkRlcHMgPSBnZXRFeHRyYURlcHMocmVzLmZuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGlmKHN1YkRlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETzogbWFrZSB0aGlzIHJlY3Vyc2l2ZSB0byBjaGVjayBhbGwgc3Vicm91dGluZSBkZXBzXG4gICAgICAgICAgICAgICAgICAgIHN1YkRlcHMuZm9yRWFjaChmdW5jdGlvbihzZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmVzID0gcmVzb3VyY2UuZ2V0KHNkZXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoZ2V0RXh0cmFEZXBzKHNyZXMuZm4udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoc3ViRGVwcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBhbGxEZXBzID0gZXh0cmFEZXBzXG4gICAgICAgICAgICAvLyAuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgLy8gICAgIHJldHVybiBkZXBzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC5jb25jYXQoZGVwcy5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YlJvdXRpbmVzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuY29uY2F0KHN1YlJvdXRpbmVzKTtcblxuICAgICAgICAgICAgZGVwcyA9IHVuaXF1ZURlcHMoYWxsRGVwcyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGVwcykpe1xuICAgICAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGRlcHMpID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkZXBzKS5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlVHlwZSl7XG4gICAgICAgICAgICAgICAgZGVwc1tyZXNvdXJjZVR5cGVdLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzaGFkZXJTb3VyY2UgKz0gdG9HTFNMKCd2b2lkJywgJ21haW4nLCBtYWluKTtcblxuICAgICAgICBpZihkZWJ1ZylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSk7XG5cbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjb21waWxlKHNoYWRlclR5cGVbdHlwZV0sIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIF9zaGFkZXIuX3NoYWRlclR5cGUgPSBzaGFkZXJUeXBlW3R5cGVdO1xuICAgICAgICBfc2hhZGVyLmRlcHMgPSBkZXBzO1xuICAgICAgICBfc2hhZGVyLnNvdXJjZSA9IHNoYWRlclNvdXJjZTtcbiAgICAgICAgc2hhZGVyW3R5cGVdW25hbWVdID0gX3NoYWRlcjtcbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=