!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=u(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function o(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],o=t[e].dim[0],u=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,o,u,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,u,f,c,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:u||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},o(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return o(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var o=r[t[e].type.toUpperCase()],u=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,u,o,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,o(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var o=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e,n){if(-1===o.indexOf(e))throw Error("Error: Invalid resource type: "+e);var i=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return i.resourceType=e,r[i.name]=i,r.hasOwnProperty(i.name)||Object.defineProperty(r,i.name,{get:function(){return r[i.name]},set:function(e){r[i.name].load(e)}}),i},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function o(e,t){var r=this instanceof o?this:{},n=e,i=t,a=n._dict||{};r.vertex={},r.fragment={};var u={vertex:n.VERTEX_SHADER,fragment:n.FRAGMENT_SHADER};function f(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(a);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return a[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function c(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=i.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?f(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return r.create=function(e,t){var a=e||{},o=a.name||"default",d=a.type||"vertex",h=a.require||a.deps||[],p=a.precision||"high",m=a.debug||!1,E=a.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=E.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=c(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}()));var b=[],g=[];if(h.forEach(function(e){var t=i.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=c(t.fn.toString());r.length&&(r.forEach(function(e){var t=i.get(e);"subroutine"==t.resourceType&&(b=b.concat(c(t.fn.toString())))}),b=b.concat(r))}}),b.length){var v=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(v)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=f("void","main",E),m&&console.log(y);var T=function(e,t){if(e!==n.VERTEX_SHADER&&e!==n.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+i)}return r}(u[d],y);return T._shaderType=u[d],T.deps=h,T.source=y,r[d][o]=T,T},r}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},u=n.container||null,f=n.canvas||document.createElement("canvas"),c=n.width||null,s=n.height||null,l=n.padding||{left:0,right:0,top:0,bottom:0},d=n.context||n.ctx||null,h=null;n.sharedFunction,"string"==typeof f&&(f="#"==f[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),u&&(u="string"==typeof u?document.getElementById(u):u,null===c&&(c=u.clientWidth),null===s&&(s=u.clientHeight)),f.width=c,f.height=s,f.style.position="absolute",f.style.marginLeft=l.left+"px",f.style.marginTop=l.top+"px",null===d&&(d=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(f)),r.ctx=d,r.canvas=f,d._dict=n.env||n.dict||n.dictionary||{};var p=new a(d),m=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,a,o){if(r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:a[0]||1024,height:a[1]||1024,texture:o||null,renderbuffer:n.createRenderbuffer()},null===r[e].texture){var u="float"==t?new Float32Array(a[0]*a[1]*4):new Uint8Array(a[0]*a[1]*4);r[e].texture=i(n).create(e,t,a,"rgba",u)}var f=r[e].renderbuffer;return n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.bindRenderbuffer(n.RENDERBUFFER,f),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[e].width,r[e].height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,f),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(d),E=new function(e,t){var r,n=d,i={},a={},u=new o(d,t);return i.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var o=[];if(a.hasOwnProperty(e)&&i.delete(e),a[e]=n.createProgram(),a[e].vs="object"==typeof t?t:u.vertex[t],a[e].fs="object"==typeof r?r:u.fragment[r],n.attachShader(a[e],a[e].vs),n.attachShader(a[e],a[e].fs),n.linkProgram(a[e]),!n.getProgramParameter(a[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(a[e]);return o=(o=o.concat(a[e].vs.deps)).concat(a[e].fs.deps),a[e].deps=o,a[e]},i.use=i.program=function(e,o,u){return a.hasOwnProperty(e)?(r=a[e],n.useProgram(r),t.link(r,r.deps),r):i.create(e,o,u)},i.delete=function(e){a.hasOwnProperty(e)&&(n.detachShader(a[e],a[e].vs),n.detachShader(a[e],a[e].fs),n.deleteProgram(a[e]),delete a[e])},i.shader=function(e,t){var r=e;return u.create(r,t),i},i.shader.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),u.create(t,e)},i.shader.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),u.create(t,e)},i}(d,p),y=(new o(d,p),d.getExtension("EXT_blend_minmax"));function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=d.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(d.ext[e]=t[e])})})}return y&&(d.MAX_EXT=y.MAX_EXT,d.MIN_EXT=y.MIN_EXT),d.ext=d.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),u&&u.appendChild(f),r.enableExtension=b,r.attribute=function(e,t,n){return p.allocate("attribute",e,t,n),Object.defineProperty(r.attribute,e,{get:function(){return p.attribute[e]},set:function(t){p.attribute[e].load(t)}}),r},r.buffer=r.attribute,r.uniform=function(e,t,n){return p.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return p.uniform[e]},set:function(t){p.uniform[e].load(t),d.isProgram(h)&&p.uniform[e].link(h)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,o){return p.allocate("texture",e,t,i,a,n,o),Object.defineProperty(r.texture,e,{get:function(){return p.texture[e]},set:function(t){p.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){p.texture[e].update(t,r,n)},r.varying=function(e,t,n){return p.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||p.allocate("texture",e,t,n,"rgba",null),m.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return m[e]}}),r},r.framebuffer.enableRead=function(e){m[e].enableRead(h)},r.bindFramebuffer=function(e){null===e?d.bindFramebuffer(d.FRAMEBUFFER,null):d.bindFramebuffer(d.FRAMEBUFFER,m[e].ptr)},r.subroutine=function(e,t,n){return p.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(d._dict[t]=e[t],Array.isArray(d._dict[t])){var r=0;Object.defineProperty(d._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,d._dict[t]=e}})}else if("object"==typeof d._dict[t]){var n=Object.keys(d._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>d._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=E.shader,r.program=function(e,t,r){return h=E.program(e,t,r),d},r.createProgram=function(e,t,r){return h=E.create(e,t,r),d},r.app=function(e,t){var n=r.shader.vertex(t.vs),i=r.shader.fragment(t.fs);t.framebuffer,r.program(e,n,i);var a=t.render||t.draw;return function(t){var n=r.program(e);return a.call(n,t)}},r.dimension=function(){return[f.width,f.height]},r.resources=p,r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxleGdsLmpzIiwid2VicGFjazovLy8uL3NyYy9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1lYnVmZmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9ncmFtLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlRleHR1cmUiLCJ0ZXh0dXJlIiwidGV4dHVyZUlEIiwic2V0VGV4dHVyZSIsInRleERhdGEiLCJ0b1VwcGVyQ2FzZSIsImZvcm1hdCIsImNoYW5uZWwiLCJ3aWR0aCIsImRpbSIsImhlaWdodCIsInRleEltYWdlMkQiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsIlRFWFRVUkVfV1JBUF9TIiwiQ0xBTVBfVE9fRURHRSIsIlRFWFRVUkVfV1JBUF9UIiwic2FtcGxlciIsInRleEluZGV4IiwiY3JlYXRlVGV4dHVyZSIsImNvcHlGcm9tRkJPIiwiY29weVRleEltYWdlMkQiLCJSR0JBIiwidXBkYXRlIiwib2Zmc2V0IiwidGV4U3ViSW1hZ2UyRCIsInJlc2l6ZSIsImRlbGV0ZSIsImRlbGV0ZVRleHR1cmUiLCJSZXNvdXJjZSIsInJlc291cmNlIiwiZ3B1UmVzb3VyY2VzIiwiYXR0cmlidXRlIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJzZXRBdHRyaWJ1dGUiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlQnVmZmVyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImFycmF5QnVmZmVyIiwiZGVsZXRlQnVmZmVyIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJwcm9wcyIsImluZGV4T2YiLCJFcnJvciIsInJlcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic2V0IiwicmVzb3VyY2VzIiwia2V5cyIsInJlc291cmNlTmFtZSIsIlNoYWRlciIsImdsUmVzb3VyY2UiLCJzaGFkZXIiLCJwYXJhbWV0ZXJzIiwiX2RpY3QiLCJ2ZXJ0ZXgiLCJmcmFnbWVudCIsInNoYWRlclR5cGUiLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwidG9HTFNMIiwicmV0dXJuVHlwZSIsImdsc2wiLCJzdHIiLCJlbnZQYXJhbSIsInJlIiwiUmVnRXhwIiwiam9pbiIsInJlcGxhY2UiLCJtYXRjaGVkIiwiZXhwciIsImR0eXBlIiwidG9Mb3dlckNhc2UiLCJhcmdzIiwibWF0Y2giLCJnZXRFeHRyYURlcHMiLCJmblN0cmluZyIsImV4dHJhRGVwcyIsIm1hcCIsImRlY2xhcmVEZXAiLCJkZXAiLCJ1bmlxdWVEZXBzIiwiZGVwcyIsIm5hbWVzIiwiYXJnIiwib3B0aW9uIiwicmVxdWlyZSIsInByZWNpc2lvbiIsImRlYnVnIiwibWFpbiIsInNoYWRlclNvdXJjZSIsInNvdXJjZUNvZGUiLCJzaGFkZXJBcmdzIiwic3BsaXQiLCJ0cmltIiwic3ViUm91dGluZXMiLCJjb25zb2xlIiwibG9nIiwicHVzaCIsInN1YkRlcHMiLCJzZGVwIiwic3JlcyIsImFsbERlcHMiLCJoIiwiX3NoYWRlciIsImNyZWF0ZVNoYWRlciIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImxhc3RFcnJvciIsImdldFNoYWRlckluZm9Mb2ciLCJfc2hhZGVyVHlwZSIsInNvdXJjZSIsImZsZXhnbCIsIndpbmRvdyIsIkZsZXhHTCIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwYWRkaW5nIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29udGV4dCIsInNoYXJlZEZ1bmN0aW9uIiwiZiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsImdsIiwiZ2V0Q29udGV4dCIsImVudiIsImRpY3QiLCJkaWN0aW9uYXJ5IiwiZnJhbWVidWZmZXJzIiwiRnJhbWVidWZmZXIiLCJmcmFtZWJ1ZmZlciIsImNyZWF0ZUZyYW1lYnVmZmVyIiwicmVuZGVyYnVmZmVyIiwiY3JlYXRlUmVuZGVyYnVmZmVyIiwiVWludDhBcnJheSIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiYmluZFJlbmRlcmJ1ZmZlciIsIlJFTkRFUkJVRkZFUiIsInJlbmRlcmJ1ZmZlclN0b3JhZ2UiLCJERVBUSF9DT01QT05FTlQxNiIsImZyYW1lYnVmZmVyVGV4dHVyZTJEIiwiQ09MT1JfQVRUQUNITUVOVDAiLCJmcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlciIsIkRFUFRIX0FUVEFDSE1FTlQiLCJlbmFibGVSZWFkIiwiZGVsZXRlUmVuZGVyYnVmZmVyIiwiZGVsZXRlRnJhbWVidWZmZXIiLCJwcm9ncmFtTWFuYWdlciIsInBtIiwia2VybmVscyIsInNoYWRlcnMiLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ1c2VQcm9ncmFtIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsImJsZW5kRXh0IiwiZ2V0RXh0ZW5zaW9uIiwiZW5hYmxlRXh0ZW5zaW9uIiwiZXh0ZW5zaW9ucyIsImV4dGVuc2lvbiIsImV4dFByb3BzIiwiZXAiLCJleHQiLCJNQVhfRVhUIiwiTUlOX0VYVCIsImFwcGVuZENoaWxkIiwiYnVmZmVyIiwiaXNQcm9ncmFtIiwic2VyaWFsaXplIiwiYW9hIiwiZmJOYW1lIiwicGFyYW1ldGVyIiwia2V5VmFsdWVQYWlycyIsIm5ld0FycmF5IiwiZGljdEtleXMiLCJmeGdsIiwiYXBwIiwiZHJhdyIsInJlbmRlciIsImRpbWVuc2lvbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxLQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEtBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLGNBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLFlBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULGNBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVB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MEYsVUFBQSxXQUNBLE9BQUFyRixFQUFBL0gsTUFBQStILEVBQUE3SCxTQUdBd0gsRUFBQWxFLFlBRUFrRSIsImZpbGUiOiJmbGV4Z2wubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVW5pZm9ybShnbENvbnRleHQsIG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgIHZhciB1bmlmb3JtID0gKHRoaXMgaW5zdGFuY2VvZiBVbmlmb3JtKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplQXJyYXkoYXJyYXlPZkFycmF5KSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhcnJheU9mQXJyYXkuZm9yRWFjaChmdW5jdGlvbihhKXtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VW5pZm9ybSgpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24sXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zaXplLFxuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCh0eXBlID09ICdmbG9hdCcgfHwgdHlwZSA9PSAnaW50JykgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSlcbiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07XG5cbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHR5cGUuc2xpY2UoMCwzKSA9PSAndmVjJyB8fCB0eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDQpID09ICdpdmVjJyB8fCB0eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnaXYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCwzKSA9PSAnbWF0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybU1hdHJpeCcgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGZhbHNlLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2VUeXBlJykgJiYgZGF0YS5yZXNvdXJjZVR5cGUgPT0gJ3RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBkYXRhLnB0cik7XG4gICAgICAgICAgICAgICAgY3R4LnVuaWZvcm0xaShsb2NhdGlvbiwgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmlmb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0gPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgcGFyc2VJbnQodHlwZS5zbGljZSg0LDUpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICBzZXRVbmlmb3JtLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndW5pZm9ybSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIGxlbiA9IDA7XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSAhPSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnNpemU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vVE9ETzogZml4IGRlY2xhcmF0aW9uIGZvciBtYXRyaXhcbiAgICAgICAgICAgIGlmKGxlbiA+IDEgJiYgdHlwZSAhPSAnbWF0NCcpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgbGVuICsgJ10nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdW5pZm9ybVtuYW1lXTtcbiAgICB9XG5cblxuICAgIHJldHVybiB1bmlmb3JtO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSBcIi4vdW5pZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0dXJlKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHRleHR1cmUgPSAodGhpcyBpbnN0YW5jZW9mIFRleHR1cmUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHRleHR1cmVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRUZXh0dXJlKG5hbWUsIHRleERhdGEpIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRhdGEgPSB0ZXhEYXRhO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0dXJlKG5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IGRpbVswXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IGRpbVsxXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleFN1YkltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciB0ZXh0dXJlIGNvbXByZXNzaW9uXG4gICAgLy8gZnVuY3Rpb24gY29tcHJlc3NUZXh0dXJlKHRleERhdGEpIHtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZXh0ID0gKFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpXG4gICAgLy8gICAgICk7XG4gICAgLy9cbiAgICAvLyAgICAgY3R4LmNvbXByZXNzZWRUZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBleHQuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQsIHRleHR1cmVbbmFtZV0uZGltWzBdLCB0ZXh0dXJlW25hbWVdLmRpbVsxXSwgMCwgdGV4RGF0YSk7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vIH1cblxuICAgIHRleHR1cmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKSB7XG4gICAgICAgIHZhciB0ZXhJbmRleCA9ICh0ZXh0dXJlLmhhc093blByb3BlcnR5KG5hbWUpKSA/IHRleHR1cmVbbmFtZV0uaW5kZXggOiB0ZXh0dXJlSUQrKztcbiAgICAgICAgdGV4dHVyZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbmRleDogdGV4SW5kZXgsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIGRpbTogZGltIHx8IFs1MTIsIDUxMl0sXG4gICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsIHx8IFwiYWxwaGFcIixcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNhbXBsZXI6IHNhbXBsZXIgfHwgbnVsbCxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZVRleHR1cmUoKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpXG4gICAgICAgIHNldFRleHR1cmUobmFtZSwgZGF0YSk7XG5cbiAgICAgICAgaWYgKHRleHR1cmVbbmFtZV0uc2FtcGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyID0gVW5pZm9ybShjdHgpLmNyZWF0ZShuYW1lLCAnc2FtcGxlcjJEJywgdGV4dHVyZVtuYW1lXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBjdHgudW5pZm9ybTFpKHRoaXMubG9jYXRpb24sIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5zYW1wbGVyLmRhdGEpID09ICd1bmRlZmluZWQnIHx8IHRoaXMuc2FtcGxlci5kYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIubGluayhwcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24odGV4RGF0YSkge1xuICAgICAgICAgICAgc2V0VGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmNvcHlGcm9tRkJPID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIGN0eC5jb3B5VGV4SW1hZ2UyRChcbiAgICAgICAgICAgICAgICBjdHguVEVYVFVSRV8yRCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIGN0eC5SR0JBLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVswXSxcbiAgICAgICAgICAgICAgICB0aGlzLmRpbVsxXSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0udXBkYXRlID0gZnVuY3Rpb24odGV4RGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgICAgIHVwZGF0ZVRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ucmVzaXplID0gZnVuY3Rpb24oZGltLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnbENvbnRleHQuZGVsZXRlVGV4dHVyZSh0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSB0aGlzLnNhbXBsZXIubmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaWZvcm0gc2FtcGxlcjJEICcgKyB0aGlzLnNhbXBsZXIubmFtZSArICc7XFxuJztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dHVyZVtuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gJy4vdW5pZm9ybSc7XG5pbXBvcnQgQXR0cmlidXRlIGZyb20gJy4vYXR0cmlidXRlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vdGV4dHVyZSc7XG5pbXBvcnQgVmFyeWluZyBmcm9tICcuL3ZhcnlpbmcnO1xuaW1wb3J0IFN1YnJvdXRpbmUgZnJvbSAnLi9zdWJyb3V0aW5lJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUmVzb3VyY2UoZ2xDb250ZXh0KSB7XG4gICAgdmFyIHJlc291cmNlID0gKHRoaXMgaW5zdGFuY2VvZiBSZXNvdXJjZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGdwdVJlc291cmNlcyA9IHt9O1xuXG4gICAgcmVzb3VyY2UudW5pZm9ybSA9IG5ldyBVbmlmb3JtKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UuYXR0cmlidXRlID0gbmV3IEF0dHJpYnV0ZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnRleHR1cmUgPSBuZXcgVGV4dHVyZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnZhcnlpbmcgPSBuZXcgVmFyeWluZyhnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnN1YnJvdXRpbmUgPSBuZXcgU3Vicm91dGluZSgpO1xuXG4gICAgdmFyIHJlc291cmNlVHlwZXMgPSBbJ3VuaWZvcm0nLCAnYXR0cmlidXRlJywgJ3RleHR1cmUnLCAndmFyeWluZycsICdzdWJyb3V0aW5lJ107XG5cbiAgICByZXNvdXJjZS5hbGxvY2F0ZSA9IGZ1bmN0aW9uKHR5cGUsIHByb3BzKSB7XG4gICAgICAgIGlmIChyZXNvdXJjZVR5cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkVycm9yOiBJbnZhbGlkIHJlc291cmNlIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlW3R5cGVdLmNyZWF0ZS5hcHBseShudWxsLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgcmVzLnJlc291cmNlVHlwZSA9IHR5cGU7XG4gICAgICAgIGdwdVJlc291cmNlc1tyZXMubmFtZV0gPSByZXM7XG4gICAgICAgIGlmICghZ3B1UmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlcy5uYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdwdVJlc291cmNlcywgcmVzLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBncHVSZXNvdXJjZXNbcmVzLm5hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UubGluayA9IGZ1bmN0aW9uKHByb2dyYW0sIHJlc291cmNlcykge1xuICAgICAgICB2YXIgcmVxdWlyZWRSZXNvdXJjZXMgPSAoQXJyYXkuaXNBcnJheShyZXNvdXJjZXMpKSA/IHJlc291cmNlcyA6IE9iamVjdC5rZXlzKGdwdVJlc291cmNlcyk7XG4gICAgICAgIHJlcXVpcmVkUmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24ocmVzb3VyY2VOYW1lKSB7XG4gICAgICAgICAgICBpZiAoZ3B1UmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlc291cmNlTmFtZSkpXG4gICAgICAgICAgICAgICAgZ3B1UmVzb3VyY2VzW3Jlc291cmNlTmFtZV0ubGluayhwcm9ncmFtKTtcbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gZ3B1UmVzb3VyY2VzW25hbWVdO1xuICAgIH1cblxuICAgIHJlc291cmNlLmNyZWF0ZSA9IHJlc291cmNlLmFsbG9jYXRlO1xuXG4gICAgcmV0dXJuIHJlc291cmNlO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEF0dHJpYnV0ZShnbENvbnRleHQpIHtcbiAgICBcbiAgICB2YXIgYXR0cmlidXRlID0gKHRoaXMgaW5zdGFuY2VvZiBBdHRyaWJ1dGUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIGF0dHJpYnV0ZUlEID0gMDtcblxuICAgIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShuYW1lLCBkYXRhKSB7XG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKXtcbiAgICAgICAgICAgIGlmKCFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgYXR0cmlidXRlW25hbWVdLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgYXR0cmlidXRlW25hbWVdLnB0cik7XG4gICAgICAgICAgICBjdHguYnVmZmVyRGF0YShjdHguQVJSQVlfQlVGRkVSLCBkYXRhLCBjdHguU1RBVElDX0RSQVcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dHJpYnV0ZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IGF0dHJpYnV0ZUlEKyssXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVCdWZmZXIoKSxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpIHNldEF0dHJpYnV0ZShuYW1lLCBkYXRhKTtcblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMubG9jYXRpb24sIHRoaXMuc2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgICAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICdhdHRyaWJ1dGUgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSArICc7XFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5kZWxldGVCdWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZhcnlpbmcoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdmFyeWluZyA9ICh0aGlzIGluc3RhbmNlb2YgVmFyeWluZykgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIHZhcnlpbmcuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICB2YXJ5aW5nW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIHNpemU6IHNpemUgfHwgMSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmxpbmsgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3ZhcnlpbmcgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZTtcbiAgICAgICAgICAgIGlmKHRoaXMuc2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIHRoaXMuc2l6ZSArICddJztcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyeWluZ1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFyeWluZztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1YnJvdXRpbmUoKSB7XG5cbiAgICB2YXIgc3Vicm91dGluZSA9ICh0aGlzIGluc3RhbmNlb2YgU3Vicm91dGluZSkgPyB0aGlzIDoge307XG5cbiAgICBzdWJyb3V0aW5lLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZm46IGZuLFxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInN1YnJvdXRpbmVcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uZm4gPSBmbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3Vicm91dGluZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN1YnJvdXRpbmU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaGFkZXIoZ2xDb250ZXh0LCBnbFJlc291cmNlKSB7XG4gICAgXG4gICAgdmFyIHNoYWRlciA9ICh0aGlzIGluc3RhbmNlb2YgU2hhZGVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICByZXNvdXJjZSA9IGdsUmVzb3VyY2UsXG4gICAgICAgIHBhcmFtZXRlcnMgPSBjdHguX2RpY3QgfHwge307XG5cbiAgICBzaGFkZXIudmVydGV4ID0ge307XG4gICAgc2hhZGVyLmZyYWdtZW50ID0ge307XG5cbiAgICB2YXIgc2hhZGVyVHlwZSA9IHtcbiAgICAgICAgdmVydGV4OiBjdHguVkVSVEVYX1NIQURFUixcbiAgICAgICAgZnJhZ21lbnQ6IGN0eC5GUkFHTUVOVF9TSEFERVJcbiAgICB9O1xuXG4gICAgLy8gQ29udmVydCBKUyBmdW5jdGlvbnMgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIHRvR0xTTChyZXR1cm5UeXBlLCBuYW1lLCBmbil7XG5cbiAgICAgICAgdmFyIGdsc2wgPSByZXR1cm5UeXBlICsgJyAnICtcbiAgICAgICAgICAgIG5hbWUgKyAnKCcgKyBhcHBseUVudlBhcmFtZXRlcnMoZm4udG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC92YXJcXHMrKFtcXHd8XFxkXSspXFxzKj1cXHMqbmV3XFxzKyhbXFx3fFxcZF0rKVxcKCguKilcXCkvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihleHByLCBuYW1lLCBkdHlwZSwgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHM7XG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZSwgJz0nLCB2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gW2R0eXBlLnRvTG93ZXJDYXNlKCksIG5hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcgJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICAucmVwbGFjZSgvZm9yXFxzKlxcKFxccyp2YXJcXHMrL2csICdmb3IoaW50ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdmFyXFxzL2csICdmbG9hdCAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3RoaXMuL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcJCguKilcXCgoLiopXFwpXFxzKig9fDspL2csIFwiJDEgJDIgJDNcIik7XG4gICAgICAgICAgICAvLyAucmVwbGFjZSgvXFwkKC4qPylcXC4vZywgXCIkMSBcIilcblxuICAgICAgICBpZihuYW1lID09IFwibWFpblwiKSB7XG4gICAgICAgICAgICBnbHNsID0gZ2xzbC5yZXBsYWNlKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccyp7LywgJyl7JykgKyBcIlxcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBnbHNsLm1hdGNoKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccypcXCkvKVsxXTtcblxuICAgICAgICAgICAgaWYoYXJncyAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3MucmVwbGFjZSgvXFwkKFtcXHd8XFxkXSspXy9nLCBcIiQxIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsc2wgPSBnbHNsXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8sIGFyZ3MrJyknKSArIFwiXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsc2w7XG4gICAgfVxuXG4gICAgLy9zZXQgcGFyYW1ldGVycyBpbiBKUyBmdW5jdGlvbnMgYmVmb3JlIGNvbnZlcnRpbmcgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIGFwcGx5RW52UGFyYW1ldGVycyhzdHIpe1xuICAgICAgICAvL2ZpbmQgYWxsICQoLi4uKSBhbmQgcmVwbGFjZSB0aGVtIHdpdGggcGFyYW1ldGVyc1xuICAgICAgICB2YXIgZW52UGFyYW0gPSBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYoZW52UGFyYW0ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXFxcXCRcXFxcKChcIitlbnZQYXJhbS5qb2luKFwifFwiKStcIilcXFxcKVwiLFwiZ1wiKTtcbiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVyc1ttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHVuaWZvcm1zIHRvIGJlIHVzZWQgYXMgcGFyYW1ldGVycyBpbiBzaGFkZXJzLCBsaWtlICQodW5pZm9ybU5hbWUpXG4gICAgICAgIC8vIHZhciBlbnZVbmlmb3JtcyA9IE9iamVjdC5rZXlzKHJlc291cmNlLnVuaWZvcm0pO1xuICAgICAgICAvLyByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlVuaWZvcm1zLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAvLyBzdHIgPSBzdHIucmVwbGFjZShyZSwgZnVuY3Rpb24obWF0Y2hlZCl7XG4gICAgICAgIC8vICAgICByZXR1cm4gcmVzb3VyY2UudW5pZm9ybVttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldLmRhdGE7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGlsZShzaGFkZXJUeXBlLCBzaGFkZXJTb3VyY2UpIHtcbiAgICAgICAgaWYgKHNoYWRlclR5cGUgIT09IGN0eC5WRVJURVhfU0hBREVSICYmIHNoYWRlclR5cGUgIT09IGN0eC5GUkFHTUVOVF9TSEFERVIpIHtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yOiB1bmtub3duIHNoYWRlciB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgICAgICAgY3R4LnNoYWRlclNvdXJjZShfc2hhZGVyLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBjdHguY29tcGlsZVNoYWRlcihfc2hhZGVyKTtcblxuICAgICAgICAvLyBDaGVjayB0aGUgY29tcGlsZSBzdGF0dXMsIGdldCBjb21waWxlIGVycm9yIGlmIGFueVxuICAgICAgICB2YXIgY29tcGlsZWQgPSBjdHguZ2V0U2hhZGVyUGFyYW1ldGVyKF9zaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUyk7XG4gICAgICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3IgPSBjdHguZ2V0U2hhZGVySW5mb0xvZyhfc2hhZGVyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSArICdcXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29tcGlsaW5nIHNoYWRlciAnXCIgKyBfc2hhZGVyICsgXCInOlwiICsgbGFzdEVycm9yKTtcblxuICAgICAgICAgICAgY3R4LmRlbGV0ZVNoYWRlcihfc2hhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGVwcyhmbikge1xuICAgICAgICB2YXIgZGVwcyA9IFtdLFxuICAgICAgICAgICAgc291cmNlQ29kZSA9IGZuLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzaGFkZXJBcmdzID0gc291cmNlQ29kZS5tYXRjaCgvZnVuY3Rpb25cXHMuKj9cXCgoW14pXSopXFwpLyksXG4gICAgICAgICAgICBhcmdzID0gKHNoYWRlckFyZ3MgIT09IG51bGwgJiYgc2hhZGVyQXJncy5sZW5ndGgpID8gc2hhZGVyQXJnc1sxXSA6IFtdO1xuICAgICAgICAvLyBhcmdzID0gYXJncy5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbnxcXHMpL2csICcnKTtcbiAgICAgICAgLy9cbiAgICAgICAgaWYoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBhcmdzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmcucmVwbGFjZSgvXFwvXFwqLipcXCpcXC8vLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBleHRyYURlcHMgPSBnZXRFeHRyYURlcHMoc291cmNlQ29kZSk7XG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChleHRyYURlcHNcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlcHMuaW5kZXhPZihkKSA9PT0gLTE7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZXBzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEV4dHJhRGVwcyhmblN0cmluZykge1xuICAgICAgICB2YXIgZXh0cmFEZXBzID0gZm5TdHJpbmcubWF0Y2goL3RoaXNcXC4oXFx3KykvZyk7XG4gICAgICAgIGlmKGV4dHJhRGVwcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXh0cmFEZXBzID0gZXh0cmFEZXBzLm1hcChmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5zbGljZSg1KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRyYURlcHMgfHwgW107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjbGFyZURlcChkZXApIHtcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICBpZih0eXBlb2YgcmVzID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UvZGVwZW5kZW5jZSBcIicgKyBkZXAgKyAnXCIgaXMgbm90IGZvdW5kLicpO1xuICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgIHJldHVybiB0b0dMU0wocmVzLnR5cGUsIHJlcy5uYW1lLCByZXMuZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVzLmhlYWRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuaXF1ZURlcHMoZGVwcykge1xuICAgICAgICB2YXIgbmFtZXMgPSB7fTtcbiAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpe1xuICAgICAgICAgICAgbmFtZXNbZF0gPSBpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobmFtZXMpO1xuICAgIH1cblxuICAgIHNoYWRlci5jcmVhdGUgPSBmdW5jdGlvbihhcmcsIGZuKXtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGFyZyB8fCB7fSxcbiAgICAgICAgICAgIG5hbWUgPSBvcHRpb24ubmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHR5cGUgPSBvcHRpb24udHlwZSB8fCBcInZlcnRleFwiLFxuICAgICAgICAgICAgZGVwcyA9IG9wdGlvbi5yZXF1aXJlIHx8IG9wdGlvbi5kZXBzIHx8IFtdLFxuICAgICAgICAgICAgcHJlY2lzaW9uID0gb3B0aW9uLnByZWNpc2lvbiB8fCBcImhpZ2hcIixcbiAgICAgICAgICAgIGRlYnVnID0gb3B0aW9uLmRlYnVnIHx8IGZhbHNlLFxuICAgICAgICAgICAgbWFpbiA9IG9wdGlvbi5tYWluIHx8IGZuIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgdmFyIHNoYWRlclNvdXJjZSA9ICdwcmVjaXNpb24gJyArIHByZWNpc2lvbiArICdwIGZsb2F0O1xcbic7XG5cbiAgICAgICAgaWYoZGVwcy5sZW5ndGggPT09IDApIGRlcHMgPSB1bmlxdWVEZXBzKGdldERlcHMobWFpbikpO1xuXG4gICAgICAgIC8vZ2V0IGRlcGVuZGVuY2UgZnJvbSBzdWJyb3V0aW5lcyBpZiBhbnlcbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IFtdLFxuICAgICAgICAgICAgc3ViUm91dGluZXMgPSBbXTtcblxuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgICAgIGlmKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXApO1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yICgnRXJyb3IhIFVuZGVmaW5lZCB2YXJpYWJsZSBpbiBzaGFkZXI6ICcrICBkZXAubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJykge1xuICAgICAgICAgICAgICAgIHN1YlJvdXRpbmVzLnB1c2gocmVzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJEZXBzID0gZ2V0RXh0cmFEZXBzKHJlcy5mbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBpZihzdWJEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG1ha2UgdGhpcyByZWN1cnNpdmUgdG8gY2hlY2sgYWxsIHN1YnJvdXRpbmUgZGVwc1xuICAgICAgICAgICAgICAgICAgICBzdWJEZXBzLmZvckVhY2goZnVuY3Rpb24oc2RlcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JlcyA9IHJlc291cmNlLmdldChzZGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KGdldEV4dHJhRGVwcyhzcmVzLmZuLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KHN1YkRlcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYWxsRGVwcyA9IGV4dHJhRGVwc1xuICAgICAgICAgICAgLy8gLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAuY29uY2F0KGRlcHMuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJSb3V0aW5lcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmNvbmNhdChzdWJSb3V0aW5lcyk7XG5cbiAgICAgICAgICAgIGRlcHMgPSB1bmlxdWVEZXBzKGFsbERlcHMpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRlcHMpKXtcbiAgICAgICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihkZXBzKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGVwcykuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZVR5cGUpe1xuICAgICAgICAgICAgICAgIGRlcHNbcmVzb3VyY2VUeXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgc2hhZGVyU291cmNlICs9IHRvR0xTTCgndm9pZCcsICdtYWluJywgbWFpbik7XG4gICAgICAgIGlmKGRlYnVnKVxuICAgICAgICAgICAgY29uc29sZS5sb2coc2hhZGVyU291cmNlKTtcbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjb21waWxlKHNoYWRlclR5cGVbdHlwZV0sIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIF9zaGFkZXIuX3NoYWRlclR5cGUgPSBzaGFkZXJUeXBlW3R5cGVdO1xuICAgICAgICBfc2hhZGVyLmRlcHMgPSBkZXBzO1xuICAgICAgICBfc2hhZGVyLnNvdXJjZSA9IHNoYWRlclNvdXJjZTtcbiAgICAgICAgc2hhZGVyW3R5cGVdW25hbWVdID0gX3NoYWRlcjtcbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cbiIsImltcG9ydCBSZXNvdXJjZSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCBQcm9ncmFtTWFuYWdlciBmcm9tICcuL3Byb2dyYW0nO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuL3NoYWRlcic7XG5pbXBvcnQgRnJhbWVidWZmZXIgZnJvbSAnLi9mcmFtZWJ1ZmZlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZsZXhHTChhcmcpIHtcblxuICAgIHZhciBmbGV4Z2wgPSAodGhpcyBpbnN0YW5jZW9mIEZsZXhHTCkgPyB0aGlzIDoge30sXG4gICAgICAgIG9wdGlvbnMgPSBhcmcgfHwge30sXG4gICAgICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyIHx8IG51bGwsXG4gICAgICAgIGNhbnZhcyA9IG9wdGlvbnMuY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIHdpZHRoID0gb3B0aW9ucy53aWR0aCB8fCBudWxsLFxuICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBudWxsLFxuICAgICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nIHx8IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuICAgICAgICBjdHggPSBvcHRpb25zLmNvbnRleHQgfHwgb3B0aW9ucy5jdHggfHwgbnVsbCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBwcm9ncmFtID0gbnVsbCxcbiAgICAgICAgc2hhcmVkRnVuY3Rpb24gPSBvcHRpb25zLnNoYXJlZEZ1bmN0aW9uIHx8IHt9O1xuXG5cbiAgICBpZiAodHlwZW9mKGNhbnZhcykgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY2FudmFzWzBdID09IFwiI1wiKSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgZWxzZSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnRhaW5lciA9ICh0eXBlb2YoY29udGFpbmVyKSA9PSBcInN0cmluZ1wiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikgOiBjb250YWluZXI7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmIChoZWlnaHQgPT09IG51bGwpIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8vIHdpZHRoIC09IHBhZGRpbmcubGVmdCArIHBhZGRpbmcucmlnaHQ7XG4gICAgLy8gaGVpZ2h0IC09IHBhZGRpbmcudG9wICsgcGFkZGluZy5ib3R0b207XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpbkxlZnQgPSBwYWRkaW5nLmxlZnQgKyBcInB4XCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpblRvcCA9IHBhZGRpbmcudG9wICsgXCJweFwiO1xuXG4gICAgaWYgKGN0eCA9PT0gbnVsbClcbiAgICAgICAgY3R4ID0gc2V0dXBXZWJHTChjYW52YXMpO1xuICAgIGZsZXhnbC5jdHggPSBjdHg7XG4gICAgZmxleGdsLmNhbnZhcyA9IGNhbnZhcztcblxuICAgIGN0eC5fZGljdCA9IG9wdGlvbnMuZW52IHx8IG9wdGlvbnMuZGljdCB8fCBvcHRpb25zLmRpY3Rpb25hcnkgfHwge307XG5cblxuICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2UoY3R4KSxcbiAgICAgICAgZnJhbWVidWZmZXJzID0gbmV3IEZyYW1lYnVmZmVyKGN0eCksXG4gICAgICAgIHByb2dyYW1NYW5hZ2VyID0gbmV3IFByb2dyYW1NYW5hZ2VyKGN0eCwgcmVzb3VyY2VzKSxcbiAgICAgICAgc2hhZGVycyA9IG5ldyBTaGFkZXIoY3R4LCByZXNvdXJjZXMpO1xuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cblxuICAgIGN0eC5leHQgPSBjdHguZ2V0RXh0ZW5zaW9uKFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtcbiAgICBlbmFibGVFeHRlbnNpb24oW1xuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0XCIsXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCJcbiAgICBdKTtcblxuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgZnVuY3Rpb24gc2V0dXBXZWJHTChjYW52YXMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIl07XG4gICAgICAgIHZhciBnbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKGdsKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2w7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5hYmxlRXh0ZW5zaW9uKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4dGVuc2lvbnMpKSBleHRlbnNpb25zID0gW2V4dGVuc2lvbnNdO1xuICAgICAgICBleHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgZXh0UHJvcHMgPSBjdHguZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gICAgICAgICAgICBpZiAoZXh0UHJvcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRQcm9wcykuZm9yRWFjaChmdW5jdGlvbihlcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4dC5oYXNPd25Qcm9wZXJ0eShlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5leHRbZXBdID0gZXh0UHJvcHNbZXBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmF0dHJpYnV0ZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMuYXR0cmlidXRlW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG4gICAgZmxleGdsLmJ1ZmZlciA9IGZsZXhnbC5hdHRyaWJ1dGU7IC8vYWxpYXNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB1bmlmb3JtIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnVuaWZvcm0gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInVuaWZvcm1cIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLnVuaWZvcm0uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudW5pZm9ybSwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudW5pZm9ybVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmlzUHJvZ3JhbShwcm9ncmFtKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgZmxleGdsLnVuaWZvcm0uc2VyaWFsaXplID0gZnVuY3Rpb24oYW9hKSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhb2EuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB0ZXh0dXJlIHR5cGU6IHVuc2lnbmVkX2J5dGUgb3IgZmxvYXQsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjaGFubmVsPSdhbHBoYSddIFdlYkdMIGZvcm1hdHMgKHJnYmEsIGFscGhhKVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3NhbXBsZXI9bnVsbF0gRkxleEdMIFVuaWZvcm0gT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudGV4dHVyZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEsIGRpbSwgY2hhbm5lbCwgc2FtcGxlcikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ0ZXh0dXJlXCIsIG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudGV4dHVyZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnRleHR1cmVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnRleHR1cmUudXBkYXRlID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0udXBkYXRlKGRhdGEsIG9mZnNldCwgZGltKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt0eXBlXSBWYXJ5aW5nIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzaXplPTFdIGRhdGEgYXJyYXlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC52YXJ5aW5nID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ2YXJ5aW5nXCIsIG5hbWUsIHR5cGUsIHNpemUpO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmU9bnVsbF0gRkxleEdMIFRleHR1cmUgT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlIHx8IHJlc291cmNlcy5hbGxvY2F0ZSgndGV4dHVyZScsIG5hbWUsIHR5cGUsIGRpbSwgJ3JnYmEnLCBudWxsKTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcnMuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSk7XG4gICAgICAgIGlmICghZmxleGdsLmZyYW1lYnVmZmVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmZyYW1lYnVmZmVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICBmcmFtZWJ1ZmZlcnNbbmFtZV0uZW5hYmxlUmVhZChwcm9ncmFtKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuYmluZEZyYW1lYnVmZmVyID0gZnVuY3Rpb24oZmJOYW1lKSB7XG4gICAgICAgIGlmIChmYk5hbWUgPT09IG51bGwpXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcnNbZmJOYW1lXS5wdHIpO1xuICAgIH1cblxuICAgIGZsZXhnbC5zdWJyb3V0aW5lID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwic3Vicm91dGluZVwiLCBuYW1lLCB0eXBlLCBmbik7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnBhcmFtZXRlciA9IGZ1bmN0aW9uKGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoa2V5VmFsdWVQYWlycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0ga2V5VmFsdWVQYWlyc1trZXldO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3R4Ll9kaWN0W2tleV0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHguX2RpY3QsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlUGFpcnNba2V5XVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0gbmV3QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YoY3R4Ll9kaWN0W2tleV0pID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpY3RLZXlzID0gT2JqZWN0LmtleXMoY3R4Ll9kaWN0W2tleV0pO1xuICAgICAgICAgICAgICAgIGZ4Z2wudW5pZm9ybSgnZGljdCcra2V5LCAnZmxvYXQnLCBkaWN0S2V5cy5tYXAoZD0+Y3R4Ll9kaWN0W2tleV1bZF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGljdGlvbmFyeSA9IGZsZXhnbC5wYXJhbWV0ZXI7XG5cbiAgICBmbGV4Z2wuc2hhZGVyID0gcHJvZ3JhbU1hbmFnZXIuc2hhZGVyO1xuXG4gICAgZmxleGdsLnByb2dyYW0gPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgcHJvZ3JhbSA9IHByb2dyYW1NYW5hZ2VyLnByb2dyYW0obmFtZSwgdnMsIGZzKTtcbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuY3JlYXRlUHJvZ3JhbSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICBwcm9ncmFtID0gcHJvZ3JhbU1hbmFnZXIuY3JlYXRlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuXG4gICAgZmxleGdsLmFwcCA9IGZ1bmN0aW9uKG5hbWUsIHByb3BzKSB7XG4gICAgICAgIHZhciB2cyA9IGZsZXhnbC5zaGFkZXIudmVydGV4KHByb3BzLnZzKSxcbiAgICAgICAgICAgIGZzID0gZmxleGdsLnNoYWRlci5mcmFnbWVudChwcm9wcy5mcyksXG4gICAgICAgICAgICBmYiA9IHByb3BzLmZyYW1lYnVmZmVyIHx8IG51bGw7XG5cbiAgICAgICAgZmxleGdsLnByb2dyYW0obmFtZSwgdnMsIGZzKTtcblxuICAgICAgICB2YXIgZHJhdyA9IHByb3BzLnJlbmRlciB8fCBwcm9wcy5kcmF3O1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgZ2wgPSBmbGV4Z2wucHJvZ3JhbShuYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBkcmF3LmNhbGwoZ2wsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmxleGdsLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgfVxuXG4gICAgZmxleGdsLnJlc291cmNlcyA9IHJlc291cmNlcztcblxuICAgIHJldHVybiBmbGV4Z2w7XG59XG4iLCJpbXBvcnQgRmxleEdMIGZyb20gJy4vZmxleGdsJztcblxuKGZ1bmN0aW9uIG1ha2VHbG9iYWwoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5GbGV4R0wgPSBGbGV4R0w7XG4gIH1cbn0pKCk7XG4iLCJpbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGcmFtZWJ1ZmZlcihnbENvbnRleHQpIHtcblxuICAgIHZhciBmcmFtZWJ1ZmZlciA9ICh0aGlzIGluc3RhbmNlb2YgRnJhbWVidWZmZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmcmFtZWJ1ZmZlci5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXSA9IHtcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCksXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICB3aWR0aDogZGltWzBdIHx8IDEwMjQsXG4gICAgICAgICAgICBoZWlnaHQ6IGRpbVsxXSB8fCAxMDI0LFxuICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSB8fCBudWxsLFxuICAgICAgICAgICAgcmVuZGVyYnVmZmVyOiBjdHguY3JlYXRlUmVuZGVyYnVmZmVyKCksXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGJ1ZiA9ICh0eXBlID09ICdmbG9hdCcpID9cbiAgICAgICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpIDpcbiAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KTtcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPSBUZXh0dXJlKGN0eCkuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgXCJyZ2JhXCIsIGJ1Zik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVuZGVyYnVmZmVyID0gZnJhbWVidWZmZXJbbmFtZV0ucmVuZGVyYnVmZmVyO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgY3R4LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoXG4gICAgICAgICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkRFUFRIX0NPTVBPTkVOVDE2LFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0ud2lkdGgsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5oZWlnaHRcbiAgICAgICAgKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlLnB0cixcbiAgICAgICAgICAgIDBcbiAgICAgICAgKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkRFUFRIX0FUVEFDSE1FTlQsXG4gICAgICAgICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAgICAgcmVuZGVyYnVmZmVyXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5wdHIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLnRleHR1cmUubmFtZSk7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHRoaXMudGV4dHVyZS5sb2NhdGlvbiwgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGdsLlJFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5yZW5kZXJidWZmZXIpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVRleHR1cmUodGhpcy50ZXh0dXJlLnB0cilcbiAgICAgICAgICAgIGN0eC5kZWxldGVGcmFtZWJ1ZmZlcih0aGlzLnB0cik7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiBmcmFtZWJ1ZmZlcjtcbn1cbiIsImltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9ncmFtKGdsQ29udGV4dCwgcmVzb3VyY2VzKSB7XG5cbiAgICB2YXIgcHJvZ3JhbSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBwbSA9IHt9LFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYWRlcnMgPSBuZXcgU2hhZGVyKGdsQ29udGV4dCwgcmVzb3VyY2VzKTtcblxuICAgIHBtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICB2YXIgbmFtZSA9IG5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB2cyA9IHZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZnMgPSBmcyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcblxuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgcG0uZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAga2VybmVsc1tuYW1lXSA9IGN0eC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICAgICAga2VybmVsc1tuYW1lXS52cyA9ICh0eXBlb2YgdnMgPT0gXCJvYmplY3RcIikgPyB2cyA6IHNoYWRlcnMudmVydGV4W3ZzXTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5mcyA9ICh0eXBlb2YgZnMgPT0gXCJvYmplY3RcIikgPyBmcyA6IHNoYWRlcnMuZnJhZ21lbnRbZnNdO1xuXG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgIGN0eC5hdHRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5mcyk7XG4gICAgICAgIGN0eC5saW5rUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgdmFyIGxpbmtlZCA9IGN0eC5nZXRQcm9ncmFtUGFyYW1ldGVyKGtlcm5lbHNbbmFtZV0sIGN0eC5MSU5LX1NUQVRVUyk7XG4gICAgICAgIGlmICghbGlua2VkKSB7XG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yID0gY3R4LmdldFByb2dyYW1JbmZvTG9nKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOlwiICsgbGFzdEVycm9yKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS52cy5kZXBzKTtcbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0uZnMuZGVwcyk7XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZGVwcyA9IGRlcHM7XG5cbiAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgfVxuXG4gICAgcG0udXNlID0gcG0ucHJvZ3JhbSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgcHJvZ3JhbSA9IGtlcm5lbHNbbmFtZV07XG4gICAgICAgICAgICBjdHgudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgICAgICAgIHJlc291cmNlcy5saW5rKHByb2dyYW0sIHByb2dyYW0uZGVwcyk7XG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwbS5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBtLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICBkZWxldGUga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBtLnNoYWRlciA9IGZ1bmN0aW9uKGFyZywgZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmc7XG4gICAgICAgIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICAgICAgcmV0dXJuIHBtO1xuICAgIH1cblxuICAgIHBtLnNoYWRlci52ZXJ0ZXggPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwidmVydGV4XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcG0uc2hhZGVyLmZyYWdtZW50ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcImZyYWdtZW50XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBtO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==