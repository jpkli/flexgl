!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},u=e;function o(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=o(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=u.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=o(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),u["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),u["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),u["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(u.activeTexture(u.TEXTURE0+i.index),u.bindTexture(u.TEXTURE_2D,i.ptr),u.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,u){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==u&&u.length&&a(e,u),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new function e(t){var r=this instanceof e?this:{},i=t,a=0;function u(e,t){var n=i[r[e].type.toUpperCase()],a=i[r[e].channel.toUpperCase()],u=r[e].dim[0],o=r[e].dim[1];r[e].data=t,i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texImage2D(i.TEXTURE_2D,0,a,u,o,0,a,n,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}return r.create=function(e,o,f,s,c,l){var d=r.hasOwnProperty(e)?r[e].index:a++;return r[e]={name:e,index:d,type:o||"float",dim:f||[512,512],channel:s||"alpha",data:null,location:null,sampler:l||null,ptr:i.createTexture()},u(e,c),null===r[e].sampler?r[e].sampler=n(i).create(e,"sampler2D",r[e]):r[e].sampler.data=r[e],r[e].link=function(t){return void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=r[e]),this.sampler.link(t),this},r[e].load=function(e){return u(this.name,e),this},r[e].copyFromFBO=function(){i.bindTexture(i.TEXTURE_2D,this.ptr),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,this.dim[0],this.dim[1],0),i.bindTexture(i.TEXTURE_2D,null)},r[e].update=function(e,t,n){return function(e,t,n,a){var u=i[r[e].type.toUpperCase()],o=i[r[e].channel.toUpperCase()],f=a[0]||r[e].dim[0],s=a[1]||r[e].dim[1];i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texSubImage2D(i.TEXTURE_2D,0,n[0],n[1],f,s,o,u,t),i.bindTexture(i.TEXTURE_2D,null)}(this.name,e,t,n),this},r[e].resize=function(e,t){this.dim=e,u(this.name,t)},r[e].delete=function(){t.deleteTexture(this.ptr)},r[e].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},r[e]},r}(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var a=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===a.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},a=n.container||null,u=n.canvas||document.createElement("canvas"),o=n.width||null,f=n.height||null,s=n.padding||{left:0,right:0,top:0,bottom:0},c=n.context||n.ctx||null;n.sharedFunction,"string"==typeof u&&(u="#"==u[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),a&&(a="string"==typeof a?document.getElementById(a):a,null===o&&(o=a.clientWidth),null===f&&(f=a.clientHeight)),u.width=o,u.height=f,u.style.position="absolute",u.style.marginLeft=s.left+"px",u.style.marginTop=s.top+"px",null===c&&(c=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(u)),r.ctx=c,r.canvas=u,r.resources=l,c._dict=n.env||n.dict||n.dictionary||{};var l=new i(c),d=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(c),h=new function(e,t){var r={},n=c,i={};function a(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}function u(e,t){var r=/\s*(attribute|uniform)\s+\w+\s+(\w+)/;e.split("\n").forEach(function(e){var n=r.exec(e);n&&t.push(n[2])})}return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var a=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs=t,i[e].fs=r,n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);a=(a=a.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=a},r.use=function(e,r,o){if(i.hasOwnProperty(e))return n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e];var f=a(n,n.VERTEX_SHADER,r),s=a(n,n.FRAGMENT_SHADER,o);return f.deps=[],u(r,f.deps),s.deps=[],u(o,s.deps),this.create(e,f,s),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r}(0,l),p=null,m=c.getExtension("EXT_blend_minmax");function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=c.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(c.ext[e]=t[e])})})}return m&&(c.MAX_EXT=m.MAX_EXT,c.MIN_EXT=m.MIN_EXT),c.ext=c.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),a&&a.appendChild(u),r.enableExtension=b,r.attribute=function(e,t,n){return l.allocate("attribute",e,t,n),r.attribute.hasOwnProperty(e)||Object.defineProperty(r.attribute,e,{get:()=>l.attribute[e],set(t){l.attribute[e].load(t)}}),r},r.uniform=function(e,t,n){return l.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return l.uniform[e]},set:function(t){l.uniform[e].load(t),c.isProgram(p)&&l.uniform[e].link(p)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,u){return l.allocate("texture",e,t,i,a,n,u),Object.defineProperty(r.texture,e,{get:function(){return l.texture[e]},set:function(t){l.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){l.texture[e].update(t,r,n)},r.varying=function(e,t,n){return l.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||l.allocate("texture",e,t,n,"rgba",null),d.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return d[e]}}),r},r.framebuffer.enableRead=function(e,t){d[e].enableRead(t)},r.bindFramebuffer=function(e){null===e?c.bindFramebuffer(c.FRAMEBUFFER,null):c.bindFramebuffer(c.FRAMEBUFFER,d[e].ptr)},r.subroutine=function(e,t,n){return l.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(c._dict[t]=e[t],Array.isArray(c._dict[t])){var r=0;Object.defineProperty(c._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,c._dict[t]=e}})}else if("object"==typeof c._dict[t]){var n=Object.keys(c._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>c._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=h.shader,r.app=function(e,t,r){0===r?(c.viewport(0,0,1024,1),p=h.use(e,t.vsource,t.fsource),this.bindFramebuffer("f_sum_texture")):1===r?(c.viewport(0,0,c.canvas.width,c.canvas.height),p=h.use(e,t.vsource,t.fsource),this.bindFramebuffer(null)):2===r?(this.bindFramebuffer(null),c.viewport(0,0,1024,1),this.bindFramebuffer("f_mem_texture_1"),p=h.use(e,t.vsource,t.fsource)):3===r?(this.bindFramebuffer(null),c.viewport(0,0,1024,1),this.bindFramebuffer("f_mem_texture_0"),p=h.use(e,t.vsource,t.fsource)):4===r?(this.bindFramebuffer(null),c.viewport(0,0,c.canvas.width,c.canvas.height),p=h.use(e,t.vsource,t.fsource)):5===r&&(this.bindFramebuffer(null),c.viewport(0,0,c.canvas.width,c.canvas.height),p=h.use(e,t.vsource,t.fsource)),c.drawArrays(c.LINES,0,2)},r.dimension=function(){return[u.width,u.height]},r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsImRlZmF1bHQiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJlIiwiVW5pZm9ybSIsImdsQ29udGV4dCIsInR5cGUiLCJkYXRhIiwidW5pZm9ybSIsInRoaXMiLCJjdHgiLCJzZXJpYWxpemVBcnJheSIsImFycmF5T2ZBcnJheSIsInNhIiwiZm9yRWFjaCIsImEiLCJjb25jYXQiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJsb2NhdGlvbiIsInNpemUiLCJwYXJzZUludCIsInNsaWNlIiwibGluayIsInByb2dyYW0iLCJnZXRVbmlmb3JtTG9jYXRpb24iLCJidWYiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsIkZsb2F0MzJBcnJheSIsIkludDMyQXJyYXkiLCJyZXNvdXJjZVR5cGUiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJpbmRleCIsImJpbmRUZXh0dXJlIiwiVEVYVFVSRV8yRCIsInB0ciIsInVuaWZvcm0xaSIsImxvYWQiLCJoZWFkZXIiLCJsZW4iLCJsZW5ndGgiLCJSZXNvdXJjZSIsInJlc291cmNlIiwiZ3B1UmVzb3VyY2VzIiwiYXR0cmlidXRlIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJzZXRBdHRyaWJ1dGUiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlQnVmZmVyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImFycmF5QnVmZmVyIiwiZGVsZXRlIiwiZGVsZXRlQnVmZmVyIiwidGV4dHVyZSIsIlRleHR1cmUiLCJ0ZXh0dXJlSUQiLCJzZXRUZXh0dXJlIiwidGV4RGF0YSIsInRvVXBwZXJDYXNlIiwiZm9ybWF0IiwiY2hhbm5lbCIsIndpZHRoIiwiZGltIiwiaGVpZ2h0IiwidGV4SW1hZ2UyRCIsInRleFBhcmFtZXRlcmkiLCJURVhUVVJFX01JTl9GSUxURVIiLCJORUFSRVNUIiwiVEVYVFVSRV9NQUdfRklMVEVSIiwiVEVYVFVSRV9XUkFQX1MiLCJDTEFNUF9UT19FREdFIiwiVEVYVFVSRV9XUkFQX1QiLCJzYW1wbGVyIiwidGV4SW5kZXgiLCJjcmVhdGVUZXh0dXJlIiwiY29weUZyb21GQk8iLCJjb3B5VGV4SW1hZ2UyRCIsIlJHQkEiLCJ1cGRhdGUiLCJvZmZzZXQiLCJ0ZXhTdWJJbWFnZTJEIiwicmVzaXplIiwiZGVsZXRlVGV4dHVyZSIsInZhcnlpbmciLCJWYXJ5aW5nIiwic3Vicm91dGluZSIsIlN1YnJvdXRpbmUiLCJmbiIsInRvU3RyaW5nIiwicmVzb3VyY2VUeXBlcyIsImFsbG9jYXRlIiwiaW5kZXhPZiIsIkVycm9yIiwicmVzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzZXQiLCJyZXNvdXJjZV9uYW1lcyIsImtleXMiLCJyZXNvdXJjZU5hbWUiLCJmbGV4Z2wiLCJ3aW5kb3ciLCJGbGV4R0wiLCJhcmciLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJzaGFyZWRGdW5jdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIm5hbWVzIiwiZ2wiLCJnZXRDb250ZXh0IiwicmVzb3VyY2VzIiwiX2RpY3QiLCJlbnYiLCJkaWN0IiwiZGljdGlvbmFyeSIsImZyYW1lYnVmZmVycyIsIkZyYW1lYnVmZmVyIiwiZnJhbWVidWZmZXIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImVuYWJsZVJlYWQiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwiZGVsZXRlUmVuZGVyYnVmZmVyIiwicmVuZGVyYnVmZmVyIiwiZGVsZXRlRnJhbWVidWZmZXIiLCJrZXJuZWxzIiwiY3JlYXRlU2hhZGVyIiwic291cmNlIiwic2hhZGVyIiwic2hhZGVyU291cmNlIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwiY29uc29sZSIsImxvZyIsImdldFNoYWRlckluZm9Mb2ciLCJkZWxldGVTaGFkZXIiLCJhZGREZXBzIiwiZGVwcyIsInJlIiwic3BsaXQiLCJ2IiwicmVzdWx0IiwiZXhlYyIsInB1c2giLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ2c291cmNlIiwiZnNvdXJjZSIsInVzZVByb2dyYW0iLCJWRVJURVhfU0hBREVSIiwiRlJBR01FTlRfU0hBREVSIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsInJlYWxQcm9ncmFtIiwiYmxlbmRFeHQiLCJnZXRFeHRlbnNpb24iLCJlbmFibGVFeHRlbnNpb24iLCJleHRlbnNpb25zIiwiZXh0ZW5zaW9uIiwiZXh0UHJvcHMiLCJlcCIsImV4dCIsIk1BWF9FWFQiLCJNSU5fRVhUIiwiYXBwZW5kQ2hpbGQiLCJbb2JqZWN0IE9iamVjdF0iLCJpc1Byb2dyYW0iLCJzZXJpYWxpemUiLCJhb2EiLCJmYk5hbWUiLCJwYXJhbWV0ZXIiLCJrZXlWYWx1ZVBhaXJzIiwibmV3QXJyYXkiLCJkaWN0S2V5cyIsImZ4Z2wiLCJtYXAiLCJhcHAiLCJudW0iLCJ2aWV3cG9ydCIsImRyYXdBcnJheXMiLCJMSU5FUyIsImRpbWVuc2lvbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxLQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEtBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENL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LE1BQ0F6SSxFQUFBZ04sU0FBQSxJQUFBaE4sRUFBQTBHLE9BQUE3QyxNQUFBN0QsRUFBQTBHLE9BQUEzQyxRQUNBd0gsRUFBQXhLLEVBQUFnSyxJQUFBaE4sRUFBQXNMLEVBQUEyQixRQUFBM0IsRUFBQTRCLFVBZUFqTCxFQUFBaU4sV0FBQWpOLEVBQUFrTixNQUFBLE1BR0E5RyxFQUFBK0csVUFBQSxXQUNBLE9BQUF6RyxFQUFBN0MsTUFBQTZDLEVBQUEzQyxTQUdBcUMiLCJmaWxlIjoiZmxleGdsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFVuaWZvcm0oZ2xDb250ZXh0LCBuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICB2YXIgdW5pZm9ybSA9ICh0aGlzIGluc3RhbmNlb2YgVW5pZm9ybSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5KGFycmF5T2ZBcnJheSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYXJyYXlPZkFycmF5LmZvckVhY2goZnVuY3Rpb24oYSl7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFVuaWZvcm0oKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlLFxuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uLFxuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZigodHlwZSA9PSAnZmxvYXQnIHx8IHR5cGUgPT0gJ2ludCcpICYmICFBcnJheS5pc0FycmF5KGRhdGEpICYmICFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpXG4gICAgICAgICAgICBkYXRhID0gW2RhdGFdO1xuXG4gICAgICAgIHZhciBidWY7XG4gICAgICAgIGlmICh0eXBlLnNsaWNlKDAsMykgPT0gJ3ZlYycgfHwgdHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCw0KSA9PSAnaXZlYycgfHwgdHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBidWYgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2l2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsMykgPT0gJ21hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm1NYXRyaXgnICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBmYWxzZSwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoJ3Jlc291cmNlVHlwZScpICYmIGRhdGEucmVzb3VyY2VUeXBlID09ICd0ZXh0dXJlJykge1xuICAgICAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgZGF0YS5wdHIpO1xuICAgICAgICAgICAgICAgIGN0eC51bmlmb3JtMWkobG9jYXRpb24sIGRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdW5pZm9ybS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB1bmlmb3JtW25hbWVdID0ge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IHBhcnNlSW50KHR5cGUuc2xpY2UoNCw1KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmRhdGEgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0VW5pZm9ybS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3VuaWZvcm0gJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBsZW4gPSAwO1xuXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgIT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLmRhdGEubGVuZ3RoIC8gdGhpcy5zaXplO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1RPRE86IGZpeCBkZWNsYXJhdGlvbiBmb3IgbWF0cml4XG4gICAgICAgICAgICBpZihsZW4gPiAxICYmIHR5cGUgIT0gJ21hdDQnKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIGxlbiArICddJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHVuaWZvcm1bbmFtZV07XG4gICAgfVxuXG5cbiAgICByZXR1cm4gdW5pZm9ybTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gJy4vdW5pZm9ybSc7XG5pbXBvcnQgQXR0cmlidXRlIGZyb20gJy4vYXR0cmlidXRlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vdGV4dHVyZSc7XG5pbXBvcnQgVmFyeWluZyBmcm9tICcuL3ZhcnlpbmcnO1xuaW1wb3J0IFN1YnJvdXRpbmUgZnJvbSAnLi9zdWJyb3V0aW5lJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUmVzb3VyY2UoZ2xDb250ZXh0KSBcbntcbiAgICB2YXIgcmVzb3VyY2UgPSAodGhpcyBpbnN0YW5jZW9mIFJlc291cmNlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgZ3B1UmVzb3VyY2VzID0ge307XG5cbiAgICByZXNvdXJjZS51bmlmb3JtID0gbmV3IFVuaWZvcm0oZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5hdHRyaWJ1dGUgPSBuZXcgQXR0cmlidXRlKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UudGV4dHVyZSA9IG5ldyBUZXh0dXJlKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UudmFyeWluZyA9IG5ldyBWYXJ5aW5nKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2Uuc3Vicm91dGluZSA9IG5ldyBTdWJyb3V0aW5lKCk7XG5cbiAgICB2YXIgcmVzb3VyY2VUeXBlcyA9IFsndW5pZm9ybScsICdhdHRyaWJ1dGUnLCAndGV4dHVyZScsICd2YXJ5aW5nJywgJ3N1YnJvdXRpbmUnXTtcblxuICAgIHJlc291cmNlLmFsbG9jYXRlID0gZnVuY3Rpb24odHlwZSkgXG4gICAge1xuICAgICAgICBpZiAocmVzb3VyY2VUeXBlcy5pbmRleE9mKHR5cGUpID09PSAtMSkgIHsgdGhyb3cgRXJyb3IoXCJFcnJvcjogSW52YWxpZCByZXNvdXJjZSB0eXBlOiBcIiArIHR5cGUpOyB9XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2VbdHlwZV0uY3JlYXRlLmFwcGx5KG51bGwsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICByZXMucmVzb3VyY2VUeXBlID0gdHlwZTtcbiAgICAgICAgZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXSA9IHJlcztcblxuICAgICAgICBpZiAoIWdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXMubmFtZSkpIFxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ3B1UmVzb3VyY2VzLCByZXMubmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBncHVSZXNvdXJjZXNbcmVzLm5hbWVdO30sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7IGdwdVJlc291cmNlc1tyZXMubmFtZV0ubG9hZChkYXRhKTt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG5cbiAgICByZXNvdXJjZS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSwgcmVzb3VyY2VfbmFtZXMpIHtcbiAgICAgICAgdmFyIHJlcXVpcmVkUmVzb3VyY2VOYW1lcyA9IChBcnJheS5pc0FycmF5KHJlc291cmNlX25hbWVzKSkgPyByZXNvdXJjZV9uYW1lcyA6IE9iamVjdC5rZXlzKGdwdVJlc291cmNlcyk7XG4gICAgICAgIHJlcXVpcmVkUmVzb3VyY2VOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgaWYgKGdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZ3B1UmVzb3VyY2VzW3Jlc291cmNlTmFtZV0ubGluayhwcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gZ3B1UmVzb3VyY2VzW25hbWVdO1xuICAgIH1cbiAgICByZXNvdXJjZS5jcmVhdGUgPSByZXNvdXJjZS5hbGxvY2F0ZTtcblxuICAgIHJldHVybiByZXNvdXJjZTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdHRyaWJ1dGUoZ2xDb250ZXh0KSBcbntcbiAgICB2YXIgYXR0cmlidXRlID0gKHRoaXMgaW5zdGFuY2VvZiBBdHRyaWJ1dGUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIGF0dHJpYnV0ZUlEID0gMDtcblxuICAgIGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShuYW1lLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGlmKCBBcnJheS5pc0FycmF5KGRhdGEpIHx8IEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSApXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKCFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlW25hbWVdLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgYXR0cmlidXRlW25hbWVdLnB0cik7XG4gICAgICAgICAgICBjdHguYnVmZmVyRGF0YShjdHguQVJSQVlfQlVGRkVSLCBkYXRhLCBjdHguU1RBVElDX0RSQVcpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXR0cmlidXRlW25hbWVdLnB0ciA9PT0gYXR0cmlidXRlW25hbWVdLm9sZF9wdHIpO1xuICAgICAgICAgICAgLy8gYXR0cmlidXRlW25hbWVdLm9sZF9wdHIgPSBhdHRyaWJ1dGVbbmFtZV0ucHRyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXR0cmlidXRlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIFxuICAgIHtcbiAgICAgICAgYXR0cmlidXRlW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogYXR0cmlidXRlSUQrKyxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUJ1ZmZlcigpLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQodHlwZS5zbGljZSgzLDQpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYoZGF0YSAhPT0gbnVsbCAmJiBkYXRhLmxlbmd0aCkgXG4gICAgICAgICAgICB7c2V0QXR0cmlidXRlKG5hbWUsIGRhdGEpO31cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIFxuICAgICAgICB7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICBjdHgudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmxvY2F0aW9uLCB0aGlzLnNpemUsIGN0eC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgY3R4LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMubG9jYXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGFycmF5QnVmZmVyKSBcbiAgICAgICAge1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlKHRoaXMubmFtZSwgYXJyYXlCdWZmZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSBcbiAgICAgICAgICAgIHtyZXR1cm4gJ2F0dHJpYnV0ZSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lICsgJztcXG4nO31cbiAgICAgICAgXG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmRlbGV0ZUJ1ZmZlcih0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXR0cmlidXRlW25hbWVdO1xuICAgIH07XG5cbiAgICByZXR1cm4gYXR0cmlidXRlO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSBcIi4vdW5pZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXh0dXJlKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHRleHR1cmUgPSAodGhpcyBpbnN0YW5jZW9mIFRleHR1cmUpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHRleHR1cmVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRUZXh0dXJlKG5hbWUsIHRleERhdGEpIFxuICAgIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRhdGEgPSB0ZXhEYXRhO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4Lk5FQVJFU1QpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9TLCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1QsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVUZXh0dXJlKG5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IGRpbVswXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IGRpbVsxXSB8fCB0ZXh0dXJlW25hbWVdLmRpbVsxXTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleFN1YkltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIG9mZnNldFswXSwgb2Zmc2V0WzFdLCB3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHR5cGUsIHRleERhdGEpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEFkZCBzdXBwb3J0IGZvciB0ZXh0dXJlIGNvbXByZXNzaW9uXG4gICAgLy8gZnVuY3Rpb24gY29tcHJlc3NUZXh0dXJlKHRleERhdGEpIHtcbiAgICAvL1xuICAgIC8vICAgICB2YXIgZXh0ID0gKFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJNT1pfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpXG4gICAgLy8gICAgICk7XG4gICAgLy9cbiAgICAvLyAgICAgY3R4LmNvbXByZXNzZWRUZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBleHQuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQsIHRleHR1cmVbbmFtZV0uZGltWzBdLCB0ZXh0dXJlW25hbWVdLmRpbVsxXSwgMCwgdGV4RGF0YSk7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vIH1cblxuICAgIHRleHR1cmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKSB7XG4gICAgICAgIHZhciB0ZXhJbmRleCA9ICh0ZXh0dXJlLmhhc093blByb3BlcnR5KG5hbWUpKSA/IHRleHR1cmVbbmFtZV0uaW5kZXggOiB0ZXh0dXJlSUQrKztcbiAgICAgICAgdGV4dHVyZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBpbmRleDogdGV4SW5kZXgsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIGRpbTogZGltIHx8IFs1MTIsIDUxMl0sXG4gICAgICAgICAgICBjaGFubmVsOiBjaGFubmVsIHx8IFwiYWxwaGFcIixcbiAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNhbXBsZXI6IHNhbXBsZXIgfHwgbnVsbCxcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZVRleHR1cmUoKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpXG4gICAgICAgIHNldFRleHR1cmUobmFtZSwgZGF0YSk7XG5cbiAgICAgICAgaWYgKHRleHR1cmVbbmFtZV0uc2FtcGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyID0gVW5pZm9ybShjdHgpLmNyZWF0ZShuYW1lLCAnc2FtcGxlcjJEJywgdGV4dHVyZVtuYW1lXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICAvLyBpZiAodGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICAvLyBjdHgudW5pZm9ybTFpKHRoaXMubG9jYXRpb24sIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YodGhpcy5zYW1wbGVyLmRhdGEpID09ICd1bmRlZmluZWQnIHx8IHRoaXMuc2FtcGxlci5kYXRhID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIuZGF0YSA9IHRleHR1cmVbbmFtZV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZXIubGluayhwcm9ncmFtKTtcbiAgICAgICAgICAgIC8vIH1lbHNle1xuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCd0ZXh0dXJlIGRhdGEgaXMgbnVsbCEhIScpXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKHRleERhdGEpIHtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5jb3B5RnJvbUZCTyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICBjdHguY29weVRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBjdHguUkdCQSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMF0sXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMV0sXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLnVwZGF0ZSA9IGZ1bmN0aW9uKHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRleHR1cmVbbmFtZV0ucmVzaXplID0gZnVuY3Rpb24oZGltLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnbENvbnRleHQuZGVsZXRlVGV4dHVyZSh0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSB0aGlzLnNhbXBsZXIubmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaWZvcm0gc2FtcGxlcjJEICcgKyB0aGlzLnNhbXBsZXIubmFtZSArICc7XFxuJztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dHVyZVtuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZhcnlpbmcoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdmFyeWluZyA9ICh0aGlzIGluc3RhbmNlb2YgVmFyeWluZykgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIHZhcnlpbmcuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICB2YXJ5aW5nW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIHNpemU6IHNpemUgfHwgMSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmxpbmsgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3ZhcnlpbmcgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZTtcbiAgICAgICAgICAgIGlmKHRoaXMuc2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIHRoaXMuc2l6ZSArICddJztcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyeWluZ1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFyeWluZztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1YnJvdXRpbmUoKSB7XG5cbiAgICB2YXIgc3Vicm91dGluZSA9ICh0aGlzIGluc3RhbmNlb2YgU3Vicm91dGluZSkgPyB0aGlzIDoge307XG5cbiAgICBzdWJyb3V0aW5lLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZm46IGZuLFxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInN1YnJvdXRpbmVcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uZm4gPSBmbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3Vicm91dGluZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN1YnJvdXRpbmU7XG59XG4iLCJpbXBvcnQgUmVzb3VyY2UgZnJvbSAnLi9yZXNvdXJjZSc7XG5pbXBvcnQgUHJvZ3JhbSBmcm9tICcuL3Byb2dyYW0nO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuLy8gaW1wb3J0IFJlYWN0aXZlIGZyb20gJy4vcmVhY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9O1xuXG5cbiAgICB2YXIgb3B0aW9ucyA9IGFyZyB8fCB7fSxcbiAgICAgICAgY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXIgfHwgbnVsbCxcbiAgICAgICAgY2FudmFzID0gb3B0aW9ucy5jYW52YXMgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IG51bGwsXG4gICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgfHwge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGN0eCA9IG9wdGlvbnMuY29udGV4dCB8fCBvcHRpb25zLmN0eCB8fCBudWxsLFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYXJlZEZ1bmN0aW9uID0gb3B0aW9ucy5zaGFyZWRGdW5jdGlvbiB8fCB7fTtcblxuXG5cbiAgICBpZiAodHlwZW9mKGNhbnZhcykgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY2FudmFzWzBdID09IFwiI1wiKSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgZWxzZSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnRhaW5lciA9ICh0eXBlb2YoY29udGFpbmVyKSA9PSBcInN0cmluZ1wiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikgOiBjb250YWluZXI7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmIChoZWlnaHQgPT09IG51bGwpIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8vIHdpZHRoIC09IHBhZGRpbmcubGVmdCArIHBhZGRpbmcucmlnaHQ7XG4gICAgLy8gaGVpZ2h0IC09IHBhZGRpbmcudG9wICsgcGFkZGluZy5ib3R0b207XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpbkxlZnQgPSBwYWRkaW5nLmxlZnQgKyBcInB4XCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpblRvcCA9IHBhZGRpbmcudG9wICsgXCJweFwiO1xuXG5cbiAgICBpZiAoY3R4ID09PSBudWxsKVxuICAgICAgICBjdHggPSBzZXR1cFdlYkdMKGNhbnZhcyk7XG4gICAgZmxleGdsLmN0eCA9IGN0eDtcbiAgICBmbGV4Z2wuY2FudmFzID0gY2FudmFzO1xuICAgIGZsZXhnbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7XG4gICAgY3R4Ll9kaWN0ID0gb3B0aW9ucy5lbnYgfHwgb3B0aW9ucy5kaWN0IHx8IG9wdGlvbnMuZGljdGlvbmFyeSB8fCB7fTtcblxuICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2UoY3R4KSxcbiAgICAgICAgZnJhbWVidWZmZXJzID0gbmV3IEZyYW1lYnVmZmVyKGN0eCksXG4gICAgICAgIHByb2dyYW0gPSBuZXcgUHJvZ3JhbShjdHgsIHJlc291cmNlcyksXG4gICAgICAgIHJlYWxQcm9ncmFtID0gbnVsbDtcblxuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cbiAgICBjdHguZXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7XG4gICAgZW5hYmxlRXh0ZW5zaW9uKFtcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdFwiLFxuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiXG4gICAgXSk7XG4gICAgaWYgKGNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cblxuICAgIGZ1bmN0aW9uIHNldHVwV2ViR0woY2FudmFzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IFtcIndlYmdsXCIsIFwiZXhwZXJpbWVudGFsLXdlYmdsXCJdO1xuICAgICAgICB2YXIgZ2wgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlmIChnbCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuYWJsZUV4dGVuc2lvbihleHRlbnNpb25zKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleHRlbnNpb25zKSkgZXh0ZW5zaW9ucyA9IFtleHRlbnNpb25zXTtcbiAgICAgICAgZXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgICAgICAgICAgdmFyIGV4dFByb3BzID0gY3R4LmdldEV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgICAgICAgICAgaWYgKGV4dFByb3BzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0UHJvcHMpLmZvckVhY2goZnVuY3Rpb24oZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHQuaGFzT3duUHJvcGVydHkoZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZXh0W2VwXSA9IGV4dFByb3BzW2VwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZmxleGdsLmVuYWJsZUV4dGVuc2lvbiA9IGVuYWJsZUV4dGVuc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIEF0dHJpYnV0ZXMgaW4gdmVydGV4IGJ1ZmZlciBhcnJheSBzdG9yZWQgaW4gR1BVIG1lbW9yeVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuYXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJhdHRyaWJ1dGVcIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLmF0dHJpYnV0ZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5hdHRyaWJ1dGUsIG5hbWUsIHsgLy9hZnRlciBhbGxvY2F0aW5nLCBmbGV4Z2wgZ2V0cyBuZXcga2V5IGF0dHJpYnV0ZSwgaGVscGluZyBlYXNpbHkgY2hhbmdlIGF0dHJpYnV0ZSBkYXRhLlxuICAgICAgICAgICAgICAgIGdldCgpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldChkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcbiAgICAvLyBmbGV4Z2wuYnVmZmVyID0gZmxleGdsLmF0dHJpYnV0ZTsgLy9hbGlhc1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHVuaWZvcm0gdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudW5pZm9ybSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidW5pZm9ybVwiLCBuYW1lLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgaWYgKCFmbGV4Z2wudW5pZm9ybS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC51bmlmb3JtLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy51bmlmb3JtW25hbWVdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdHguaXNQcm9ncmFtKHJlYWxQcm9ncmFtKSkgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxpbmsocmVhbFByb2dyYW0pOyAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICBmbGV4Z2wudW5pZm9ybS5zZXJpYWxpemUgPSBmdW5jdGlvbihhb2EpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFvYS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHRleHR1cmUgdHlwZTogdW5zaWduZWRfYnl0ZSBvciBmbG9hdCwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW2NoYW5uZWw9J2FscGhhJ10gV2ViR0wgZm9ybWF0cyAocmdiYSwgYWxwaGEpXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbc2FtcGxlcj1udWxsXSBGTGV4R0wgVW5pZm9ybSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC50ZXh0dXJlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSwgZGltLCBjaGFubmVsLCBzYW1wbGVyKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInRleHR1cmVcIiwgbmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC50ZXh0dXJlLCBuYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudGV4dHVyZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wudGV4dHVyZS51cGRhdGUgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS51cGRhdGUoZGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW3R5cGVdIFZhcnlpbmcgdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW3NpemU9MV0gZGF0YSBhcnJheVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnZhcnlpbmcgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInZhcnlpbmdcIiwgbmFtZSwgdHlwZSwgc2l6ZSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZT1udWxsXSBGTGV4R0wgVGV4dHVyZSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmUgfHwgcmVzb3VyY2VzLmFsbG9jYXRlKCd0ZXh0dXJlJywgbmFtZSwgdHlwZSwgZGltLCAncmdiYScsIG51bGwpO1xuICAgICAgICBmcmFtZWJ1ZmZlcnMuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSk7XG5cbiAgICAgICAgaWYgKCFmbGV4Z2wuZnJhbWVidWZmZXIuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuZnJhbWVidWZmZXIsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihuYW1lLCBwcm9ncmFtKSB7XG4gICAgICAgIGZyYW1lYnVmZmVyc1tuYW1lXS5lbmFibGVSZWFkKHByb2dyYW0pO1xuICAgIH1cblxuICAgIGZsZXhnbC5iaW5kRnJhbWVidWZmZXIgPSBmdW5jdGlvbihmYk5hbWUpIHtcbiAgICAgICAgaWYgKGZiTmFtZSA9PT0gbnVsbClcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyc1tmYk5hbWVdLnB0cik7XG4gICAgfVxuXG4gICAgZmxleGdsLnN1YnJvdXRpbmUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJzdWJyb3V0aW5lXCIsIG5hbWUsIHR5cGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wucGFyYW1ldGVyID0gZnVuY3Rpb24oa2V5VmFsdWVQYWlycykge1xuICAgICAgICBPYmplY3Qua2V5cyhrZXlWYWx1ZVBhaXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBrZXlWYWx1ZVBhaXJzW2tleV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjdHguX2RpY3Rba2V5XSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eC5fZGljdCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5VmFsdWVQYWlyc1trZXldW2krK107XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBuZXdBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihjdHguX2RpY3Rba2V5XSkgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGljdEtleXMgPSBPYmplY3Qua2V5cyhjdHguX2RpY3Rba2V5XSk7XG4gICAgICAgICAgICAgICAgZnhnbC51bmlmb3JtKCdkaWN0JytrZXksICdmbG9hdCcsIGRpY3RLZXlzLm1hcChkPT5jdHguX2RpY3Rba2V5XVtkXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5kaWN0aW9uYXJ5ID0gZmxleGdsLnBhcmFtZXRlcjtcbiAgICBmbGV4Z2wuc2hhZGVyID0gcHJvZ3JhbS5zaGFkZXI7XG5cblxuICAgIGZsZXhnbC5hcHAgPSBmdW5jdGlvbihuYW1lLCBzb3VyY2UsIG51bSkge1xuXG4gICAgICAgIC8vIGZiID0gc291cmNlLmZyYW1lYnVmZmVyIHx8IG51bGw7XG5cbiAgICAgICAgaWYobnVtID09PSAwKXtcbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgc291cmNlLnZzb3VyY2UsIHNvdXJjZS5mc291cmNlKTtcbiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgLy8gdGhpcy50ZXh0dXJlWyd1X3RleHR1cmUnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX3N1bV90ZXh0dXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIGlmKG51bSA9PT0gMSl7XG4gICAgICAgICAgICBjdHgudmlld3BvcnQoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCBzb3VyY2UudnNvdXJjZSwgc291cmNlLmZzb3VyY2UpO1xuICAgICAgICAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSBpZihudW0gPT09IDIpe1xuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG5cbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX21lbV90ZXh0dXJlXzEnKTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgc291cmNlLnZzb3VyY2UsIHNvdXJjZS5mc291cmNlKTtcbiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuXG5cbiAgICAgICAgICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9tZW1fdGV4dHVyZV8wJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSBpZihudW0gPT09IDMpe1xuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG5cbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX21lbV90ZXh0dXJlXzAnKTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgc291cmNlLnZzb3VyY2UsIHNvdXJjZS5mc291cmNlKTtcbiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9zdW1fdGV4dHVyZScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYobnVtID09PSA0KXtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpOyBcbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHNvdXJjZS52c291cmNlLCBzb3VyY2UuZnNvdXJjZSk7XG4gICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYobnVtID09PSA1KXtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgc291cmNlLnZzb3VyY2UsIHNvdXJjZS5mc291cmNlKTtcbiAgICAgICAgICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMCcsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoaXMudW5pZm9ybVsndV90ZXh0dXJlJ10ubGluayhyZWFsUHJvZ3JhbSk7ICAgIFxuICAgICAgICAvLyB2YXIgZHJhdyA9IHNvdXJjZS5yZW5kZXIgfHwgc291cmNlLmRyYXc7XG5cbiAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgLy8gICAgIC8vIHZhciBnbCA9IGZsZXhnbC5wcm9ncmFtKG5hbWUpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGRyYXcuY2FsbChjdHgsIGFyZ3MpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgY3R4LmRyYXdBcnJheXMoY3R4LkxJTkVTLCAwLCAyKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGltZW5zaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmxleGdsO1xufVxuIiwiaW1wb3J0IEZsZXhHTCBmcm9tICcuL2ZsZXhnbCc7XG5cbihmdW5jdGlvbiBtYWtlR2xvYmFsKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuRmxleEdMID0gRmxleEdMO1xuICB9XG59KSgpO1xuIiwiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVidWZmZXIoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSAodGhpcyBpbnN0YW5jZW9mIEZyYW1lYnVmZmVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnJhbWVidWZmZXIuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0gPSB7XG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgd2lkdGg6IGRpbVswXSB8fCAxMDI0LFxuICAgICAgICAgICAgaGVpZ2h0OiBkaW1bMV0gfHwgMTAyNCxcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgIC8vIHJlbmRlcmJ1ZmZlcjogY3R4LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgKGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gICAgIHZhciBidWYgPSAodHlwZSA9PSAnZmxvYXQnKSA/XG4gICAgICAgIC8vICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KSA6XG4gICAgICAgIC8vICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGltWzBdICogZGltWzFdICogNCk7XG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID0gVGV4dHVyZShjdHgpLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIFwicmdiYVwiLCBidWYpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gdmFyIHJlbmRlcmJ1ZmZlciA9IGZyYW1lYnVmZmVyW25hbWVdLnJlbmRlcmJ1ZmZlcjtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyW25hbWVdLnB0cik7XG4gICAgICAgIC8vIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgIC8vIGN0eC5yZW5kZXJidWZmZXJTdG9yYWdlKFxuICAgICAgICAvLyAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgLy8gICAgIGN0eC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLndpZHRoLFxuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0uaGVpZ2h0XG4gICAgICAgIC8vICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZS5wdHIsXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIC8vIGN0eC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihcbiAgICAgICAgLy8gICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgLy8gICAgIGN0eC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAvLyAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgLy8gICAgIHJlbmRlcmJ1ZmZlclxuICAgICAgICAvLyApO1xuICAgICAgICAvLyBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUucHRyKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZS5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy50ZXh0dXJlLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh0aGlzLnRleHR1cmUubG9jYXRpb24sIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgLy8gICAgIHRoaXMudGV4dHVyZS5saW5rKHByb2dyYW0pO1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLnJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUucHRyKVxuICAgICAgICAgICAgY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZyYW1lYnVmZmVyO1xufVxuIiwiaW1wb3J0IFNoYWRlciBmcm9tICcuL3NoYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2dyYW0oZ2xDb250ZXh0LCByZXNvdXJjZXMpIHtcblxuICAgIHZhciBwcm9ncmFtID0ge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAga2VybmVscyA9IHt9O1xuICAgICAgICAvLyBzaGFkZXJzID0gbmV3IFNoYWRlcihnbENvbnRleHQsIHJlc291cmNlcyk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNvdXJjZSkge1xuICAgICAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICB2YXIgbmFtZSA9IG5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB2cyA9IHZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZnMgPSBmcyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcblxuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBrZXJuZWxzW25hbWVdID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS52cyA9IHZzO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmZzID0gZnM7XG4gICAgICAgIC8vIGtlcm5lbHNbbmFtZV0udnMgPSAodHlwZW9mIHZzID09IFwib2JqZWN0XCIpID8gdnMgOiBzaGFkZXJzLnZlcnRleFt2c107XG4gICAgICAgIC8vIGtlcm5lbHNbbmFtZV0uZnMgPSAodHlwZW9mIGZzID09IFwib2JqZWN0XCIpID8gZnMgOiBzaGFkZXJzLmZyYWdtZW50W2ZzXTtcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLnZzLmRlcHMpO1xuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS5mcy5kZXBzKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5kZXBzID0gZGVwcztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZERlcHMoc291cmNlLCBkZXBzKXtcbiAgICAgICAgdmFyIHJlID0gL1xccyooYXR0cmlidXRlfHVuaWZvcm0pXFxzK1xcdytcXHMrKFxcdyspLzsgICAgICAgIFxuICAgICAgICBzb3VyY2Uuc3BsaXQoJ1xcbicpLmZvckVhY2goZnVuY3Rpb24odil7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmUuZXhlYyh2KTtcbiAgICAgICAgICAgIGlmKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgZGVwcy5wdXNoKHJlc3VsdFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb2dyYW0udXNlID0gZnVuY3Rpb24obmFtZSwgdnNvdXJjZSwgZnNvdXJjZSkge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LlZFUlRFWF9TSEFERVIsIHZzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIGZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LkZSQUdNRU5UX1NIQURFUiwgZnNvdXJjZSk7XG5cbiAgICAgICAgICAgIHZzLmRlcHMgPSBbXTtcbiAgICAgICAgICAgIGFkZERlcHModnNvdXJjZSwgdnMuZGVwcyk7XG4gICAgICAgICAgICBmcy5kZXBzID0gW107XG4gICAgICAgICAgICBhZGREZXBzKGZzb3VyY2UsIGZzLmRlcHMpO1xuIFxuICAgICAgICAgICAgdGhpcy5jcmVhdGUobmFtZSwgdnMsIGZzKTtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5kZWxldGUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICAgICAgY3R4LmRldGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgZGVsZXRlIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwcm9ncmFtLnNoYWRlciA9IGZ1bmN0aW9uKGFyZywgZm4pIHtcbiAgICAvLyAgICAgdmFyIG9wdGlvbnMgPSBhcmc7XG4gICAgLy8gICAgIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICAvLyAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgLy8gfVxuXG4gICAgLy8gcHJvZ3JhbS52ZXJ0ZXggPSBmdW5jdGlvbihmbikge1xuICAgIC8vICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAvLyAgICAgICAgIHR5cGU6IFwidmVydGV4XCJcbiAgICAvLyAgICAgfTtcbiAgICAvLyAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgLy8gICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgLy8gfVxuXG4gICAgLy8gcHJvZ3JhbS5mcmFnbWVudCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgLy8gICAgIHZhciBvcHRpb25zID0ge1xuICAgIC8vICAgICAgICAgdHlwZTogXCJmcmFnbWVudFwiXG4gICAgLy8gICAgIH07XG4gICAgLy8gICAgIGlmIChmbi5uYW1lKSBvcHRpb25zLm5hbWUgPSBmbi5uYW1lO1xuICAgIC8vICAgICByZXR1cm4gc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgIC8vIH1cblxuICAgIHJldHVybiBwcm9ncmFtO1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==