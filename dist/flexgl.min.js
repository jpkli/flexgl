!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=u(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r=e,a=0;function o(e,n){var i=r[t[e].type.toUpperCase()],a=r[t[e].channel.toUpperCase()],o=t[e].dim[0],u=t[e].dim[1];t[e].data=n,r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texImage2D(r.TEXTURE_2D,0,a,o,u,0,a,i,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)}return t.create=function(i,u,f,c,s,l){var d=t.hasOwnProperty(i)?t[i].index:a++;return t[i]={name:i,index:d,type:u||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:r.createTexture()},o(i,s),null===t[i].sampler?t[i].sampler=n(r).create(i,"sampler2D",t[i]):t[i].sampler.data=t[i],t[i].link=function(e){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=t[i]),this.sampler.link(e)),this},t[i].load=function(e){return o(this.name,e),this},t[i].copyFromFBO=function(){r.bindTexture(r.TEXTURE_2D,this.ptr),r.copyTexImage2D(r.TEXTURE_2D,0,r.RGBA,0,0,this.dim[0],this.dim[1],0),r.bindTexture(r.TEXTURE_2D,null)},t[i].update=function(e,n,i){return function(e,n,i,a){var o=r[t[e].type.toUpperCase()],u=r[t[e].channel.toUpperCase()],f=a[0]||t[e].dim[0],c=a[1]||t[e].dim[1];r.bindTexture(r.TEXTURE_2D,t[e].ptr),r.texSubImage2D(r.TEXTURE_2D,0,i[0],i[1],f,c,u,o,n),r.bindTexture(r.TEXTURE_2D,null)}(this.name,e,n,i),this},t[i].resize=function(e,t){this.dim=e,o(this.name,t)},t[i].delete=function(){e.deleteTexture(this.ptr)},t[i].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},t[i]},t}function a(e){var t=this instanceof a?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new i(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var o=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===o.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}function o(e,t){var r=this instanceof o?this:{},n=e,i=t,a=n._dict||{};r.vertex={},r.fragment={};var u={vertex:n.VERTEX_SHADER,fragment:n.FRAGMENT_SHADER};function f(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(a);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return a[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function c(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=i.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?f(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return r.create=function(e,t){var a=e||{},o=a.name||"default",d=a.type||"vertex",h=a.require||a.deps||[],p=a.precision||"high",m=a.debug||!1,E=a.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=E.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=c(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}()));var b=[],g=[];if(h.forEach(function(e){var t=i.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=c(t.fn.toString());r.length&&(r.forEach(function(e){var t=i.get(e);"subroutine"==t.resourceType&&(b=b.concat(c(t.fn.toString())))}),b=b.concat(r))}}),b.length){var v=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(v)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=f("void","main",E),m&&console.log(y);var T=function(e,t){if(e!==n.VERTEX_SHADER&&e!==n.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+i)}return r}(u[d],y);return T._shaderType=u[d],T.deps=h,T.source=y,r[d][o]=T,T},r}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},u=n.container||null,f=n.canvas||document.createElement("canvas"),c=n.width||null,s=n.height||null,l=n.padding||{left:0,right:0,top:0,bottom:0},d=n.context||n.ctx||null,h=null;n.sharedFunction,"string"==typeof f&&(f="#"==f[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),u&&(u="string"==typeof u?document.getElementById(u):u,null===c&&(c=u.clientWidth),null===s&&(s=u.clientHeight)),f.width=c,f.height=s,f.style.position="absolute",f.style.marginLeft=l.left+"px",f.style.marginTop=l.top+"px",null===d&&(d=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(f)),r.ctx=d,r.canvas=f,d._dict=n.env||n.dict||n.dictionary||{};var p=new a(d),m=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,a,o){if(r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:a[0]||1024,height:a[1]||1024,texture:o||null,renderbuffer:n.createRenderbuffer()},null===r[e].texture){var u="float"==t?new Float32Array(a[0]*a[1]*4):new Uint8Array(a[0]*a[1]*4);r[e].texture=i(n).create(e,t,a,"rgba",u)}var f=r[e].renderbuffer;return n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.bindRenderbuffer(n.RENDERBUFFER,f),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[e].width,r[e].height),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,f),n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(d),E=new function(e,t){var r={},n=d,i={},a=new o(d,t);return r.create=function(e,t,o){e=e||"default",t=t||"default",o=o||"default";var u=[];if(i.hasOwnProperty(e)&&r.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof o?o:a.fragment[o],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);return u=(u=u.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=u,i[e]},r.use=function(e,a,o){return i.hasOwnProperty(e)?(r=i[e],n.useProgram(r),t.link(r,r.deps),r):r.create(e,a,o)},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.shader.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.shader.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(d,p),y=(new o(d,p),d.getExtension("EXT_blend_minmax"));function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=d.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(d.ext[e]=t[e])})})}return y&&(d.MAX_EXT=y.MAX_EXT,d.MIN_EXT=y.MIN_EXT),d.ext=d.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),u&&u.appendChild(f),r.enableExtension=b,r.attribute=function(e,t,n){return p.allocate("attribute",e,t,n),Object.defineProperty(r.attribute,e,{get:function(){return p.attribute[e]},set:function(t){p.attribute[e].load(t)}}),r},r.buffer=r.attribute,r.uniform=function(e,t,n){return p.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return p.uniform[e]},set:function(t){p.uniform[e].load(t),d.isProgram(h)&&p.uniform[e].link(h)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,o){return p.allocate("texture",e,t,i,a,n,o),Object.defineProperty(r.texture,e,{get:function(){return p.texture[e]},set:function(t){p.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){p.texture[e].update(t,r,n)},r.varying=function(e,t,n){return p.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||p.allocate("texture",e,t,n,"rgba",null),m.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return m[e]}}),r},r.framebuffer.enableRead=function(e){m[e].enableRead(h)},r.bindFramebuffer=function(e){null===e?d.bindFramebuffer(d.FRAMEBUFFER,null):d.bindFramebuffer(d.FRAMEBUFFER,m[e].ptr)},r.subroutine=function(e,t,n){return p.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(d._dict[t]=e[t],Array.isArray(d._dict[t])){var r=0;Object.defineProperty(d._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,d._dict[t]=e}})}else if("object"==typeof d._dict[t]){var n=Object.keys(d._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>d._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=E.shader,r.program=function(e,t,r){return h=E.use(e,t,r),d},r.createProgram=function(e,t,r){return h=E.create(e,t,r),d},r.app=function(e,t){var n=r.shader.vertex(t.vs),i=r.shader.fragment(t.fs);t.framebuffer,r.program(e,n,i);var a=t.render||t.draw;return function(t){var n=r.program(e);return a.call(n,t)}},r.dimension=function(){return[f.width,f.height]},r.resources=p,r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmxleGdsLmpzIiwid2VicGFjazovLy8uL3NyYy9idW5kbGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZyYW1lYnVmZmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wcm9ncmFtLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlRleHR1cmUiLCJ0ZXh0dXJlIiwidGV4dHVyZUlEIiwic2V0VGV4dHVyZSIsInRleERhdGEiLCJ0b1VwcGVyQ2FzZSIsImZvcm1hdCIsImNoYW5uZWwiLCJ3aWR0aCIsImRpbSIsImhlaWdodCIsInRleEltYWdlMkQiLCJ0ZXhQYXJhbWV0ZXJpIiwiVEVYVFVSRV9NSU5fRklMVEVSIiwiTkVBUkVTVCIsIlRFWFRVUkVfTUFHX0ZJTFRFUiIsIlRFWFRVUkVfV1JBUF9TIiwiQ0xBTVBfVE9fRURHRSIsIlRFWFRVUkVfV1JBUF9UIiwic2FtcGxlciIsInRleEluZGV4IiwiY3JlYXRlVGV4dHVyZSIsImNvcHlGcm9tRkJPIiwiY29weVRleEltYWdlMkQiLCJSR0JBIiwidXBkYXRlIiwib2Zmc2V0IiwidGV4U3ViSW1hZ2UyRCIsInJlc2l6ZSIsImRlbGV0ZSIsImRlbGV0ZVRleHR1cmUiLCJSZXNvdXJjZSIsInJlc291cmNlIiwiZ3B1UmVzb3VyY2VzIiwiYXR0cmlidXRlIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlSUQiLCJzZXRBdHRyaWJ1dGUiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIlNUQVRJQ19EUkFXIiwiY3JlYXRlQnVmZmVyIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsImFycmF5QnVmZmVyIiwiZGVsZXRlQnVmZmVyIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlcyIsImtleXMiLCJyZXNvdXJjZU5hbWUiLCJTaGFkZXIiLCJnbFJlc291cmNlIiwic2hhZGVyIiwicGFyYW1ldGVycyIsIl9kaWN0IiwidmVydGV4IiwiZnJhZ21lbnQiLCJzaGFkZXJUeXBlIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInRvR0xTTCIsInJldHVyblR5cGUiLCJnbHNsIiwic3RyIiwiZW52UGFyYW0iLCJyZSIsIlJlZ0V4cCIsImpvaW4iLCJyZXBsYWNlIiwibWF0Y2hlZCIsImV4cHIiLCJkdHlwZSIsInRvTG93ZXJDYXNlIiwiYXJncyIsIm1hdGNoIiwiZ2V0RXh0cmFEZXBzIiwiZm5TdHJpbmciLCJleHRyYURlcHMiLCJtYXAiLCJkZWNsYXJlRGVwIiwiZGVwIiwidW5pcXVlRGVwcyIsImRlcHMiLCJuYW1lcyIsImFyZyIsIm9wdGlvbiIsInJlcXVpcmUiLCJwcmVjaXNpb24iLCJkZWJ1ZyIsIm1haW4iLCJzaGFkZXJTb3VyY2UiLCJzb3VyY2VDb2RlIiwic2hhZGVyQXJncyIsInNwbGl0IiwidHJpbSIsInN1YlJvdXRpbmVzIiwiY29uc29sZSIsImxvZyIsInB1c2giLCJzdWJEZXBzIiwic2RlcCIsInNyZXMiLCJhbGxEZXBzIiwiaCIsIl9zaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJsYXN0RXJyb3IiLCJnZXRTaGFkZXJJbmZvTG9nIiwiX3NoYWRlclR5cGUiLCJzb3VyY2UiLCJmbGV4Z2wiLCJ3aW5kb3ciLCJGbGV4R0wiLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJwcm9ncmFtXyIsInNoYXJlZEZ1bmN0aW9uIiwiZiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsImdsIiwiZ2V0Q29udGV4dCIsImVudiIsImRpY3QiLCJkaWN0aW9uYXJ5IiwiZnJhbWVidWZmZXJzIiwiRnJhbWVidWZmZXIiLCJmcmFtZWJ1ZmZlciIsImNyZWF0ZUZyYW1lYnVmZmVyIiwicmVuZGVyYnVmZmVyIiwiY3JlYXRlUmVuZGVyYnVmZmVyIiwiVWludDhBcnJheSIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiYmluZFJlbmRlcmJ1ZmZlciIsIlJFTkRFUkJVRkZFUiIsInJlbmRlcmJ1ZmZlclN0b3JhZ2UiLCJERVBUSF9DT01QT05FTlQxNiIsImZyYW1lYnVmZmVyVGV4dHVyZTJEIiwiQ09MT1JfQVRUQUNITUVOVDAiLCJmcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlciIsIkRFUFRIX0FUVEFDSE1FTlQiLCJlbmFibGVSZWFkIiwiZGVsZXRlUmVuZGVyYnVmZmVyIiwiZGVsZXRlRnJhbWVidWZmZXIiLCJrZXJuZWxzIiwic2hhZGVycyIsInZzIiwiZnMiLCJjcmVhdGVQcm9ncmFtIiwiYXR0YWNoU2hhZGVyIiwibGlua1Byb2dyYW0iLCJnZXRQcm9ncmFtUGFyYW1ldGVyIiwiTElOS19TVEFUVVMiLCJnZXRQcm9ncmFtSW5mb0xvZyIsInVzZSIsInVzZVByb2dyYW0iLCJkZXRhY2hTaGFkZXIiLCJkZWxldGVQcm9ncmFtIiwiYmxlbmRFeHQiLCJnZXRFeHRlbnNpb24iLCJlbmFibGVFeHRlbnNpb24iLCJleHRlbnNpb25zIiwiZXh0ZW5zaW9uIiwiZXh0UHJvcHMiLCJlcCIsImV4dCIsIk1BWF9FWFQiLCJNSU5fRVhUIiwiYXBwZW5kQ2hpbGQiLCJidWZmZXIiLCJpc1Byb2dyYW0iLCJzZXJpYWxpemUiLCJhb2EiLCJmYk5hbWUiLCJwYXJhbWV0ZXIiLCJrZXlWYWx1ZVBhaXJzIiwibmV3QXJyYXkiLCJkaWN0S2V5cyIsImZ4Z2wiLCJhcHAiLCJwcm9wcyIsImRyYXciLCJyZW5kZXIiLCJkaW1lbnNpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksS0FDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxLQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxjQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixZQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxjQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxF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QUE5SCxNQUFBOEgsRUFBQTVILFNBR0F1SCxFQUFBbEUsWUFFQWtFIiwiZmlsZSI6ImZsZXhnbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBVbmlmb3JtKGdsQ29udGV4dCwgbmFtZSwgdHlwZSwgZGF0YSkge1xuXG4gICAgdmFyIHVuaWZvcm0gPSAodGhpcyBpbnN0YW5jZW9mIFVuaWZvcm0pID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemVBcnJheShhcnJheU9mQXJyYXkpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFycmF5T2ZBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGEpe1xuICAgICAgICAgICAgc2EgPSBzYS5jb25jYXQoYSk7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzYTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRVbmlmb3JtKCkge1xuICAgICAgICB2YXIgdHlwZSA9IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbixcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnNpemUsXG4gICAgICAgICAgICBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHZhciBoYXNBcnJheSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBBcnJheS5pc0FycmF5KGQpO30pO1xuICAgICAgICAgICAgaWYoaGFzQXJyYXkpXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKHR5cGUgPT0gJ2Zsb2F0JyB8fCB0eXBlID09ICdpbnQnKSAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSAmJiAhQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKVxuICAgICAgICAgICAgZGF0YSA9IFtkYXRhXTtcblxuICAgICAgICB2YXIgYnVmO1xuICAgICAgICBpZiAodHlwZS5zbGljZSgwLDMpID09ICd2ZWMnIHx8IHR5cGUgPT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsNCkgPT0gJ2l2ZWMnIHx8IHR5cGUgPT0gJ2ludCcpe1xuICAgICAgICAgICAgYnVmID0gbmV3IEludDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdpdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDMpID09ICdtYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtTWF0cml4JyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgZmFsc2UsIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlID09ICdzYW1wbGVyMkQnKSB7XG4gICAgICAgICAgICBpZihkYXRhLmhhc093blByb3BlcnR5KCdyZXNvdXJjZVR5cGUnKSAmJiBkYXRhLnJlc291cmNlVHlwZSA9PSAndGV4dHVyZScpIHtcbiAgICAgICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIGRhdGEucHRyKTtcbiAgICAgICAgICAgICAgICBjdHgudW5pZm9ybTFpKGxvY2F0aW9uLCBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVuaWZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHZhciBoYXNBcnJheSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBBcnJheS5pc0FycmF5KGQpO30pO1xuICAgICAgICAgICAgaWYoaGFzQXJyYXkpXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXSA9IHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQodHlwZS5zbGljZSgzLDQpKSB8fCBwYXJzZUludCh0eXBlLnNsaWNlKDQsNSkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5kYXRhICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHNldFVuaWZvcm0uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd1bmlmb3JtICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbGVuID0gMDtcblxuICAgICAgICAgICAgaWYodGhpcy50eXBlICE9ICdzYW1wbGVyMkQnKSB7XG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9UT0RPOiBmaXggZGVjbGFyYXRpb24gZm9yIG1hdHJpeFxuICAgICAgICAgICAgaWYobGVuID4gMSAmJiB0eXBlICE9ICdtYXQ0Jykge1xuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyBsZW4gKyAnXSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB1bmlmb3JtW25hbWVdO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHVuaWZvcm07XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tIFwiLi91bmlmb3JtXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRleHR1cmUoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdGV4dHVyZSA9ICh0aGlzIGluc3RhbmNlb2YgVGV4dHVyZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgdGV4dHVyZUlEID0gMDtcblxuICAgIGZ1bmN0aW9uIHNldFRleHR1cmUobmFtZSwgdGV4RGF0YSkgXG4gICAge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IHRleHR1cmVbbmFtZV0uZGltWzFdO1xuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGF0YSA9IHRleERhdGE7XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQsIDAsIGZvcm1hdCwgdHlwZSwgdGV4RGF0YSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1MsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfVCwgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHR1cmUobmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gZGltWzBdIHx8IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gZGltWzFdIHx8IHRleHR1cmVbbmFtZV0uZGltWzFdO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4U3ViSW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgb2Zmc2V0WzBdLCBvZmZzZXRbMV0sIHdpZHRoLCBoZWlnaHQsIGZvcm1hdCwgdHlwZSwgdGV4RGF0YSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogQWRkIHN1cHBvcnQgZm9yIHRleHR1cmUgY29tcHJlc3Npb25cbiAgICAvLyBmdW5jdGlvbiBjb21wcmVzc1RleHR1cmUodGV4RGF0YSkge1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBleHQgPSAoXG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIilcbiAgICAvLyAgICAgKTtcbiAgICAvL1xuICAgIC8vICAgICBjdHguY29tcHJlc3NlZFRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGV4dC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVCwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sIHRleHR1cmVbbmFtZV0uZGltWzFdLCAwLCB0ZXhEYXRhKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gfVxuXG4gICAgdGV4dHVyZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIGNoYW5uZWwsIGRhdGEsIHNhbXBsZXIpIHtcbiAgICAgICAgdmFyIHRleEluZGV4ID0gKHRleHR1cmUuaGFzT3duUHJvcGVydHkobmFtZSkpID8gdGV4dHVyZVtuYW1lXS5pbmRleCA6IHRleHR1cmVJRCsrO1xuICAgICAgICB0ZXh0dXJlW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGluZGV4OiB0ZXhJbmRleCxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgZGltOiBkaW0gfHwgWzUxMiwgNTEyXSxcbiAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwgfHwgXCJhbHBoYVwiLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsLFxuICAgICAgICAgICAgc2FtcGxlcjogc2FtcGxlciB8fCBudWxsLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlVGV4dHVyZSgpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaWYoZGF0YSAhPT0gbnVsbCAmJiBkYXRhLmxlbmd0aClcbiAgICAgICAgc2V0VGV4dHVyZShuYW1lLCBkYXRhKTtcblxuICAgICAgICBpZiAodGV4dHVyZVtuYW1lXS5zYW1wbGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPSBVbmlmb3JtKGN0eCkuY3JlYXRlKG5hbWUsICdzYW1wbGVyMkQnLCB0ZXh0dXJlW25hbWVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlci5kYXRhID0gdGV4dHVyZVtuYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMucHRyKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC51bmlmb3JtMWkodGhpcy5sb2NhdGlvbiwgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZih0aGlzLnNhbXBsZXIuZGF0YSkgPT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zYW1wbGVyLmRhdGEgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlci5kYXRhID0gdGV4dHVyZVtuYW1lXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlci5saW5rKHByb2dyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxvYWQgPSBmdW5jdGlvbih0ZXhEYXRhKSB7XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uY29weUZyb21GQk8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgY3R4LmNvcHlUZXhJbWFnZTJEKFxuICAgICAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgY3R4LlJHQkEsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzBdLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS51cGRhdGUgPSBmdW5jdGlvbih0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICAgICAgdXBkYXRlVGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0ZXh0dXJlW25hbWVdLnJlc2l6ZSA9IGZ1bmN0aW9uKGRpbSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kaW0gPSBkaW07XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2xDb250ZXh0LmRlbGV0ZVRleHR1cmUodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gdGhpcy5zYW1wbGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmlmb3JtIHNhbXBsZXIyRCAnICsgdGhpcy5zYW1wbGVyLm5hbWUgKyAnO1xcbic7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tICcuL3VuaWZvcm0nO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL2F0dHJpYnV0ZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuaW1wb3J0IFZhcnlpbmcgZnJvbSAnLi92YXJ5aW5nJztcbmltcG9ydCBTdWJyb3V0aW5lIGZyb20gJy4vc3Vicm91dGluZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIHJlc291cmNlID0gKHRoaXMgaW5zdGFuY2VvZiBSZXNvdXJjZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGdwdVJlc291cmNlcyA9IHt9O1xuXG4gICAgcmVzb3VyY2UudW5pZm9ybSA9IG5ldyBVbmlmb3JtKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UuYXR0cmlidXRlID0gbmV3IEF0dHJpYnV0ZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnRleHR1cmUgPSBuZXcgVGV4dHVyZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnZhcnlpbmcgPSBuZXcgVmFyeWluZyhnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnN1YnJvdXRpbmUgPSBuZXcgU3Vicm91dGluZSgpO1xuXG4gICAgdmFyIHJlc291cmNlVHlwZXMgPSBbJ3VuaWZvcm0nLCAnYXR0cmlidXRlJywgJ3RleHR1cmUnLCAndmFyeWluZycsICdzdWJyb3V0aW5lJ107XG5cbiAgICByZXNvdXJjZS5hbGxvY2F0ZSA9IGZ1bmN0aW9uKHR5cGUpIFxuICAgIHtcbiAgICAgICAgaWYgKHJlc291cmNlVHlwZXMuaW5kZXhPZih0eXBlKSA9PT0gLTEpICB7IHRocm93IEVycm9yKFwiRXJyb3I6IEludmFsaWQgcmVzb3VyY2UgdHlwZTogXCIgKyB0eXBlKTsgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlW3R5cGVdLmNyZWF0ZS5hcHBseShudWxsLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgcmVzLnJlc291cmNlVHlwZSA9IHR5cGU7XG4gICAgICAgIGdwdVJlc291cmNlc1tyZXMubmFtZV0gPSByZXM7XG4gICAgICAgIGlmICghZ3B1UmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlcy5uYW1lKSkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShncHVSZXNvdXJjZXMsIHJlcy5uYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGdwdVJlc291cmNlc1tyZXMubmFtZV07fSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHsgZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXS5sb2FkKGRhdGEpO31cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHJlc291cmNlLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtLCByZXNvdXJjZXMpIFxuICAgIHtcbiAgICAgICAgdmFyIHJlcXVpcmVkUmVzb3VyY2VzID0gKEFycmF5LmlzQXJyYXkocmVzb3VyY2VzKSkgPyByZXNvdXJjZXMgOiBPYmplY3Qua2V5cyhncHVSZXNvdXJjZXMpO1xuICAgICAgICByZXF1aXJlZFJlc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgaWYgKGdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU5hbWUpKSB7Z3B1UmVzb3VyY2VzW3Jlc291cmNlTmFtZV0ubGluayhwcm9ncmFtKTt9XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHJlc291cmNlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtyZXR1cm4gZ3B1UmVzb3VyY2VzW25hbWVdO31cbiAgICByZXNvdXJjZS5jcmVhdGUgPSByZXNvdXJjZS5hbGxvY2F0ZTtcbiAgICByZXR1cm4gcmVzb3VyY2U7XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXR0cmlidXRlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIGF0dHJpYnV0ZSA9ICh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBhdHRyaWJ1dGVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBpZiggQXJyYXkuaXNBcnJheShkYXRhKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkgKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZVtuYW1lXS5wdHIpO1xuICAgICAgICAgICAgY3R4LmJ1ZmZlckRhdGEoY3R4LkFSUkFZX0JVRkZFUiwgZGF0YSwgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF0dHJpYnV0ZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IGF0dHJpYnV0ZUlEKyssXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVCdWZmZXIoKSxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpIFxuICAgICAgICAgICAge3NldEF0dHJpYnV0ZShuYW1lLCBkYXRhKTt9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSBcbiAgICAgICAge1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5sb2NhdGlvbiwgdGhpcy5zaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxvYWQgPSBmdW5jdGlvbihhcnJheUJ1ZmZlcikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkgXG4gICAgICAgICAgICB7cmV0dXJuICdhdHRyaWJ1dGUgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSArICc7XFxuJzt9XG4gICAgICAgIFxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIFxuICAgICAgICAgICAge2N0eC5kZWxldGVCdWZmZXIodGhpcy5wdHIpO31cblxuICAgICAgICByZXR1cm4gYXR0cmlidXRlW25hbWVdO1xuICAgIH07XG5cbiAgICByZXR1cm4gYXR0cmlidXRlO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVmFyeWluZyhnbENvbnRleHQpIHtcblxuICAgIHZhciB2YXJ5aW5nID0gKHRoaXMgaW5zdGFuY2VvZiBWYXJ5aW5nKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgdmFyeWluZy5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHZhcnlpbmdbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSB8fCAxLFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0ubGluayA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndmFyeWluZyAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lO1xuICAgICAgICAgICAgaWYodGhpcy5zaXplID4gMSlcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgdGhpcy5zaXplICsgJ10nO1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YXJ5aW5nW25hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB2YXJ5aW5nO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU3Vicm91dGluZSgpIHtcblxuICAgIHZhciBzdWJyb3V0aW5lID0gKHRoaXMgaW5zdGFuY2VvZiBTdWJyb3V0aW5lKSA/IHRoaXMgOiB7fTtcblxuICAgIHN1YnJvdXRpbmUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgc3Vicm91dGluZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBmbjogZm4sXG4gICAgICAgICAgICByZXNvdXJjZVR5cGU6IFwic3Vicm91dGluZVwiXG4gICAgICAgIH07XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxvYWQgPSBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgc3Vicm91dGluZVtuYW1lXS5mbiA9IGZuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm4udG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdWJyb3V0aW5lW25hbWVdO1xuICAgIH07XG5cbiAgICByZXR1cm4gc3Vicm91dGluZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoYWRlcihnbENvbnRleHQsIGdsUmVzb3VyY2UpIHtcbiAgICBcbiAgICB2YXIgc2hhZGVyID0gKHRoaXMgaW5zdGFuY2VvZiBTaGFkZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQsXG4gICAgICAgIHJlc291cmNlID0gZ2xSZXNvdXJjZSxcbiAgICAgICAgcGFyYW1ldGVycyA9IGN0eC5fZGljdCB8fCB7fTtcblxuICAgIHNoYWRlci52ZXJ0ZXggPSB7fTtcbiAgICBzaGFkZXIuZnJhZ21lbnQgPSB7fTtcblxuICAgIHZhciBzaGFkZXJUeXBlID0ge1xuICAgICAgICB2ZXJ0ZXg6IGN0eC5WRVJURVhfU0hBREVSLFxuICAgICAgICBmcmFnbWVudDogY3R4LkZSQUdNRU5UX1NIQURFUlxuICAgIH07XG5cbiAgICAvLyBDb252ZXJ0IEpTIGZ1bmN0aW9ucyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gdG9HTFNMKHJldHVyblR5cGUsIG5hbWUsIGZuKXtcblxuICAgICAgICB2YXIgZ2xzbCA9IHJldHVyblR5cGUgKyAnICcgK1xuICAgICAgICAgICAgbmFtZSArICcoJyArIGFwcGx5RW52UGFyYW1ldGVycyhmbi50b1N0cmluZygpKVxuICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL3ZhclxccysoW1xcd3xcXGRdKylcXHMqPVxccypuZXdcXHMrKFtcXHd8XFxkXSspXFwoKC4qKVxcKS9nLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV4cHIsIG5hbWUsIGR0eXBlLCB2YWx1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJ0cztcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IFtkdHlwZS50b0xvd2VyQ2FzZSgpLCBuYW1lLCAnPScsIHZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZV07XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5yZXBsYWNlKC9mb3JcXHMqXFwoXFxzKnZhclxccysvZywgJ2ZvcihpbnQgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC92YXJcXHMvZywgJ2Zsb2F0ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdGhpcy4vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwkKC4qKVxcKCguKilcXClcXHMqKD18OykvZywgXCIkMSAkMiAkM1wiKTtcbiAgICAgICAgICAgIC8vIC5yZXBsYWNlKC9cXCQoLio/KVxcLi9nLCBcIiQxIFwiKVxuXG4gICAgICAgIGlmKG5hbWUgPT0gXCJtYWluXCIpIHtcbiAgICAgICAgICAgIGdsc2wgPSBnbHNsLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKnsvLCAnKXsnKSArIFwiXFxuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGdsc2wubWF0Y2goL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8pWzFdO1xuXG4gICAgICAgICAgICBpZihhcmdzICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBhcmdzID0gYXJncy5yZXBsYWNlKC9cXCQoW1xcd3xcXGRdKylfL2csIFwiJDEgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2xzbCA9IGdsc2xcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvZnVuY3Rpb24uKlxcKFxccyooW1xcc1xcU10qPylcXHMqXFwpLywgYXJncysnKScpICsgXCJcXG5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2xzbDtcbiAgICB9XG5cbiAgICAvL3NldCBwYXJhbWV0ZXJzIGluIEpTIGZ1bmN0aW9ucyBiZWZvcmUgY29udmVydGluZyB0byBHTFNMIGNvZGVzXG4gICAgZnVuY3Rpb24gYXBwbHlFbnZQYXJhbWV0ZXJzKHN0cil7XG4gICAgICAgIC8vZmluZCBhbGwgJCguLi4pIGFuZCByZXBsYWNlIHRoZW0gd2l0aCBwYXJhbWV0ZXJzXG4gICAgICAgIHZhciBlbnZQYXJhbSA9IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpO1xuICAgICAgICBpZihlbnZQYXJhbS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlBhcmFtLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmUsIGZ1bmN0aW9uKG1hdGNoZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgdW5pZm9ybXMgdG8gYmUgdXNlZCBhcyBwYXJhbWV0ZXJzIGluIHNoYWRlcnMsIGxpa2UgJCh1bmlmb3JtTmFtZSlcbiAgICAgICAgLy8gdmFyIGVudlVuaWZvcm1zID0gT2JqZWN0LmtleXMocmVzb3VyY2UudW5pZm9ybSk7XG4gICAgICAgIC8vIHJlID0gbmV3IFJlZ0V4cChcIlxcXFwkXFxcXCgoXCIrZW52VW5pZm9ybXMuam9pbihcInxcIikrXCIpXFxcXClcIixcImdcIik7XG4gICAgICAgIC8vIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgLy8gICAgIHJldHVybiByZXNvdXJjZS51bmlmb3JtW21hdGNoZWQuc2xpY2UoMixtYXRjaGVkLmxlbmd0aC0xKV0uZGF0YTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21waWxlKHNoYWRlclR5cGUsIHNoYWRlclNvdXJjZSkge1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gY3R4LlZFUlRFWF9TSEFERVIgJiYgc2hhZGVyVHlwZSAhPT0gY3R4LkZSQUdNRU5UX1NIQURFUikge1xuICAgICAgICAgICAgdGhyb3cgKFwiRXJyb3I6IHVua25vd24gc2hhZGVyIHR5cGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9zaGFkZXIgPSBjdHguY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpO1xuICAgICAgICBjdHguc2hhZGVyU291cmNlKF9zaGFkZXIsIHNoYWRlclNvdXJjZSk7XG4gICAgICAgIGN0eC5jb21waWxlU2hhZGVyKF9zaGFkZXIpO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBjb21waWxlIHN0YXR1cywgZ2V0IGNvbXBpbGUgZXJyb3IgaWYgYW55XG4gICAgICAgIHZhciBjb21waWxlZCA9IGN0eC5nZXRTaGFkZXJQYXJhbWV0ZXIoX3NoYWRlciwgY3R4LkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFjb21waWxlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRTaGFkZXJJbmZvTG9nKF9zaGFkZXIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2hhZGVyU291cmNlICsgJ1xcbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb21waWxpbmcgc2hhZGVyICdcIiArIF9zaGFkZXIgKyBcIic6XCIgKyBsYXN0RXJyb3IpO1xuXG4gICAgICAgICAgICBjdHguZGVsZXRlU2hhZGVyKF9zaGFkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gX3NoYWRlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXREZXBzKGZuKSB7XG4gICAgICAgIHZhciBkZXBzID0gW10sXG4gICAgICAgICAgICBzb3VyY2VDb2RlID0gZm4udG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNoYWRlckFyZ3MgPSBzb3VyY2VDb2RlLm1hdGNoKC9mdW5jdGlvblxccy4qP1xcKChbXildKilcXCkvKSxcbiAgICAgICAgICAgIGFyZ3MgPSAoc2hhZGVyQXJncyAhPT0gbnVsbCAmJiBzaGFkZXJBcmdzLmxlbmd0aCkgPyBzaGFkZXJBcmdzWzFdIDogW107XG4gICAgICAgIC8vIGFyZ3MgPSBhcmdzLnJlcGxhY2UoLyg/OlxcclxcbnxcXHJ8XFxufFxccykvZywgJycpO1xuICAgICAgICAvL1xuICAgICAgICBpZihhcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGFyZ3Muc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5yZXBsYWNlKC9cXC9cXCouKlxcKlxcLy8sICcnKS50cmltKCk7XG4gICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IGdldEV4dHJhRGVwcyhzb3VyY2VDb2RlKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGV4dHJhRGVwc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRlcHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RXh0cmFEZXBzKGZuU3RyaW5nKSB7XG4gICAgICAgIHZhciBleHRyYURlcHMgPSBmblN0cmluZy5tYXRjaCgvdGhpc1xcLihcXHcrKS9nKTtcbiAgICAgICAgaWYoZXh0cmFEZXBzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMubWFwKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBkLnNsaWNlKDUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dHJhRGVwcyB8fCBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWNsYXJlRGVwKGRlcCkge1xuICAgICAgICB2YXIgcmVzID0gcmVzb3VyY2UuZ2V0KGRlcCk7XG4gICAgICAgIGlmKHR5cGVvZiByZXMgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNvdXJjZS9kZXBlbmRlbmNlIFwiJyArIGRlcCArICdcIiBpcyBub3QgZm91bmQuJyk7XG4gICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgcmV0dXJuIHRvR0xTTChyZXMudHlwZSwgcmVzLm5hbWUsIHJlcy5mbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiByZXMuaGVhZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlRGVwcyhkZXBzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IHt9O1xuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZCwgaSl7XG4gICAgICAgICAgICBuYW1lc1tkXSA9IGk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhuYW1lcyk7XG4gICAgfVxuXG4gICAgc2hhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKGFyZywgZm4pe1xuICAgICAgICB2YXIgb3B0aW9uID0gYXJnIHx8IHt9LFxuICAgICAgICAgICAgbmFtZSA9IG9wdGlvbi5uYW1lIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgdHlwZSA9IG9wdGlvbi50eXBlIHx8IFwidmVydGV4XCIsXG4gICAgICAgICAgICBkZXBzID0gb3B0aW9uLnJlcXVpcmUgfHwgb3B0aW9uLmRlcHMgfHwgW10sXG4gICAgICAgICAgICBwcmVjaXNpb24gPSBvcHRpb24ucHJlY2lzaW9uIHx8IFwiaGlnaFwiLFxuICAgICAgICAgICAgZGVidWcgPSBvcHRpb24uZGVidWcgfHwgZmFsc2UsXG4gICAgICAgICAgICBtYWluID0gb3B0aW9uLm1haW4gfHwgZm4gfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXIgc2hhZGVyU291cmNlID0gJ3ByZWNpc2lvbiAnICsgcHJlY2lzaW9uICsgJ3AgZmxvYXQ7XFxuJztcblxuICAgICAgICBpZihkZXBzLmxlbmd0aCA9PT0gMCkgZGVwcyA9IHVuaXF1ZURlcHMoZ2V0RGVwcyhtYWluKSk7XG5cbiAgICAgICAgLy9nZXQgZGVwZW5kZW5jZSBmcm9tIHN1YnJvdXRpbmVzIGlmIGFueVxuICAgICAgICB2YXIgZXh0cmFEZXBzID0gW10sXG4gICAgICAgICAgICBzdWJSb3V0aW5lcyA9IFtdO1xuXG4gICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICAgICAgaWYodHlwZW9mIHJlcyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlcCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IgKCdFcnJvciEgVW5kZWZpbmVkIHZhcmlhYmxlIGluIHNoYWRlcjogJysgIGRlcC5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHJlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKSB7XG4gICAgICAgICAgICAgICAgc3ViUm91dGluZXMucHVzaChyZXMubmFtZSk7XG4gICAgICAgICAgICAgICAgdmFyIHN1YkRlcHMgPSBnZXRFeHRyYURlcHMocmVzLmZuLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGlmKHN1YkRlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETzogbWFrZSB0aGlzIHJlY3Vyc2l2ZSB0byBjaGVjayBhbGwgc3Vicm91dGluZSBkZXBzXG4gICAgICAgICAgICAgICAgICAgIHN1YkRlcHMuZm9yRWFjaChmdW5jdGlvbihzZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmVzID0gcmVzb3VyY2UuZ2V0KHNkZXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3Jlcy5yZXNvdXJjZVR5cGUgPT0gJ3N1YnJvdXRpbmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoZ2V0RXh0cmFEZXBzKHNyZXMuZm4udG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhRGVwcyA9IGV4dHJhRGVwcy5jb25jYXQoc3ViRGVwcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBhbGxEZXBzID0gZXh0cmFEZXBzXG4gICAgICAgICAgICAvLyAuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgLy8gICAgIHJldHVybiBkZXBzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIC5jb25jYXQoZGVwcy5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1YlJvdXRpbmVzLmluZGV4T2YoZCkgPT09IC0xO1xuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuY29uY2F0KHN1YlJvdXRpbmVzKTtcblxuICAgICAgICAgICAgZGVwcyA9IHVuaXF1ZURlcHMoYWxsRGVwcyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGVwcykpe1xuICAgICAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYodHlwZW9mKGRlcHMpID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkZXBzKS5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlVHlwZSl7XG4gICAgICAgICAgICAgICAgZGVwc1tyZXNvdXJjZVR5cGVdLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyU291cmNlICs9IGRlY2xhcmVEZXAoZGVwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBzaGFkZXJTb3VyY2UgKz0gdG9HTFNMKCd2b2lkJywgJ21haW4nLCBtYWluKTtcbiAgICAgICAgaWYoZGVidWcpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UpO1xuICAgICAgICB2YXIgX3NoYWRlciA9IGNvbXBpbGUoc2hhZGVyVHlwZVt0eXBlXSwgc2hhZGVyU291cmNlKTtcbiAgICAgICAgX3NoYWRlci5fc2hhZGVyVHlwZSA9IHNoYWRlclR5cGVbdHlwZV07XG4gICAgICAgIF9zaGFkZXIuZGVwcyA9IGRlcHM7XG4gICAgICAgIF9zaGFkZXIuc291cmNlID0gc2hhZGVyU291cmNlO1xuICAgICAgICBzaGFkZXJbdHlwZV1bbmFtZV0gPSBfc2hhZGVyO1xuICAgICAgICByZXR1cm4gX3NoYWRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hhZGVyO1xufVxuIiwiaW1wb3J0IFJlc291cmNlIGZyb20gJy4vcmVzb3VyY2UnO1xuaW1wb3J0IFByb2dyYW0gZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9zaGFkZXInO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9LFxuICAgICAgICBvcHRpb25zID0gYXJnIHx8IHt9LFxuICAgICAgICBjb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lciB8fCBudWxsLFxuICAgICAgICBjYW52YXMgPSBvcHRpb25zLmNhbnZhcyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLFxuICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGggfHwgbnVsbCxcbiAgICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgfHwgbnVsbCxcbiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyB8fCB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgfSxcbiAgICAgICAgY3R4ID0gb3B0aW9ucy5jb250ZXh0IHx8IG9wdGlvbnMuY3R4IHx8IG51bGwsXG4gICAgICAgIGtlcm5lbHMgPSB7fSxcbiAgICAgICAgcHJvZ3JhbV8gPSBudWxsLFxuICAgICAgICBzaGFyZWRGdW5jdGlvbiA9IG9wdGlvbnMuc2hhcmVkRnVuY3Rpb24gfHwge307XG5cblxuICAgIGlmICh0eXBlb2YoY2FudmFzKSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmIChjYW52YXNbMF0gPT0gXCIjXCIpIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcy5zdWJzdHJpbmcoMSkpO1xuICAgICAgICBlbHNlIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhdm5hcyk7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29udGFpbmVyID0gKHR5cGVvZihjb250YWluZXIpID09IFwic3RyaW5nXCIpID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyKSA6IGNvbnRhaW5lcjtcbiAgICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcbiAgICAgICAgaWYgKGhlaWdodCA9PT0gbnVsbCkgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgLy8gd2lkdGggLT0gcGFkZGluZy5sZWZ0ICsgcGFkZGluZy5yaWdodDtcbiAgICAvLyBoZWlnaHQgLT0gcGFkZGluZy50b3AgKyBwYWRkaW5nLmJvdHRvbTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luTGVmdCA9IHBhZGRpbmcubGVmdCArIFwicHhcIjtcbiAgICBjYW52YXMuc3R5bGUubWFyZ2luVG9wID0gcGFkZGluZy50b3AgKyBcInB4XCI7XG5cbiAgICBpZiAoY3R4ID09PSBudWxsKVxuICAgICAgICBjdHggPSBzZXR1cFdlYkdMKGNhbnZhcyk7XG4gICAgZmxleGdsLmN0eCA9IGN0eDtcbiAgICBmbGV4Z2wuY2FudmFzID0gY2FudmFzO1xuXG4gICAgY3R4Ll9kaWN0ID0gb3B0aW9ucy5lbnYgfHwgb3B0aW9ucy5kaWN0IHx8IG9wdGlvbnMuZGljdGlvbmFyeSB8fCB7fTtcblxuXG4gICAgdmFyIHJlc291cmNlcyA9IG5ldyBSZXNvdXJjZShjdHgpLFxuICAgICAgICBmcmFtZWJ1ZmZlcnMgPSBuZXcgRnJhbWVidWZmZXIoY3R4KSxcbiAgICAgICAgcHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGN0eCwgcmVzb3VyY2VzKSxcbiAgICAgICAgc2hhZGVycyA9IG5ldyBTaGFkZXIoY3R4LCByZXNvdXJjZXMpO1xuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cblxuICAgIGN0eC5leHQgPSBjdHguZ2V0RXh0ZW5zaW9uKFwiQU5HTEVfaW5zdGFuY2VkX2FycmF5c1wiKTtcbiAgICBlbmFibGVFeHRlbnNpb24oW1xuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0XCIsXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdFwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRfbGluZWFyXCJcbiAgICBdKTtcblxuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgZnVuY3Rpb24gc2V0dXBXZWJHTChjYW52YXMpIHtcbiAgICAgICAgdmFyIG5hbWVzID0gW1wid2ViZ2xcIiwgXCJleHBlcmltZW50YWwtd2ViZ2xcIl07XG4gICAgICAgIHZhciBnbCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dChuYW1lc1tpXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgaWYgKGdsKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2w7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5hYmxlRXh0ZW5zaW9uKGV4dGVuc2lvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV4dGVuc2lvbnMpKSBleHRlbnNpb25zID0gW2V4dGVuc2lvbnNdO1xuICAgICAgICBleHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgZXh0UHJvcHMgPSBjdHguZ2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gICAgICAgICAgICBpZiAoZXh0UHJvcHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRQcm9wcykuZm9yRWFjaChmdW5jdGlvbihlcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV4dC5oYXNPd25Qcm9wZXJ0eShlcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5leHRbZXBdID0gZXh0UHJvcHNbZXBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmF0dHJpYnV0ZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMuYXR0cmlidXRlW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG4gICAgZmxleGdsLmJ1ZmZlciA9IGZsZXhnbC5hdHRyaWJ1dGU7IC8vYWxpYXNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB1bmlmb3JtIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnVuaWZvcm0gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInVuaWZvcm1cIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLnVuaWZvcm0uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudW5pZm9ybSwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudW5pZm9ybVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmlzUHJvZ3JhbShwcm9ncmFtXykpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5saW5rKHByb2dyYW1fKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICBmbGV4Z2wudW5pZm9ybS5zZXJpYWxpemUgPSBmdW5jdGlvbihhb2EpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFvYS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHRleHR1cmUgdHlwZTogdW5zaWduZWRfYnl0ZSBvciBmbG9hdCwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW2NoYW5uZWw9J2FscGhhJ10gV2ViR0wgZm9ybWF0cyAocmdiYSwgYWxwaGEpXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbc2FtcGxlcj1udWxsXSBGTGV4R0wgVW5pZm9ybSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC50ZXh0dXJlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSwgZGltLCBjaGFubmVsLCBzYW1wbGVyKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInRleHR1cmVcIiwgbmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC50ZXh0dXJlLCBuYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudGV4dHVyZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wudGV4dHVyZS51cGRhdGUgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS51cGRhdGUoZGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW3R5cGVdIFZhcnlpbmcgdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW3NpemU9MV0gZGF0YSBhcnJheVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnZhcnlpbmcgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInZhcnlpbmdcIiwgbmFtZSwgdHlwZSwgc2l6ZSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZT1udWxsXSBGTGV4R0wgVGV4dHVyZSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmUgfHwgcmVzb3VyY2VzLmFsbG9jYXRlKCd0ZXh0dXJlJywgbmFtZSwgdHlwZSwgZGltLCAncmdiYScsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVycy5jcmVhdGUobmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKTtcbiAgICAgICAgaWYgKCFmbGV4Z2wuZnJhbWVidWZmZXIuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuZnJhbWVidWZmZXIsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGZyYW1lYnVmZmVyc1tuYW1lXS5lbmFibGVSZWFkKHByb2dyYW1fKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuYmluZEZyYW1lYnVmZmVyID0gZnVuY3Rpb24oZmJOYW1lKSB7XG4gICAgICAgIGlmIChmYk5hbWUgPT09IG51bGwpXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcnNbZmJOYW1lXS5wdHIpO1xuICAgIH1cblxuICAgIGZsZXhnbC5zdWJyb3V0aW5lID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwic3Vicm91dGluZVwiLCBuYW1lLCB0eXBlLCBmbik7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnBhcmFtZXRlciA9IGZ1bmN0aW9uKGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoa2V5VmFsdWVQYWlycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0ga2V5VmFsdWVQYWlyc1trZXldO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3R4Ll9kaWN0W2tleV0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHguX2RpY3QsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlUGFpcnNba2V5XVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0gbmV3QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YoY3R4Ll9kaWN0W2tleV0pID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpY3RLZXlzID0gT2JqZWN0LmtleXMoY3R4Ll9kaWN0W2tleV0pO1xuICAgICAgICAgICAgICAgIGZ4Z2wudW5pZm9ybSgnZGljdCcra2V5LCAnZmxvYXQnLCBkaWN0S2V5cy5tYXAoZD0+Y3R4Ll9kaWN0W2tleV1bZF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGljdGlvbmFyeSA9IGZsZXhnbC5wYXJhbWV0ZXI7XG5cbiAgICBmbGV4Z2wuc2hhZGVyID0gcHJvZ3JhbS5zaGFkZXI7XG5cbiAgICBmbGV4Z2wucHJvZ3JhbSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICBwcm9ncmFtXyA9IHByb2dyYW0udXNlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuXG4gICAgZmxleGdsLmNyZWF0ZVByb2dyYW0gPSBmdW5jdGlvbihuYW1lLCB2cywgZnMpIHtcbiAgICAgICAgcHJvZ3JhbV8gPSBwcm9ncmFtLmNyZWF0ZShuYW1lLCB2cywgZnMpO1xuICAgICAgICByZXR1cm4gY3R4O1xuICAgIH1cblxuICAgIGZsZXhnbC5hcHAgPSBmdW5jdGlvbihuYW1lLCBwcm9wcykge1xuICAgICAgICB2YXIgdnMgPSBmbGV4Z2wuc2hhZGVyLnZlcnRleChwcm9wcy52cyksXG4gICAgICAgICAgICBmcyA9IGZsZXhnbC5zaGFkZXIuZnJhZ21lbnQocHJvcHMuZnMpLFxuICAgICAgICAgICAgZmIgPSBwcm9wcy5mcmFtZWJ1ZmZlciB8fCBudWxsO1xuXG4gICAgICAgIGZsZXhnbC5wcm9ncmFtKG5hbWUsIHZzLCBmcyk7XG5cbiAgICAgICAgdmFyIGRyYXcgPSBwcm9wcy5yZW5kZXIgfHwgcHJvcHMuZHJhdztcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIGdsID0gZmxleGdsLnByb2dyYW0obmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gZHJhdy5jYWxsKGdsLCBhcmdzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZsZXhnbC5kaW1lbnNpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdO1xuICAgIH1cblxuICAgIGZsZXhnbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7XG5cbiAgICByZXR1cm4gZmxleGdsO1xufVxuIiwiaW1wb3J0IEZsZXhHTCBmcm9tICcuL2ZsZXhnbCc7XG5cbihmdW5jdGlvbiBtYWtlR2xvYmFsKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuRmxleEdMID0gRmxleEdMO1xuICB9XG59KSgpO1xuIiwiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRnJhbWVidWZmZXIoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSAodGhpcyBpbnN0YW5jZW9mIEZyYW1lYnVmZmVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnJhbWVidWZmZXIuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGltLCB0ZXh0dXJlKSB7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0gPSB7XG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVGcmFtZWJ1ZmZlcigpLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgd2lkdGg6IGRpbVswXSB8fCAxMDI0LFxuICAgICAgICAgICAgaGVpZ2h0OiBkaW1bMV0gfHwgMTAyNCxcbiAgICAgICAgICAgIHRleHR1cmU6IHRleHR1cmUgfHwgbnVsbCxcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlcjogY3R4LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpLFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSAodHlwZSA9PSAnZmxvYXQnKSA/XG4gICAgICAgICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KSA6XG4gICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGltWzBdICogZGltWzFdICogNCk7XG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID0gVGV4dHVyZShjdHgpLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIFwicmdiYVwiLCBidWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbmRlcmJ1ZmZlciA9IGZyYW1lYnVmZmVyW25hbWVdLnJlbmRlcmJ1ZmZlcjtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgIGN0eC5yZW5kZXJidWZmZXJTdG9yYWdlKFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9DT01QT05FTlQxNixcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLndpZHRoLFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uaGVpZ2h0XG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclRleHR1cmUyRChcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZS5wdHIsXG4gICAgICAgICAgICAwXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihcbiAgICAgICAgICAgIGN0eC5GUkFNRUJVRkZFUixcbiAgICAgICAgICAgIGN0eC5ERVBUSF9BVFRBQ0hNRU5ULFxuICAgICAgICAgICAgY3R4LlJFTkRFUkJVRkZFUixcbiAgICAgICAgICAgIHJlbmRlcmJ1ZmZlclxuICAgICAgICApO1xuICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIG51bGwpO1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnRleHR1cmUucHRyKTtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZS5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy50ZXh0dXJlLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnVuaWZvcm0xaSh0aGlzLnRleHR1cmUubG9jYXRpb24sIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMucmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZS5wdHIpXG4gICAgICAgICAgICBjdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcltuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJhbWVidWZmZXI7XG59XG4iLCJpbXBvcnQgU2hhZGVyIGZyb20gJy4vc2hhZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUHJvZ3JhbShnbENvbnRleHQsIHJlc291cmNlcykge1xuXG4gICAgdmFyIHByb2dyYW0gPSB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYWRlcnMgPSBuZXcgU2hhZGVyKGdsQ29udGV4dCwgcmVzb3VyY2VzKTtcblxuICAgIHByb2dyYW0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIHZhciBuYW1lID0gbmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHZzID0gdnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBmcyA9IGZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZGVwcyA9IFtdO1xuXG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBwcm9ncmFtLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0gPSBjdHguY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0udnMgPSAodHlwZW9mIHZzID09IFwib2JqZWN0XCIpID8gdnMgOiBzaGFkZXJzLnZlcnRleFt2c107XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZnMgPSAodHlwZW9mIGZzID09IFwib2JqZWN0XCIpID8gZnMgOiBzaGFkZXJzLmZyYWdtZW50W2ZzXTtcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0udnMuZGVwcyk7XG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLmZzLmRlcHMpO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmRlcHMgPSBkZXBzO1xuXG4gICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgIH1cblxuICAgIHByb2dyYW0udXNlID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBwcm9ncmFtID0ga2VybmVsc1tuYW1lXTtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsocHJvZ3JhbSwgcHJvZ3JhbS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHByb2dyYW0uY3JlYXRlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9ncmFtLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICBkZWxldGUga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyYW0uc2hhZGVyID0gZnVuY3Rpb24oYXJnLCBmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZztcbiAgICAgICAgc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLnNoYWRlci52ZXJ0ZXggPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwidmVydGV4XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcHJvZ3JhbS5zaGFkZXIuZnJhZ21lbnQgPSBmdW5jdGlvbihmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnJhZ21lbnRcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm4ubmFtZSkgb3B0aW9ucy5uYW1lID0gZm4ubmFtZTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvZ3JhbTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=