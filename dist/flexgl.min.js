!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},o=e;function u(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=u(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=o.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=u(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),o["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),o["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),o["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(o.activeTexture(o.TEXTURE0+i.index),o.bindTexture(o.TEXTURE_2D,i.ptr),o.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,o){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==o&&o.length&&a(e,o),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new function e(t){var r=this instanceof e?this:{},i=t,a=0;function o(e,t){var n=i[r[e].type.toUpperCase()],a=i[r[e].channel.toUpperCase()],o=r[e].dim[0],u=r[e].dim[1];r[e].data=t,i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texImage2D(i.TEXTURE_2D,0,a,o,u,0,a,n,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}return r.create=function(e,u,c,f,s,l){var d=r.hasOwnProperty(e)?r[e].index:a++;return r[e]={name:e,index:d,type:u||"float",dim:c||[512,512],channel:f||"alpha",data:null,location:null,sampler:l||null,ptr:i.createTexture()},o(e,s),null===r[e].sampler?r[e].sampler=n(i).create(e,"sampler2D",r[e]):r[e].sampler.data=r[e],r[e].link=function(t){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=r[e]),this.sampler.link(t)),this},r[e].load=function(e){return o(this.name,e),this},r[e].copyFromFBO=function(){i.bindTexture(i.TEXTURE_2D,this.ptr),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,this.dim[0],this.dim[1],0),i.bindTexture(i.TEXTURE_2D,null)},r[e].update=function(e,t,n){return function(e,t,n,a){var o=i[r[e].type.toUpperCase()],u=i[r[e].channel.toUpperCase()],c=a[0]||r[e].dim[0],f=a[1]||r[e].dim[1];i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texSubImage2D(i.TEXTURE_2D,0,n[0],n[1],c,f,u,o,t),i.bindTexture(i.TEXTURE_2D,null)}(this.name,e,t,n),this},r[e].resize=function(e,t){this.dim=e,o(this.name,t)},r[e].delete=function(){t.deleteTexture(this.ptr)},r[e].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},r[e]},r}(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var a=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===a.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},a=n.container||null,o=n.canvas||document.createElement("canvas"),u=n.width||null,c=n.height||null,f=n.padding||{left:0,right:0,top:0,bottom:0},s=n.context||n.ctx||null;n.sharedFunction,"string"==typeof o&&(o="#"==o[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),a&&(a="string"==typeof a?document.getElementById(a):a,null===u&&(u=a.clientWidth),null===c&&(c=a.clientHeight)),o.width=u,o.height=c,o.style.position="absolute",o.style.marginLeft=f.left+"px",o.style.marginTop=f.top+"px",null===s&&(s=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(o)),r.ctx=s,r.canvas=o,r.resources=l,s._dict=n.env||n.dict||n.dictionary||{};var l=new i(s),d=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(s),h=new function(e,t){var r={},n=s,i={},a=new function e(t,r){var n=this instanceof e?this:{},i=t,a=r,o=i._dict||{};n.vertex={},n.fragment={};var u={vertex:i.VERTEX_SHADER,fragment:i.FRAGMENT_SHADER};function c(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(o);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return o[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function f(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=a.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?c(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return n.create=function(e,t){var r=e||{},o=r.name||"default",d=r.type||"vertex",h=r.require||r.deps||[],p=r.precision||"high",m=r.debug||!1,E=r.main||t||function(){},y="precision "+p+"p float;\n";0===h.length&&(h=l(function(e){var t=[],r=E.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=f(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}()));var b=[],g=[];if(h.forEach(function(e){var t=a.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){g.push(t.name);var r=f(t.fn.toString());r.length&&(r.forEach(function(e){var t=a.get(e);"subroutine"==t.resourceType&&(b=b.concat(f(t.fn.toString())))}),b=b.concat(r))}}),b.length){var v=b.concat(h.filter(function(e){return-1===g.indexOf(e)})).concat(g);h=l(v)}Array.isArray(h)?h.forEach(function(e){y+=s(e)}):"object"==typeof h&&Object.keys(h).forEach(function(e){h[e].forEach(function(e){y+=s(e)})}),y+=c("void","main",E),m&&console.log(y);var T=function(e,t){if(e!==i.VERTEX_SHADER&&e!==i.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=i.createShader(e);if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){var n=i.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+n)}return r}(u[d],y);return T._shaderType=u[d],T.deps=h,T.source=y,n[d][o]=T,T},n}(s,t);return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var o=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof r?r:a.fragment[r],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);o=(o=o.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=o},r.use=function(e,r,a){return i.hasOwnProperty(e)?(n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]):(this.create(e,r,a),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e])},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(s,l),p=null,m=s.getExtension("EXT_blend_minmax");function E(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=s.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(s.ext[e]=t[e])})})}function y(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}return m&&(s.MAX_EXT=m.MAX_EXT,s.MIN_EXT=m.MIN_EXT),s.ext=s.getExtension("ANGLE_instanced_arrays"),E(["OES_texture_float","OES_texture_float_linear"]),a&&a.appendChild(o),r.enableExtension=E,r.attribute=function(e,t,n){return l.allocate("attribute",e,t,n),r.attribute.hasOwnProperty(e)||Object.defineProperty(r.attribute,e,{get:()=>l.attribute[e],set(t){l.attribute[e].load(t)}}),r},r.uniform=function(e,t,n){return l.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return l.uniform[e]},set:function(t){l.uniform[e].load(t),s.isProgram(p)&&l.uniform[e].link(p)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,o){return l.allocate("texture",e,t,i,a,n,o),Object.defineProperty(r.texture,e,{get:function(){return l.texture[e]},set:function(t){l.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){l.texture[e].update(t,r,n)},r.varying=function(e,t,n){return l.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||l.allocate("texture",e,t,n,"rgba",null),d.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return d[e]}}),r},r.framebuffer.enableRead=function(e,t){d[e].enableRead(t)},r.bindFramebuffer=function(e){null===e?s.bindFramebuffer(s.FRAMEBUFFER,null):s.bindFramebuffer(s.FRAMEBUFFER,d[e].ptr)},r.subroutine=function(e,t,n){return l.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(s._dict[t]=e[t],Array.isArray(s._dict[t])){var r=0;Object.defineProperty(s._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,s._dict[t]=e}})}else if("object"==typeof s._dict[t]){var n=Object.keys(s._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>s._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=h.shader,r.app=function(e,t,r){var n=y(s,s.VERTEX_SHADER,t.vsource),i=y(s,s.FRAGMENT_SHADER,t.fsource);0===r?(s.viewport(0,0,1024,1),p=h.use(e,n,i),this.attribute.a_position.link(p),this.attribute.a_texcoord.link(p),this.texture.u_texture.link(p),this.bindFramebuffer("f_sum_texture")):(s.viewport(0,0,s.canvas.width,s.canvas.height),p=h.use(e,n,i),this.attribute.a_position.link(p),this.attribute.a_texcoord.link(p),this.bindFramebuffer(null),this.framebuffer.enableRead("f_sum_texture",p)),s.drawArrays(s.LINES,0,2)},r.dimension=function(){return[o.width,o.height]},r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGUiLCJkZWxldGVCdWZmZXIiLCJ0ZXh0dXJlIiwiVGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJyZXNpemUiLCJkZWxldGVUZXh0dXJlIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlcyIsImtleXMiLCJyZXNvdXJjZU5hbWUiLCJmbGV4Z2wiLCJ3aW5kb3ciLCJGbGV4R0wiLCJhcmciLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJzaGFyZWRGdW5jdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIm5hbWVzIiwiZ2wiLCJnZXRDb250ZXh0IiwiX2RpY3QiLCJlbnYiLCJkaWN0IiwiZGljdGlvbmFyeSIsImZyYW1lYnVmZmVycyIsIkZyYW1lYnVmZmVyIiwiZnJhbWVidWZmZXIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImVuYWJsZVJlYWQiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwiZGVsZXRlUmVuZGVyYnVmZmVyIiwicmVuZGVyYnVmZmVyIiwiZGVsZXRlRnJhbWVidWZmZXIiLCJrZXJuZWxzIiwic2hhZGVycyIsIlNoYWRlciIsImdsUmVzb3VyY2UiLCJzaGFkZXIiLCJwYXJhbWV0ZXJzIiwidmVydGV4IiwiZnJhZ21lbnQiLCJzaGFkZXJUeXBlIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInRvR0xTTCIsInJldHVyblR5cGUiLCJnbHNsIiwic3RyIiwiZW52UGFyYW0iLCJyZSIsIlJlZ0V4cCIsImpvaW4iLCJyZXBsYWNlIiwibWF0Y2hlZCIsImV4cHIiLCJkdHlwZSIsInRvTG93ZXJDYXNlIiwiYXJncyIsIm1hdGNoIiwiZ2V0RXh0cmFEZXBzIiwiZm5TdHJpbmciLCJleHRyYURlcHMiLCJtYXAiLCJkZWNsYXJlRGVwIiwiZGVwIiwidW5pcXVlRGVwcyIsImRlcHMiLCJvcHRpb24iLCJyZXF1aXJlIiwicHJlY2lzaW9uIiwiZGVidWciLCJtYWluIiwic2hhZGVyU291cmNlIiwic291cmNlQ29kZSIsInNoYWRlckFyZ3MiLCJzcGxpdCIsInRyaW0iLCJzdWJSb3V0aW5lcyIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwic3ViRGVwcyIsInNkZXAiLCJzcmVzIiwiYWxsRGVwcyIsImgiLCJfc2hhZGVyIiwiY3JlYXRlU2hhZGVyIiwiY29tcGlsZVNoYWRlciIsImdldFNoYWRlclBhcmFtZXRlciIsIkNPTVBJTEVfU1RBVFVTIiwibGFzdEVycm9yIiwiZ2V0U2hhZGVySW5mb0xvZyIsIl9zaGFkZXJUeXBlIiwic291cmNlIiwidnMiLCJmcyIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJsaW5rUHJvZ3JhbSIsImdldFByb2dyYW1QYXJhbWV0ZXIiLCJMSU5LX1NUQVRVUyIsImdldFByb2dyYW1JbmZvTG9nIiwidXNlIiwidXNlUHJvZ3JhbSIsImRldGFjaFNoYWRlciIsImRlbGV0ZVByb2dyYW0iLCJyZWFsUHJvZ3JhbSIsImJsZW5kRXh0IiwiZ2V0RXh0ZW5zaW9uIiwiZW5hYmxlRXh0ZW5zaW9uIiwiZXh0ZW5zaW9ucyIsImV4dGVuc2lvbiIsImV4dFByb3BzIiwiZXAiLCJleHQiLCJkZWxldGVTaGFkZXIiLCJNQVhfRVhUIiwiTUlOX0VYVCIsImFwcGVuZENoaWxkIiwiW29iamVjdCBPYmplY3RdIiwiaXNQcm9ncmFtIiwic2VyaWFsaXplIiwiYW9hIiwiZmJOYW1lIiwicGFyYW1ldGVyIiwia2V5VmFsdWVQYWlycyIsIm5ld0FycmF5IiwiZGljdEtleXMiLCJmeGdsIiwiYXBwIiwicHJvcHMiLCJudW0iLCJ2c291cmNlIiwiZnNvdXJjZSIsInZpZXdwb3J0IiwiYV9wb3NpdGlvbiIsImFfdGV4Y29vcmQiLCJ1X3RleHR1cmUiLCJkcmF3QXJyYXlzIiwiTElORVMiLCJkaW1lbnNpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksS0FDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxLQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxjQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixZQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxjQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdB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YWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVW5pZm9ybShnbENvbnRleHQsIG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgIHZhciB1bmlmb3JtID0gKHRoaXMgaW5zdGFuY2VvZiBVbmlmb3JtKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0O1xuXG4gICAgZnVuY3Rpb24gc2VyaWFsaXplQXJyYXkoYXJyYXlPZkFycmF5KSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhcnJheU9mQXJyYXkuZm9yRWFjaChmdW5jdGlvbihhKXtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VW5pZm9ybSgpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGUsXG4gICAgICAgICAgICBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb24sXG4gICAgICAgICAgICBzaXplID0gdGhpcy5zaXplLFxuICAgICAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCh0eXBlID09ICdmbG9hdCcgfHwgdHlwZSA9PSAnaW50JykgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgJiYgIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSlcbiAgICAgICAgICAgIGRhdGEgPSBbZGF0YV07XG5cbiAgICAgICAgdmFyIGJ1ZjtcbiAgICAgICAgaWYgKHR5cGUuc2xpY2UoMCwzKSA9PSAndmVjJyB8fCB0eXBlID09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDQpID09ICdpdmVjJyB8fCB0eXBlID09ICdpbnQnKXtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBJbnQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnaXYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCwzKSA9PSAnbWF0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybU1hdHJpeCcgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGZhbHNlLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgaWYoZGF0YS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2VUeXBlJykgJiYgZGF0YS5yZXNvdXJjZVR5cGUgPT0gJ3RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBkYXRhLnB0cik7XG4gICAgICAgICAgICAgICAgY3R4LnVuaWZvcm0xaShsb2NhdGlvbiwgZGF0YS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1bmlmb3JtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICB2YXIgaGFzQXJyYXkgPSBkYXRhLmZpbHRlcihmdW5jdGlvbihkKXtyZXR1cm4gQXJyYXkuaXNBcnJheShkKTt9KTtcbiAgICAgICAgICAgIGlmKGhhc0FycmF5KVxuICAgICAgICAgICAgICAgIGRhdGEgPSBzZXJpYWxpemVBcnJheShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0gPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgcGFyc2VJbnQodHlwZS5zbGljZSg0LDUpKSB8fCAxXG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5kYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgICAgICBzZXRVbmlmb3JtLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoZWFkZXIgPSAndW5pZm9ybSAnICsgdGhpcy50eXBlICsgJyAnICsgdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIGxlbiA9IDA7XG5cbiAgICAgICAgICAgIGlmKHRoaXMudHlwZSAhPSAnc2FtcGxlcjJEJykge1xuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnNpemU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vVE9ETzogZml4IGRlY2xhcmF0aW9uIGZvciBtYXRyaXhcbiAgICAgICAgICAgIGlmKGxlbiA+IDEgJiYgdHlwZSAhPSAnbWF0NCcpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXIgKz0gJ1snICsgbGVuICsgJ10nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlciArICc7XFxuJztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdW5pZm9ybVtuYW1lXTtcbiAgICB9XG5cblxuICAgIHJldHVybiB1bmlmb3JtO1xufVxuIiwiaW1wb3J0IFVuaWZvcm0gZnJvbSAnLi91bmlmb3JtJztcbmltcG9ydCBBdHRyaWJ1dGUgZnJvbSAnLi9hdHRyaWJ1dGUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi90ZXh0dXJlJztcbmltcG9ydCBWYXJ5aW5nIGZyb20gJy4vdmFyeWluZyc7XG5pbXBvcnQgU3Vicm91dGluZSBmcm9tICcuL3N1YnJvdXRpbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZXNvdXJjZShnbENvbnRleHQpIFxue1xuICAgIHZhciByZXNvdXJjZSA9ICh0aGlzIGluc3RhbmNlb2YgUmVzb3VyY2UpID8gdGhpcyA6IHt9LFxuICAgICAgICBncHVSZXNvdXJjZXMgPSB7fTtcblxuICAgIHJlc291cmNlLnVuaWZvcm0gPSBuZXcgVW5pZm9ybShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLmF0dHJpYnV0ZSA9IG5ldyBBdHRyaWJ1dGUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS50ZXh0dXJlID0gbmV3IFRleHR1cmUoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS52YXJ5aW5nID0gbmV3IFZhcnlpbmcoZ2xDb250ZXh0KTtcbiAgICByZXNvdXJjZS5zdWJyb3V0aW5lID0gbmV3IFN1YnJvdXRpbmUoKTtcblxuICAgIHZhciByZXNvdXJjZVR5cGVzID0gWyd1bmlmb3JtJywgJ2F0dHJpYnV0ZScsICd0ZXh0dXJlJywgJ3ZhcnlpbmcnLCAnc3Vicm91dGluZSddO1xuXG4gICAgcmVzb3VyY2UuYWxsb2NhdGUgPSBmdW5jdGlvbih0eXBlKSBcbiAgICB7XG4gICAgICAgIGlmIChyZXNvdXJjZVR5cGVzLmluZGV4T2YodHlwZSkgPT09IC0xKSAgeyB0aHJvdyBFcnJvcihcIkVycm9yOiBJbnZhbGlkIHJlc291cmNlIHR5cGU6IFwiICsgdHlwZSk7IH1cbiAgICAgICAgXG4gICAgICAgIHZhciByZXMgPSByZXNvdXJjZVt0eXBlXS5jcmVhdGUuYXBwbHkobnVsbCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIHJlcy5yZXNvdXJjZVR5cGUgPSB0eXBlO1xuICAgICAgICBncHVSZXNvdXJjZXNbcmVzLm5hbWVdID0gcmVzO1xuICAgICAgICBpZiAoIWdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXMubmFtZSkpIFxuICAgICAgICB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ3B1UmVzb3VyY2VzLCByZXMubmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBncHVSZXNvdXJjZXNbcmVzLm5hbWVdO30sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7IGdwdVJlc291cmNlc1tyZXMubmFtZV0ubG9hZChkYXRhKTt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG5cbiAgICByZXNvdXJjZS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSwgcmVzb3VyY2VzKSBcbiAgICB7XG4gICAgICAgIHZhciByZXF1aXJlZFJlc291cmNlcyA9IChBcnJheS5pc0FycmF5KHJlc291cmNlcykpID8gcmVzb3VyY2VzIDogT2JqZWN0LmtleXMoZ3B1UmVzb3VyY2VzKTtcbiAgICAgICAgcmVxdWlyZWRSZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzb3VyY2VOYW1lKSkge2dwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7fVxuICAgICAgICB9KVxuICAgIH07XG5cbiAgICByZXNvdXJjZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7cmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTt9XG4gICAgcmVzb3VyY2UuY3JlYXRlID0gcmVzb3VyY2UuYWxsb2NhdGU7XG4gICAgcmV0dXJuIHJlc291cmNlO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEF0dHJpYnV0ZShnbENvbnRleHQpIFxue1xuICAgIHZhciBhdHRyaWJ1dGUgPSAodGhpcyBpbnN0YW5jZW9mIEF0dHJpYnV0ZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgYXR0cmlidXRlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0QXR0cmlidXRlKG5hbWUsIGRhdGEpIFxuICAgIHtcbiAgICAgICAgaWYoIEFycmF5LmlzQXJyYXkoZGF0YSkgfHwgQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpIClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoIUFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkgXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjdHguYmluZEJ1ZmZlcihjdHguQVJSQVlfQlVGRkVSLCBhdHRyaWJ1dGVbbmFtZV0ucHRyKTtcbiAgICAgICAgICAgIGN0eC5idWZmZXJEYXRhKGN0eC5BUlJBWV9CVUZGRVIsIGRhdGEsIGN0eC5TVEFUSUNfRFJBVyk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhdHRyaWJ1dGVbbmFtZV0ucHRyID09PSBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0cik7XG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVbbmFtZV0ub2xkX3B0ciA9IGF0dHJpYnV0ZVtuYW1lXS5wdHI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhdHRyaWJ1dGUuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBhdHRyaWJ1dGVJRCsrLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlQnVmZmVyKCksXG4gICAgICAgICAgICBzaXplOiBwYXJzZUludCh0eXBlLnNsaWNlKDMsNCkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKSBcbiAgICAgICAgICAgIHtzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSk7fVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIGN0eC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMubG9jYXRpb24sIHRoaXMuc2l6ZSwgY3R4LkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgICAgICAgICBjdHguZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oYXJyYXlCdWZmZXIpIFxuICAgICAgICB7XG4gICAgICAgICAgICBzZXRBdHRyaWJ1dGUodGhpcy5uYW1lLCBhcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIFxuICAgICAgICAgICAge3JldHVybiAnYXR0cmlidXRlICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUgKyAnO1xcbic7fVxuICAgICAgICBcblxuICAgICAgICBhdHRyaWJ1dGVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguZGVsZXRlQnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBhdHRyaWJ1dGU7XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tIFwiLi91bmlmb3JtXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRleHR1cmUoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdGV4dHVyZSA9ICh0aGlzIGluc3RhbmNlb2YgVGV4dHVyZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAgdGV4dHVyZUlEID0gMDtcblxuICAgIGZ1bmN0aW9uIHNldFRleHR1cmUobmFtZSwgdGV4RGF0YSkgXG4gICAge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSB0ZXh0dXJlW25hbWVdLmRpbVswXSxcbiAgICAgICAgICAgIGhlaWdodCA9IHRleHR1cmVbbmFtZV0uZGltWzFdO1xuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGF0YSA9IHRleERhdGE7XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBmb3JtYXQsIHdpZHRoLCBoZWlnaHQsIDAsIGZvcm1hdCwgdHlwZSwgdGV4RGF0YSk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NQUdfRklMVEVSLCBjdHguTkVBUkVTVCk7XG4gICAgICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9XUkFQX1MsIGN0eC5DTEFNUF9UT19FREdFKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfVCwgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRleHR1cmUobmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgdmFyIHR5cGUgPSBjdHhbdGV4dHVyZVtuYW1lXS50eXBlLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgZm9ybWF0ID0gY3R4W3RleHR1cmVbbmFtZV0uY2hhbm5lbC50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIHdpZHRoID0gZGltWzBdIHx8IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gZGltWzFdIHx8IHRleHR1cmVbbmFtZV0uZGltWzFdO1xuXG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGV4dHVyZVtuYW1lXS5wdHIpO1xuICAgICAgICBjdHgudGV4U3ViSW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgb2Zmc2V0WzBdLCBvZmZzZXRbMV0sIHdpZHRoLCBoZWlnaHQsIGZvcm1hdCwgdHlwZSwgdGV4RGF0YSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogQWRkIHN1cHBvcnQgZm9yIHRleHR1cmUgY29tcHJlc3Npb25cbiAgICAvLyBmdW5jdGlvbiBjb21wcmVzc1RleHR1cmUodGV4RGF0YSkge1xuICAgIC8vXG4gICAgLy8gICAgIHZhciBleHQgPSAoXG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIk1PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKSB8fFxuICAgIC8vICAgICAgIGN0eC5nZXRFeHRlbnNpb24oXCJXRUJLSVRfV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIilcbiAgICAvLyAgICAgKTtcbiAgICAvL1xuICAgIC8vICAgICBjdHguY29tcHJlc3NlZFRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGV4dC5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVCwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sIHRleHR1cmVbbmFtZV0uZGltWzFdLCAwLCB0ZXhEYXRhKTtcbiAgICAvLyAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5MSU5FQVIpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gfVxuXG4gICAgdGV4dHVyZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIGNoYW5uZWwsIGRhdGEsIHNhbXBsZXIpIHtcbiAgICAgICAgdmFyIHRleEluZGV4ID0gKHRleHR1cmUuaGFzT3duUHJvcGVydHkobmFtZSkpID8gdGV4dHVyZVtuYW1lXS5pbmRleCA6IHRleHR1cmVJRCsrO1xuICAgICAgICB0ZXh0dXJlW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGluZGV4OiB0ZXhJbmRleCxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgXCJmbG9hdFwiLFxuICAgICAgICAgICAgZGltOiBkaW0gfHwgWzUxMiwgNTEyXSxcbiAgICAgICAgICAgIGNoYW5uZWw6IGNoYW5uZWwgfHwgXCJhbHBoYVwiLFxuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsLFxuICAgICAgICAgICAgc2FtcGxlcjogc2FtcGxlciB8fCBudWxsLFxuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlVGV4dHVyZSgpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gaWYoZGF0YSAhPT0gbnVsbCAmJiBkYXRhLmxlbmd0aClcbiAgICAgICAgc2V0VGV4dHVyZShuYW1lLCBkYXRhKTtcblxuICAgICAgICBpZiAodGV4dHVyZVtuYW1lXS5zYW1wbGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICB0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPSBVbmlmb3JtKGN0eCkuY3JlYXRlKG5hbWUsICdzYW1wbGVyMkQnLCB0ZXh0dXJlW25hbWVdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlci5kYXRhID0gdGV4dHVyZVtuYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMucHRyKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC51bmlmb3JtMWkodGhpcy5sb2NhdGlvbiwgdGhpcy5pbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZih0aGlzLnNhbXBsZXIuZGF0YSkgPT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zYW1wbGVyLmRhdGEgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlci5kYXRhID0gdGV4dHVyZVtuYW1lXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlci5saW5rKHByb2dyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxvYWQgPSBmdW5jdGlvbih0ZXhEYXRhKSB7XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uY29weUZyb21GQk8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgY3R4LmNvcHlUZXhJbWFnZTJEKFxuICAgICAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgY3R4LlJHQkEsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzBdLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS51cGRhdGUgPSBmdW5jdGlvbih0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICAgICAgdXBkYXRlVGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0ZXh0dXJlW25hbWVdLnJlc2l6ZSA9IGZ1bmN0aW9uKGRpbSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kaW0gPSBkaW07XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2xDb250ZXh0LmRlbGV0ZVRleHR1cmUodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gdGhpcy5zYW1wbGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmlmb3JtIHNhbXBsZXIyRCAnICsgdGhpcy5zYW1wbGVyLm5hbWUgKyAnO1xcbic7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYXJ5aW5nKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHZhcnlpbmcgPSAodGhpcyBpbnN0YW5jZW9mIFZhcnlpbmcpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICB2YXJ5aW5nLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgdmFyeWluZ1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBzaXplOiBzaXplIHx8IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5saW5rID0gZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd2YXJ5aW5nICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICAgICAgICBpZih0aGlzLnNpemUgPiAxKVxuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyB0aGlzLnNpemUgKyAnXSc7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcnlpbmdbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcnlpbmc7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJyb3V0aW5lKCkge1xuXG4gICAgdmFyIHN1YnJvdXRpbmUgPSAodGhpcyBpbnN0YW5jZW9mIFN1YnJvdXRpbmUpID8gdGhpcyA6IHt9O1xuXG4gICAgc3Vicm91dGluZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICBzdWJyb3V0aW5lW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJzdWJyb3V0aW5lXCJcbiAgICAgICAgfTtcblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmZuID0gZm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbi50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YnJvdXRpbmVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBzdWJyb3V0aW5lO1xufVxuIiwiaW1wb3J0IFJlc291cmNlIGZyb20gJy4vcmVzb3VyY2UnO1xuaW1wb3J0IFByb2dyYW0gZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBGcmFtZWJ1ZmZlciBmcm9tICcuL2ZyYW1lYnVmZmVyJztcbi8vIGltcG9ydCBSZWFjdGl2ZSBmcm9tICcuL3JlYWN0aXZlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmxleEdMKGFyZykge1xuXG4gICAgdmFyIGZsZXhnbCA9ICh0aGlzIGluc3RhbmNlb2YgRmxleEdMKSA/IHRoaXMgOiB7fTtcblxuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmcgfHwge30sXG4gICAgICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyIHx8IG51bGwsXG4gICAgICAgIGNhbnZhcyA9IG9wdGlvbnMuY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIHdpZHRoID0gb3B0aW9ucy53aWR0aCB8fCBudWxsLFxuICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBudWxsLFxuICAgICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nIHx8IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuICAgICAgICBjdHggPSBvcHRpb25zLmNvbnRleHQgfHwgb3B0aW9ucy5jdHggfHwgbnVsbCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFyZWRGdW5jdGlvbiA9IG9wdGlvbnMuc2hhcmVkRnVuY3Rpb24gfHwge307XG5cblxuXG4gICAgaWYgKHR5cGVvZihjYW52YXMpID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKGNhbnZhc1swXSA9PSBcIiNcIikgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzLnN1YnN0cmluZygxKSk7XG4gICAgICAgIGVsc2UgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIgPSAodHlwZW9mKGNvbnRhaW5lcikgPT0gXCJzdHJpbmdcIikgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpIDogY29udGFpbmVyO1xuICAgICAgICBpZiAod2lkdGggPT09IG51bGwpIHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICBpZiAoaGVpZ2h0ID09PSBudWxsKSBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgICAvLyB3aWR0aCAtPSBwYWRkaW5nLmxlZnQgKyBwYWRkaW5nLnJpZ2h0O1xuICAgIC8vIGhlaWdodCAtPSBwYWRkaW5nLnRvcCArIHBhZGRpbmcuYm90dG9tO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gcGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBwYWRkaW5nLnRvcCArIFwicHhcIjtcblxuXG4gICAgaWYgKGN0eCA9PT0gbnVsbClcbiAgICAgICAgY3R4ID0gc2V0dXBXZWJHTChjYW52YXMpO1xuICAgIGZsZXhnbC5jdHggPSBjdHg7XG4gICAgZmxleGdsLmNhbnZhcyA9IGNhbnZhcztcbiAgICBmbGV4Z2wucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgIGN0eC5fZGljdCA9IG9wdGlvbnMuZW52IHx8IG9wdGlvbnMuZGljdCB8fCBvcHRpb25zLmRpY3Rpb25hcnkgfHwge307XG5cbiAgICB2YXIgcmVzb3VyY2VzID0gbmV3IFJlc291cmNlKGN0eCksXG4gICAgICAgIGZyYW1lYnVmZmVycyA9IG5ldyBGcmFtZWJ1ZmZlcihjdHgpLFxuICAgICAgICBwcm9ncmFtID0gbmV3IFByb2dyYW0oY3R4LCByZXNvdXJjZXMpLFxuICAgICAgICByZWFsUHJvZ3JhbSA9IG51bGw7XG5cblxuICAgIHZhciBibGVuZEV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJFWFRfYmxlbmRfbWlubWF4XCIpO1xuICAgIGlmIChibGVuZEV4dCkge1xuICAgICAgICBjdHguTUFYX0VYVCA9IGJsZW5kRXh0Lk1BWF9FWFQ7XG4gICAgICAgIGN0eC5NSU5fRVhUID0gYmxlbmRFeHQuTUlOX0VYVDtcbiAgICB9XG4gICAgY3R4LmV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO1xuICAgIGVuYWJsZUV4dGVuc2lvbihbXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRcIixcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIlxuICAgIF0pO1xuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5cbiAgICBmdW5jdGlvbiBzZXR1cFdlYkdMKGNhbnZhcykge1xuICAgICAgICB2YXIgbmFtZXMgPSBbXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtcbiAgICAgICAgdmFyIGdsID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2ldKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICBpZiAoZ2wpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmFibGVFeHRlbnNpb24oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXh0ZW5zaW9ucykpIGV4dGVuc2lvbnMgPSBbZXh0ZW5zaW9uc107XG4gICAgICAgIGV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBleHRQcm9wcyA9IGN0eC5nZXRFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICAgICAgICAgIGlmIChleHRQcm9wcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0Lmhhc093blByb3BlcnR5KGVwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmV4dFtlcF0gPSBleHRQcm9wc1tlcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC5hdHRyaWJ1dGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuYXR0cmlidXRlLCBuYW1lLCB7IC8vYWZ0ZXIgYWxsb2NhdGluZywgZmxleGdsIGdldHMgbmV3IGtleSBhdHRyaWJ1dGUsIGhlbHBpbmcgZWFzaWx5IGNoYW5nZSBhdHRyaWJ1dGUgZGF0YS5cbiAgICAgICAgICAgICAgICBnZXQoKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQoZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG4gICAgLy8gZmxleGdsLmJ1ZmZlciA9IGZsZXhnbC5hdHRyaWJ1dGU7IC8vYWxpYXNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB1bmlmb3JtIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnVuaWZvcm0gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInVuaWZvcm1cIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLnVuaWZvcm0uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudW5pZm9ybSwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudW5pZm9ybVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmlzUHJvZ3JhbShyZWFsUHJvZ3JhbSkpICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5saW5rKHJlYWxQcm9ncmFtKTsgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgZmxleGdsLnVuaWZvcm0uc2VyaWFsaXplID0gZnVuY3Rpb24oYW9hKSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhb2EuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB0ZXh0dXJlIHR5cGU6IHVuc2lnbmVkX2J5dGUgb3IgZmxvYXQsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjaGFubmVsPSdhbHBoYSddIFdlYkdMIGZvcm1hdHMgKHJnYmEsIGFscGhhKVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3NhbXBsZXI9bnVsbF0gRkxleEdMIFVuaWZvcm0gT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudGV4dHVyZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEsIGRpbSwgY2hhbm5lbCwgc2FtcGxlcikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ0ZXh0dXJlXCIsIG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudGV4dHVyZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnRleHR1cmVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnRleHR1cmUudXBkYXRlID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0udXBkYXRlKGRhdGEsIG9mZnNldCwgZGltKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt0eXBlXSBWYXJ5aW5nIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzaXplPTFdIGRhdGEgYXJyYXlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC52YXJ5aW5nID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ2YXJ5aW5nXCIsIG5hbWUsIHR5cGUsIHNpemUpO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmU9bnVsbF0gRkxleEdMIFRleHR1cmUgT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlIHx8IHJlc291cmNlcy5hbGxvY2F0ZSgndGV4dHVyZScsIG5hbWUsIHR5cGUsIGRpbSwgJ3JnYmEnLCBudWxsKTtcbiAgICAgICAgZnJhbWVidWZmZXJzLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpO1xuXG4gICAgICAgIGlmICghZmxleGdsLmZyYW1lYnVmZmVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmZyYW1lYnVmZmVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkID0gZnVuY3Rpb24obmFtZSwgcHJvZ3JhbSkge1xuICAgICAgICBmcmFtZWJ1ZmZlcnNbbmFtZV0uZW5hYmxlUmVhZChwcm9ncmFtKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuYmluZEZyYW1lYnVmZmVyID0gZnVuY3Rpb24oZmJOYW1lKSB7XG4gICAgICAgIGlmIChmYk5hbWUgPT09IG51bGwpXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcnNbZmJOYW1lXS5wdHIpO1xuICAgIH1cblxuICAgIGZsZXhnbC5zdWJyb3V0aW5lID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwic3Vicm91dGluZVwiLCBuYW1lLCB0eXBlLCBmbik7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnBhcmFtZXRlciA9IGZ1bmN0aW9uKGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoa2V5VmFsdWVQYWlycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0ga2V5VmFsdWVQYWlyc1trZXldO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3R4Ll9kaWN0W2tleV0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHguX2RpY3QsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlUGFpcnNba2V5XVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0gbmV3QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YoY3R4Ll9kaWN0W2tleV0pID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpY3RLZXlzID0gT2JqZWN0LmtleXMoY3R4Ll9kaWN0W2tleV0pO1xuICAgICAgICAgICAgICAgIGZ4Z2wudW5pZm9ybSgnZGljdCcra2V5LCAnZmxvYXQnLCBkaWN0S2V5cy5tYXAoZD0+Y3R4Ll9kaWN0W2tleV1bZF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGljdGlvbmFyeSA9IGZsZXhnbC5wYXJhbWV0ZXI7XG4gICAgZmxleGdsLnNoYWRlciA9IHByb2dyYW0uc2hhZGVyO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlU2hhZGVyKGdsLCB0eXBlLCBzb3VyY2UpIHtcbiAgICAgICAgdmFyIHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcbiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICB2YXIgc3VjY2VzcyA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG4gICAgfVxuXG5cbiAgICBmbGV4Z2wuYXBwID0gZnVuY3Rpb24obmFtZSwgcHJvcHMsIG51bSkge1xuXG4gICAgICAgIHZhciB2cyA9IGNyZWF0ZVNoYWRlcihjdHgsIGN0eC5WRVJURVhfU0hBREVSLCBwcm9wcy52c291cmNlKSxcbiAgICAgICAgICAgIGZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LkZSQUdNRU5UX1NIQURFUiwgcHJvcHMuZnNvdXJjZSk7XG4gICAgICAgICAgICAvLyBmYiA9IHByb3BzLmZyYW1lYnVmZmVyIHx8IG51bGw7XG5cblxuICAgICAgICBpZihudW0gPT09IDApe1xuICAgICAgICAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIDEwMjQsIDEpO1xuICAgICAgICAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCB2cywgZnMpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVbJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pO1xuXG4gICAgICAgICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcignZl9zdW1fdGV4dHVyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHZzLCBmcyk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2Zfc3VtX3RleHR1cmUnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzLnVuaWZvcm1bJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pOyAgICBcbiAgICAgICAgLy8gdmFyIGRyYXcgPSBwcm9wcy5yZW5kZXIgfHwgcHJvcHMuZHJhdztcblxuICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAvLyAgICAgLy8gdmFyIGdsID0gZmxleGdsLnByb2dyYW0obmFtZSk7XG4gICAgICAgIC8vICAgICByZXR1cm4gZHJhdy5jYWxsKGN0eCwgYXJncyk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBjdHguZHJhd0FycmF5cyhjdHguTElORVMsIDAsIDIpO1xuXG4gICAgfVxuXG4gICAgZmxleGdsLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsZXhnbDtcbn1cbiIsImltcG9ydCBGbGV4R0wgZnJvbSAnLi9mbGV4Z2wnO1xuXG4oZnVuY3Rpb24gbWFrZUdsb2JhbCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93LkZsZXhHTCA9IEZsZXhHTDtcbiAgfVxufSkoKTtcbiIsImltcG9ydCBUZXh0dXJlIGZyb20gJy4vdGV4dHVyZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZyYW1lYnVmZmVyKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIGZyYW1lYnVmZmVyID0gKHRoaXMgaW5zdGFuY2VvZiBGcmFtZWJ1ZmZlcikgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZyYW1lYnVmZmVyLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdID0ge1xuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlRnJhbWVidWZmZXIoKSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIHdpZHRoOiBkaW1bMF0gfHwgMTAyNCxcbiAgICAgICAgICAgIGhlaWdodDogZGltWzFdIHx8IDEwMjQsXG4gICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlIHx8IG51bGwsXG4gICAgICAgICAgICAvLyByZW5kZXJidWZmZXI6IGN0eC5jcmVhdGVSZW5kZXJidWZmZXIoKSxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIChmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID09PSBudWxsKSB7XG4gICAgICAgIC8vICAgICB2YXIgYnVmID0gKHR5cGUgPT0gJ2Zsb2F0JykgP1xuICAgICAgICAvLyAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoZGltWzBdICogZGltWzFdICogNCkgOlxuICAgICAgICAvLyAgICAgICAgIG5ldyBVaW50OEFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpO1xuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9IFRleHR1cmUoY3R4KS5jcmVhdGUobmFtZSwgdHlwZSwgZGltLCBcInJnYmFcIiwgYnVmKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIHZhciByZW5kZXJidWZmZXIgPSBmcmFtZWJ1ZmZlcltuYW1lXS5yZW5kZXJidWZmZXI7XG4gICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcltuYW1lXS5wdHIpO1xuICAgICAgICAvLyBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCByZW5kZXJidWZmZXIpO1xuICAgICAgICAvLyBjdHgucmVuZGVyYnVmZmVyU3RvcmFnZShcbiAgICAgICAgLy8gICAgIGN0eC5SRU5ERVJCVUZGRVIsXG4gICAgICAgIC8vICAgICBjdHguREVQVEhfQ09NUE9ORU5UMTYsXG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS53aWR0aCxcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLmhlaWdodFxuICAgICAgICAvLyApO1xuICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICAgICAgICBjdHguRlJBTUVCVUZGRVIsXG4gICAgICAgICAgICBjdHguQ09MT1JfQVRUQUNITUVOVDAsXG4gICAgICAgICAgICBjdHguVEVYVFVSRV8yRCxcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUucHRyLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICAvLyBjdHguZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoXG4gICAgICAgIC8vICAgICBjdHguRlJBTUVCVUZGRVIsXG4gICAgICAgIC8vICAgICBjdHguREVQVEhfQVRUQUNITUVOVCxcbiAgICAgICAgLy8gICAgIGN0eC5SRU5ERVJCVUZGRVIsXG4gICAgICAgIC8vICAgICByZW5kZXJidWZmZXJcbiAgICAgICAgLy8gKTtcbiAgICAgICAgLy8gY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5lbmFibGVSZWFkID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy50ZXh0dXJlLnB0cik7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMudGV4dHVyZS5uYW1lKTtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWkodGhpcy50ZXh0dXJlLmxvY2F0aW9uLCB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLnJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUucHRyKVxuICAgICAgICAgICAgY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZyYW1lYnVmZmVyO1xufVxuIiwiaW1wb3J0IFNoYWRlciBmcm9tICcuL3NoYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2dyYW0oZ2xDb250ZXh0LCByZXNvdXJjZXMpIHtcblxuICAgIHZhciBwcm9ncmFtID0ge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFkZXJzID0gbmV3IFNoYWRlcihnbENvbnRleHQsIHJlc291cmNlcyk7XG5cbiAgICBwcm9ncmFtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICB2YXIgbmFtZSA9IG5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB2cyA9IHZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZnMgPSBmcyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcblxuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBrZXJuZWxzW25hbWVdID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcblxuICAgICAgICBrZXJuZWxzW25hbWVdLnZzID0gKHR5cGVvZiB2cyA9PSBcIm9iamVjdFwiKSA/IHZzIDogc2hhZGVycy52ZXJ0ZXhbdnNdO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmZzID0gKHR5cGVvZiBmcyA9PSBcIm9iamVjdFwiKSA/IGZzIDogc2hhZGVycy5mcmFnbWVudFtmc107XG5cbiAgICAgICAgY3R4LmF0dGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLnZzKTtcbiAgICAgICAgY3R4LmF0dGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgY3R4LmxpbmtQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICB2YXIgbGlua2VkID0gY3R4LmdldFByb2dyYW1QYXJhbWV0ZXIoa2VybmVsc1tuYW1lXSwgY3R4LkxJTktfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFsaW5rZWQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3IgPSBjdHguZ2V0UHJvZ3JhbUluZm9Mb2coa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICB0aHJvdyAoXCJFcnJvciBpbiBwcm9ncmFtIGxpbmtpbmc6XCIgKyBsYXN0RXJyb3IpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIH1cblxuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS52cy5kZXBzKTtcbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0uZnMuZGVwcyk7XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZGVwcyA9IGRlcHM7XG5cbiAgICB9XG5cbiAgICBwcm9ncmFtLnVzZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZShuYW1lLCB2cywgZnMpO1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9ncmFtLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICBkZWxldGUga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyYW0uc2hhZGVyID0gZnVuY3Rpb24oYXJnLCBmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZztcbiAgICAgICAgc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLnZlcnRleCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgdHlwZTogXCJ2ZXJ0ZXhcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm4ubmFtZSkgb3B0aW9ucy5uYW1lID0gZm4ubmFtZTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLmZyYWdtZW50ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcImZyYWdtZW50XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2dyYW07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaGFkZXIoZ2xDb250ZXh0LCBnbFJlc291cmNlKSB7XG4gICAgXG4gICAgdmFyIHNoYWRlciA9ICh0aGlzIGluc3RhbmNlb2YgU2hhZGVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICByZXNvdXJjZSA9IGdsUmVzb3VyY2UsXG4gICAgICAgIHBhcmFtZXRlcnMgPSBjdHguX2RpY3QgfHwge307XG5cbiAgICBzaGFkZXIudmVydGV4ID0ge307XG4gICAgc2hhZGVyLmZyYWdtZW50ID0ge307XG5cbiAgICB2YXIgc2hhZGVyVHlwZSA9IHtcbiAgICAgICAgdmVydGV4OiBjdHguVkVSVEVYX1NIQURFUixcbiAgICAgICAgZnJhZ21lbnQ6IGN0eC5GUkFHTUVOVF9TSEFERVJcbiAgICB9O1xuXG4gICAgLy8gQ29udmVydCBKUyBmdW5jdGlvbnMgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIHRvR0xTTChyZXR1cm5UeXBlLCBuYW1lLCBmbil7XG5cbiAgICAgICAgdmFyIGdsc2wgPSByZXR1cm5UeXBlICsgJyAnICtcbiAgICAgICAgICAgIG5hbWUgKyAnKCcgKyBhcHBseUVudlBhcmFtZXRlcnMoZm4udG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC92YXJcXHMrKFtcXHd8XFxkXSspXFxzKj1cXHMqbmV3XFxzKyhbXFx3fFxcZF0rKVxcKCguKilcXCkvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihleHByLCBuYW1lLCBkdHlwZSwgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHM7XG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZSwgJz0nLCB2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gW2R0eXBlLnRvTG93ZXJDYXNlKCksIG5hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcgJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICAucmVwbGFjZSgvZm9yXFxzKlxcKFxccyp2YXJcXHMrL2csICdmb3IoaW50ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdmFyXFxzL2csICdmbG9hdCAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3RoaXMuL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcJCguKilcXCgoLiopXFwpXFxzKig9fDspL2csIFwiJDEgJDIgJDNcIik7XG4gICAgICAgICAgICAvLyAucmVwbGFjZSgvXFwkKC4qPylcXC4vZywgXCIkMSBcIilcblxuICAgICAgICBpZihuYW1lID09IFwibWFpblwiKSB7XG4gICAgICAgICAgICBnbHNsID0gZ2xzbC5yZXBsYWNlKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccyp7LywgJyl7JykgKyBcIlxcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBnbHNsLm1hdGNoKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccypcXCkvKVsxXTtcblxuICAgICAgICAgICAgaWYoYXJncyAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3MucmVwbGFjZSgvXFwkKFtcXHd8XFxkXSspXy9nLCBcIiQxIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsc2wgPSBnbHNsXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8sIGFyZ3MrJyknKSArIFwiXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsc2w7XG4gICAgfVxuXG4gICAgLy9zZXQgcGFyYW1ldGVycyBpbiBKUyBmdW5jdGlvbnMgYmVmb3JlIGNvbnZlcnRpbmcgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIGFwcGx5RW52UGFyYW1ldGVycyhzdHIpe1xuICAgICAgICAvL2ZpbmQgYWxsICQoLi4uKSBhbmQgcmVwbGFjZSB0aGVtIHdpdGggcGFyYW1ldGVyc1xuICAgICAgICB2YXIgZW52UGFyYW0gPSBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYoZW52UGFyYW0ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXFxcXCRcXFxcKChcIitlbnZQYXJhbS5qb2luKFwifFwiKStcIilcXFxcKVwiLFwiZ1wiKTtcbiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVyc1ttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHVuaWZvcm1zIHRvIGJlIHVzZWQgYXMgcGFyYW1ldGVycyBpbiBzaGFkZXJzLCBsaWtlICQodW5pZm9ybU5hbWUpXG4gICAgICAgIC8vIHZhciBlbnZVbmlmb3JtcyA9IE9iamVjdC5rZXlzKHJlc291cmNlLnVuaWZvcm0pO1xuICAgICAgICAvLyByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlVuaWZvcm1zLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAvLyBzdHIgPSBzdHIucmVwbGFjZShyZSwgZnVuY3Rpb24obWF0Y2hlZCl7XG4gICAgICAgIC8vICAgICByZXR1cm4gcmVzb3VyY2UudW5pZm9ybVttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldLmRhdGE7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGlsZShzaGFkZXJUeXBlLCBzaGFkZXJTb3VyY2UpIHtcbiAgICAgICAgaWYgKHNoYWRlclR5cGUgIT09IGN0eC5WRVJURVhfU0hBREVSICYmIHNoYWRlclR5cGUgIT09IGN0eC5GUkFHTUVOVF9TSEFERVIpIHtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yOiB1bmtub3duIHNoYWRlciB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgICAgICAgY3R4LnNoYWRlclNvdXJjZShfc2hhZGVyLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBjdHguY29tcGlsZVNoYWRlcihfc2hhZGVyKTtcblxuICAgICAgICAvLyBDaGVjayB0aGUgY29tcGlsZSBzdGF0dXMsIGdldCBjb21waWxlIGVycm9yIGlmIGFueVxuICAgICAgICB2YXIgY29tcGlsZWQgPSBjdHguZ2V0U2hhZGVyUGFyYW1ldGVyKF9zaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUyk7XG4gICAgICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3IgPSBjdHguZ2V0U2hhZGVySW5mb0xvZyhfc2hhZGVyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSArICdcXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29tcGlsaW5nIHNoYWRlciAnXCIgKyBfc2hhZGVyICsgXCInOlwiICsgbGFzdEVycm9yKTtcblxuICAgICAgICAgICAgY3R4LmRlbGV0ZVNoYWRlcihfc2hhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGVwcyhmbikge1xuICAgICAgICB2YXIgZGVwcyA9IFtdLFxuICAgICAgICAgICAgc291cmNlQ29kZSA9IGZuLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzaGFkZXJBcmdzID0gc291cmNlQ29kZS5tYXRjaCgvZnVuY3Rpb25cXHMuKj9cXCgoW14pXSopXFwpLyksXG4gICAgICAgICAgICBhcmdzID0gKHNoYWRlckFyZ3MgIT09IG51bGwgJiYgc2hhZGVyQXJncy5sZW5ndGgpID8gc2hhZGVyQXJnc1sxXSA6IFtdO1xuICAgICAgICAvLyBhcmdzID0gYXJncy5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbnxcXHMpL2csICcnKTtcbiAgICAgICAgLy9cbiAgICAgICAgaWYoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBhcmdzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmcucmVwbGFjZSgvXFwvXFwqLipcXCpcXC8vLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBleHRyYURlcHMgPSBnZXRFeHRyYURlcHMoc291cmNlQ29kZSk7XG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChleHRyYURlcHNcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlcHMuaW5kZXhPZihkKSA9PT0gLTE7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZXBzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEV4dHJhRGVwcyhmblN0cmluZykge1xuICAgICAgICB2YXIgZXh0cmFEZXBzID0gZm5TdHJpbmcubWF0Y2goL3RoaXNcXC4oXFx3KykvZyk7XG4gICAgICAgIGlmKGV4dHJhRGVwcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXh0cmFEZXBzID0gZXh0cmFEZXBzLm1hcChmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5zbGljZSg1KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRyYURlcHMgfHwgW107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjbGFyZURlcChkZXApIHtcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICBpZih0eXBlb2YgcmVzID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UvZGVwZW5kZW5jZSBcIicgKyBkZXAgKyAnXCIgaXMgbm90IGZvdW5kLicpO1xuICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgIHJldHVybiB0b0dMU0wocmVzLnR5cGUsIHJlcy5uYW1lLCByZXMuZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVzLmhlYWRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuaXF1ZURlcHMoZGVwcykge1xuICAgICAgICB2YXIgbmFtZXMgPSB7fTtcbiAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpe1xuICAgICAgICAgICAgbmFtZXNbZF0gPSBpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobmFtZXMpO1xuICAgIH1cblxuICAgIHNoYWRlci5jcmVhdGUgPSBmdW5jdGlvbihhcmcsIGZuKXtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGFyZyB8fCB7fSxcbiAgICAgICAgICAgIG5hbWUgPSBvcHRpb24ubmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHR5cGUgPSBvcHRpb24udHlwZSB8fCBcInZlcnRleFwiLFxuICAgICAgICAgICAgZGVwcyA9IG9wdGlvbi5yZXF1aXJlIHx8IG9wdGlvbi5kZXBzIHx8IFtdLFxuICAgICAgICAgICAgcHJlY2lzaW9uID0gb3B0aW9uLnByZWNpc2lvbiB8fCBcImhpZ2hcIixcbiAgICAgICAgICAgIGRlYnVnID0gb3B0aW9uLmRlYnVnIHx8IGZhbHNlLFxuICAgICAgICAgICAgbWFpbiA9IG9wdGlvbi5tYWluIHx8IGZuIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgdmFyIHNoYWRlclNvdXJjZSA9ICdwcmVjaXNpb24gJyArIHByZWNpc2lvbiArICdwIGZsb2F0O1xcbic7XG5cbiAgICAgICAgaWYoZGVwcy5sZW5ndGggPT09IDApIGRlcHMgPSB1bmlxdWVEZXBzKGdldERlcHMobWFpbikpO1xuXG4gICAgICAgIC8vZ2V0IGRlcGVuZGVuY2UgZnJvbSBzdWJyb3V0aW5lcyBpZiBhbnlcbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IFtdLFxuICAgICAgICAgICAgc3ViUm91dGluZXMgPSBbXTtcblxuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgICAgIGlmKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXApO1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yICgnRXJyb3IhIFVuZGVmaW5lZCB2YXJpYWJsZSBpbiBzaGFkZXI6ICcrICBkZXAubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJykge1xuICAgICAgICAgICAgICAgIHN1YlJvdXRpbmVzLnB1c2gocmVzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJEZXBzID0gZ2V0RXh0cmFEZXBzKHJlcy5mbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBpZihzdWJEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG1ha2UgdGhpcyByZWN1cnNpdmUgdG8gY2hlY2sgYWxsIHN1YnJvdXRpbmUgZGVwc1xuICAgICAgICAgICAgICAgICAgICBzdWJEZXBzLmZvckVhY2goZnVuY3Rpb24oc2RlcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JlcyA9IHJlc291cmNlLmdldChzZGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KGdldEV4dHJhRGVwcyhzcmVzLmZuLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KHN1YkRlcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYWxsRGVwcyA9IGV4dHJhRGVwc1xuICAgICAgICAgICAgLy8gLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAuY29uY2F0KGRlcHMuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJSb3V0aW5lcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmNvbmNhdChzdWJSb3V0aW5lcyk7XG5cbiAgICAgICAgICAgIGRlcHMgPSB1bmlxdWVEZXBzKGFsbERlcHMpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRlcHMpKXtcbiAgICAgICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihkZXBzKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGVwcykuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZVR5cGUpe1xuICAgICAgICAgICAgICAgIGRlcHNbcmVzb3VyY2VUeXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgc2hhZGVyU291cmNlICs9IHRvR0xTTCgndm9pZCcsICdtYWluJywgbWFpbik7XG5cbiAgICAgICAgaWYoZGVidWcpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UpO1xuXG4gICAgICAgIHZhciBfc2hhZGVyID0gY29tcGlsZShzaGFkZXJUeXBlW3R5cGVdLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBfc2hhZGVyLl9zaGFkZXJUeXBlID0gc2hhZGVyVHlwZVt0eXBlXTtcbiAgICAgICAgX3NoYWRlci5kZXBzID0gZGVwcztcbiAgICAgICAgX3NoYWRlci5zb3VyY2UgPSBzaGFkZXJTb3VyY2U7XG4gICAgICAgIHNoYWRlclt0eXBlXVtuYW1lXSA9IF9zaGFkZXI7XG4gICAgICAgIHJldHVybiBfc2hhZGVyO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFkZXI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9