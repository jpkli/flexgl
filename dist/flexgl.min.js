!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},u=e;function o(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=o(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=u.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=o(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),u["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),u["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),u["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(u.activeTexture(u.TEXTURE0+i.index),u.bindTexture(u.TEXTURE_2D,i.ptr),u.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,u){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==u&&u.length&&a(e,u),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new function e(t){var r=this instanceof e?this:{},i=t,a=0;function u(e,t){var n=i[r[e].type.toUpperCase()],a=i[r[e].channel.toUpperCase()],u=r[e].dim[0],o=r[e].dim[1];r[e].data=t,i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texImage2D(i.TEXTURE_2D,0,a,u,o,0,a,n,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}return r.create=function(e,o,f,c,s,l){var h=r.hasOwnProperty(e)?r[e].index:a++;return r[e]={name:e,index:h,type:o||"float",dim:f||[512,512],channel:c||"alpha",data:null,location:null,sampler:l||null,ptr:i.createTexture()},u(e,s),null===r[e].sampler?r[e].sampler=n(i).create(e,"sampler2D",r[e]):r[e].sampler.data=r[e],r[e].link=function(t){return null!==this.data&&(void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=r[e]),this.sampler.link(t)),this},r[e].load=function(e){return u(this.name,e),this},r[e].copyFromFBO=function(){i.bindTexture(i.TEXTURE_2D,this.ptr),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,this.dim[0],this.dim[1],0),i.bindTexture(i.TEXTURE_2D,null)},r[e].update=function(e,t,n){return function(e,t,n,a){var u=i[r[e].type.toUpperCase()],o=i[r[e].channel.toUpperCase()],f=a[0]||r[e].dim[0],c=a[1]||r[e].dim[1];i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texSubImage2D(i.TEXTURE_2D,0,n[0],n[1],f,c,o,u,t),i.bindTexture(i.TEXTURE_2D,null)}(this.name,e,t,n),this},r[e].resize=function(e,t){this.dim=e,u(this.name,t)},r[e].delete=function(){t.deleteTexture(this.ptr)},r[e].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},r[e]},r}(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var a=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===a.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},a=n.container||null,u=n.canvas||document.createElement("canvas"),o=n.width||null,f=n.height||null,c=n.padding||{left:0,right:0,top:0,bottom:0},s=n.context||n.ctx||null;n.sharedFunction,"string"==typeof u&&(u="#"==u[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),a&&(a="string"==typeof a?document.getElementById(a):a,null===o&&(o=a.clientWidth),null===f&&(f=a.clientHeight)),u.width=o,u.height=f,u.style.position="absolute",u.style.marginLeft=c.left+"px",u.style.marginTop=c.top+"px",null===s&&(s=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(u)),r.ctx=s,r.canvas=u,r.resources=l,s._dict=n.env||n.dict||n.dictionary||{};var l=new i(s),h=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(s),d=new function(e,t){var r={},n=s,i={},a=new function e(t,r){var n=this instanceof e?this:{},i=t,a=r,u=i._dict||{};n.vertex={},n.fragment={};var o={vertex:i.VERTEX_SHADER,fragment:i.FRAGMENT_SHADER};function f(e,t,r){var n=e+" "+t+"("+function(e){var t=Object.keys(u);if(t.length>0){var r=new RegExp("\\$\\(("+t.join("|")+")\\)","g");e=e.replace(r,function(e){return u[e.slice(2,e.length-1)]})}return e}(r.toString()).replace(/var\s+([\w|\d]+)\s*=\s*new\s+([\w|\d]+)\((.*)\)/g,function(e,t,r,n){return(n?[r.toLowerCase(),t,"=",n]:[r.toLowerCase(),t]).join(" ")}).replace(/for\s*\(\s*var\s+/g,"for(int ").replace(/var\s/g,"float ").replace(/this./g,"").replace(/\$(.*)\((.*)\)\s*(=|;)/g,"$1 $2 $3");if("main"==t)n=n.replace(/function.*\(\s*([\s\S]*?)\s*{/,"){")+"\n";else{var i=n.match(/function.*\(\s*([\s\S]*?)\s*\)/)[1];""!=i&&(i=i.replace(/\$([\w|\d]+)_/g,"$1 ")),n=n.replace(/function.*\(\s*([\s\S]*?)\s*\)/,i+")")+"\n"}return n}function c(e){var t=e.match(/this\.(\w+)/g);return null!==t&&(t=t.map(function(e){return e.slice(5)})),t||[]}function s(e){var t=a.get(e);if(void 0===t)throw new Error('Resource/dependence "'+e+'" is not found.');return"subroutine"==t.resourceType?f(t.type,t.name,t.fn):t.header()}function l(e){var t={};return e.forEach(function(e,r){t[e]=r}),Object.keys(t)}return n.create=function(e,t){var r=e||{},u=r.name||"default",h=r.type||"vertex",d=r.require||r.deps||[],m=r.precision||"high",p=r.debug||!1,b=r.main||t||function(){},E="precision "+m+"p float;\n";0===d.length&&(d=l(function(e){var t=[],r=b.toString(),n=r.match(/function\s.*?\(([^)]*)\)/),i=null!==n&&n.length?n[1]:[];i.length&&(t=i.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e}));var a=c(r);return a.length&&(t=t.concat(a.filter(function(e){return-1===t.indexOf(e)}))),t}()));var y=[],v=[];if(d.forEach(function(e){var t=a.get(e);if(void 0===t)throw console.log(e),Error("Error! Undefined variable in shader: "+e.name);if("subroutine"==t.resourceType){v.push(t.name);var r=c(t.fn.toString());r.length&&(r.forEach(function(e){var t=a.get(e);"subroutine"==t.resourceType&&(y=y.concat(c(t.fn.toString())))}),y=y.concat(r))}}),y.length){var g=y.concat(d.filter(function(e){return-1===v.indexOf(e)})).concat(v);d=l(g)}Array.isArray(d)?d.forEach(function(e){E+=s(e)}):"object"==typeof d&&Object.keys(d).forEach(function(e){d[e].forEach(function(e){E+=s(e)})}),E+=f("void","main",b),p&&console.log(E);var _=function(e,t){if(e!==i.VERTEX_SHADER&&e!==i.FRAGMENT_SHADER)throw"Error: unknown shader type";var r=i.createShader(e);if(i.shaderSource(r,t),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){var n=i.getShaderInfoLog(r);throw console.log(t+"\n ===================================================="),new Error("Error compiling shader '"+r+"':"+n)}return r}(o[h],E);return _._shaderType=o[h],_.deps=d,_.source=E,n[h][u]=_,_},n}(s,t);function u(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var u=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs="object"==typeof t?t:a.vertex[t],i[e].fs="object"==typeof r?r:a.fragment[r],n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);u=(u=u.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=u},r.use=function(e,r,a){if(i.hasOwnProperty(e))return n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e];var o=u(n,n.VERTEX_SHADER,r),f=u(n,n.FRAGMENT_SHADER,a);return this.create(e,o,f),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r.shader=function(e,t){var n=e;return a.create(n,t),r},r.vertex=function(e){var t={type:"vertex"};return e.name&&(t.name=e.name),a.create(t,e)},r.fragment=function(e){var t={type:"fragment"};return e.name&&(t.name=e.name),a.create(t,e)},r}(s,l),m=null,p=s.getExtension("EXT_blend_minmax");function b(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=s.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(s.ext[e]=t[e])})})}return p&&(s.MAX_EXT=p.MAX_EXT,s.MIN_EXT=p.MIN_EXT),s.ext=s.getExtension("ANGLE_instanced_arrays"),b(["OES_texture_float","OES_texture_float_linear"]),a&&a.appendChild(u),r.enableExtension=b,r.attribute=function(e,t,n){return l.allocate("attribute",e,t,n),r.attribute.hasOwnProperty(e)||Object.defineProperty(r.attribute,e,{get:()=>l.attribute[e],set(t){l.attribute[e].load(t)}}),r},r.uniform=function(e,t,n){return l.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return l.uniform[e]},set:function(t){l.uniform[e].load(t),s.isProgram(m)&&l.uniform[e].link(m)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,u){return l.allocate("texture",e,t,i,a,n,u),Object.defineProperty(r.texture,e,{get:function(){return l.texture[e]},set:function(t){l.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){l.texture[e].update(t,r,n)},r.varying=function(e,t,n){return l.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||l.allocate("texture",e,t,n,"rgba",null),h.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return h[e]}}),r},r.framebuffer.enableRead=function(e,t){h[e].enableRead(t)},r.bindFramebuffer=function(e){null===e?s.bindFramebuffer(s.FRAMEBUFFER,null):s.bindFramebuffer(s.FRAMEBUFFER,h[e].ptr)},r.subroutine=function(e,t,n){return l.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(s._dict[t]=e[t],Array.isArray(s._dict[t])){var r=0;Object.defineProperty(s._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,s._dict[t]=e}})}else if("object"==typeof s._dict[t]){var n=Object.keys(s._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>s._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=d.shader,r.app=function(e,t,r){0===r?(s.viewport(0,0,1024,1),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.texture.u_texture.link(m),this.bindFramebuffer("f_sum_texture")):1===r?(s.viewport(0,0,s.canvas.width,s.canvas.height),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer(null),this.framebuffer.enableRead("f_sum_texture",m)):2===r?(this.bindFramebuffer(null),s.viewport(0,0,1024,1),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer("f_mem_texture_1"),this.framebuffer.enableRead("f_mem_texture_0",m),this.framebuffer.enableRead("f_sum_texture",m)):3===r?(this.bindFramebuffer(null),s.viewport(0,0,1024,1),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer("f_mem_texture_0"),this.framebuffer.enableRead("f_mem_texture_1",m),this.framebuffer.enableRead("f_sum_texture",m)):4===r?(s.viewport(0,0,s.canvas.width,s.canvas.height),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer(null),this.framebuffer.enableRead("f_mem_texture_1",m)):5===r&&(s.viewport(0,0,s.canvas.width,s.canvas.height),m=d.use(e,t.vsource,t.fsource),this.attribute.a_position.link(m),this.attribute.a_texcoord.link(m),this.bindFramebuffer(null),this.framebuffer.enableRead("f_mem_texture_0",m)),s.drawArrays(s.LINES,0,2)},r.dimension=function(){return[u.width,u.height]},r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGUiLCJkZWxldGVCdWZmZXIiLCJ0ZXh0dXJlIiwiVGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJyZXNpemUiLCJkZWxldGVUZXh0dXJlIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlcyIsImtleXMiLCJyZXNvdXJjZU5hbWUiLCJmbGV4Z2wiLCJ3aW5kb3ciLCJGbGV4R0wiLCJhcmciLCJvcHRpb25zIiwiY29udGFpbmVyIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicGFkZGluZyIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbnRleHQiLCJzaGFyZWRGdW5jdGlvbiIsImdldEVsZW1lbnRCeUlkIiwiY2F2bmFzIiwic3Vic3RyaW5nIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzdHlsZSIsInBvc2l0aW9uIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsIm5hbWVzIiwiZ2wiLCJnZXRDb250ZXh0IiwiX2RpY3QiLCJlbnYiLCJkaWN0IiwiZGljdGlvbmFyeSIsImZyYW1lYnVmZmVycyIsIkZyYW1lYnVmZmVyIiwiZnJhbWVidWZmZXIiLCJjcmVhdGVGcmFtZWJ1ZmZlciIsImJpbmRGcmFtZWJ1ZmZlciIsIkZSQU1FQlVGRkVSIiwiZnJhbWVidWZmZXJUZXh0dXJlMkQiLCJDT0xPUl9BVFRBQ0hNRU5UMCIsImVuYWJsZVJlYWQiLCJiaW5kUmVuZGVyYnVmZmVyIiwiUkVOREVSQlVGRkVSIiwiZGVsZXRlUmVuZGVyYnVmZmVyIiwicmVuZGVyYnVmZmVyIiwiZGVsZXRlRnJhbWVidWZmZXIiLCJrZXJuZWxzIiwic2hhZGVycyIsIlNoYWRlciIsImdsUmVzb3VyY2UiLCJzaGFkZXIiLCJwYXJhbWV0ZXJzIiwidmVydGV4IiwiZnJhZ21lbnQiLCJzaGFkZXJUeXBlIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInRvR0xTTCIsInJldHVyblR5cGUiLCJnbHNsIiwic3RyIiwiZW52UGFyYW0iLCJyZSIsIlJlZ0V4cCIsImpvaW4iLCJyZXBsYWNlIiwibWF0Y2hlZCIsImV4cHIiLCJkdHlwZSIsInRvTG93ZXJDYXNlIiwiYXJncyIsIm1hdGNoIiwiZ2V0RXh0cmFEZXBzIiwiZm5TdHJpbmciLCJleHRyYURlcHMiLCJtYXAiLCJkZWNsYXJlRGVwIiwiZGVwIiwidW5pcXVlRGVwcyIsImRlcHMiLCJvcHRpb24iLCJyZXF1aXJlIiwicHJlY2lzaW9uIiwiZGVidWciLCJtYWluIiwic2hhZGVyU291cmNlIiwic291cmNlQ29kZSIsInNoYWRlckFyZ3MiLCJzcGxpdCIsInRyaW0iLCJzdWJSb3V0aW5lcyIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwic3ViRGVwcyIsInNkZXAiLCJzcmVzIiwiYWxsRGVwcyIsIl9zaGFkZXIiLCJjcmVhdGVTaGFkZXIiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJsYXN0RXJyb3IiLCJnZXRTaGFkZXJJbmZvTG9nIiwiX3NoYWRlclR5cGUiLCJzb3VyY2UiLCJkZWxldGVTaGFkZXIiLCJ2cyIsImZzIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ2c291cmNlIiwiZnNvdXJjZSIsInVzZVByb2dyYW0iLCJkZXRhY2hTaGFkZXIiLCJkZWxldGVQcm9ncmFtIiwicmVhbFByb2dyYW0iLCJibGVuZEV4dCIsImdldEV4dGVuc2lvbiIsImVuYWJsZUV4dGVuc2lvbiIsImV4dGVuc2lvbnMiLCJleHRlbnNpb24iLCJleHRQcm9wcyIsImVwIiwiZXh0IiwiTUFYX0VYVCIsIk1JTl9FWFQiLCJhcHBlbmRDaGlsZCIsIltvYmplY3QgT2JqZWN0XSIsImlzUHJvZ3JhbSIsInNlcmlhbGl6ZSIsImFvYSIsImZiTmFtZSIsInBhcmFtZXRlciIsImtleVZhbHVlUGFpcnMiLCJuZXdBcnJheSIsImRpY3RLZXlzIiwiZnhnbCIsImFwcCIsInByb3BzIiwibnVtIiwidmlld3BvcnQiLCJhX3Bvc2l0aW9uIiwiYV90ZXhjb29yZCIsInVfdGV4dHVyZSIsImRyYXdBcnJheXMiLCJMSU5FUyIsImRpbWVuc2lvbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxLQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEtBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLGNBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLFlBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULGNBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gs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QUEsa0JBQUFrRixJQVdBOU4sRUFBQTJQLFdBQUEzUCxFQUFBNFAsTUFBQSxNQUlBeEosRUFBQXlKLFVBQUEsV0FDQSxPQUFBbkosRUFBQTdDLE1BQUE2QyxFQUFBM0MsU0FHQXFDIiwiZmlsZSI6ImZsZXhnbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBVbmlmb3JtKGdsQ29udGV4dCwgbmFtZSwgdHlwZSwgZGF0YSkge1xuXG4gICAgdmFyIHVuaWZvcm0gPSAodGhpcyBpbnN0YW5jZW9mIFVuaWZvcm0pID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmdW5jdGlvbiBzZXJpYWxpemVBcnJheShhcnJheU9mQXJyYXkpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFycmF5T2ZBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGEpe1xuICAgICAgICAgICAgc2EgPSBzYS5jb25jYXQoYSk7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBzYTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRVbmlmb3JtKCkge1xuICAgICAgICB2YXIgdHlwZSA9IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbixcbiAgICAgICAgICAgIHNpemUgPSB0aGlzLnNpemUsXG4gICAgICAgICAgICBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHZhciBoYXNBcnJheSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBBcnJheS5pc0FycmF5KGQpO30pO1xuICAgICAgICAgICAgaWYoaGFzQXJyYXkpXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKHR5cGUgPT0gJ2Zsb2F0JyB8fCB0eXBlID09ICdpbnQnKSAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSAmJiAhQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKVxuICAgICAgICAgICAgZGF0YSA9IFtkYXRhXTtcblxuICAgICAgICB2YXIgYnVmO1xuICAgICAgICBpZiAodHlwZS5zbGljZSgwLDMpID09ICd2ZWMnIHx8IHR5cGUgPT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgYnVmID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2Z2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsNCkgPT0gJ2l2ZWMnIHx8IHR5cGUgPT0gJ2ludCcpe1xuICAgICAgICAgICAgYnVmID0gbmV3IEludDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm0nICsgc2l6ZSArICdpdiddKGxvY2F0aW9uLCBidWYpO1xuICAgICAgICB9IGVsc2UgaWYodHlwZS5zbGljZSgwLDMpID09ICdtYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtTWF0cml4JyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgZmFsc2UsIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlID09ICdzYW1wbGVyMkQnKSB7XG4gICAgICAgICAgICBpZihkYXRhLmhhc093blByb3BlcnR5KCdyZXNvdXJjZVR5cGUnKSAmJiBkYXRhLnJlc291cmNlVHlwZSA9PSAndGV4dHVyZScpIHtcbiAgICAgICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIGRhdGEucHRyKTtcbiAgICAgICAgICAgICAgICBjdHgudW5pZm9ybTFpKGxvY2F0aW9uLCBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVuaWZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHZhciBoYXNBcnJheSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBBcnJheS5pc0FycmF5KGQpO30pO1xuICAgICAgICAgICAgaWYoaGFzQXJyYXkpXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXSA9IHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQodHlwZS5zbGljZSgzLDQpKSB8fCBwYXJzZUludCh0eXBlLnNsaWNlKDQsNSkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5kYXRhICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHNldFVuaWZvcm0uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd1bmlmb3JtICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbGVuID0gMDtcblxuICAgICAgICAgICAgaWYodGhpcy50eXBlICE9ICdzYW1wbGVyMkQnKSB7XG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9UT0RPOiBmaXggZGVjbGFyYXRpb24gZm9yIG1hdHJpeFxuICAgICAgICAgICAgaWYobGVuID4gMSAmJiB0eXBlICE9ICdtYXQ0Jykge1xuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyBsZW4gKyAnXSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB1bmlmb3JtW25hbWVdO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHVuaWZvcm07XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tICcuL3VuaWZvcm0nO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL2F0dHJpYnV0ZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuaW1wb3J0IFZhcnlpbmcgZnJvbSAnLi92YXJ5aW5nJztcbmltcG9ydCBTdWJyb3V0aW5lIGZyb20gJy4vc3Vicm91dGluZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIHJlc291cmNlID0gKHRoaXMgaW5zdGFuY2VvZiBSZXNvdXJjZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGdwdVJlc291cmNlcyA9IHt9O1xuXG4gICAgcmVzb3VyY2UudW5pZm9ybSA9IG5ldyBVbmlmb3JtKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UuYXR0cmlidXRlID0gbmV3IEF0dHJpYnV0ZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnRleHR1cmUgPSBuZXcgVGV4dHVyZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnZhcnlpbmcgPSBuZXcgVmFyeWluZyhnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnN1YnJvdXRpbmUgPSBuZXcgU3Vicm91dGluZSgpO1xuXG4gICAgdmFyIHJlc291cmNlVHlwZXMgPSBbJ3VuaWZvcm0nLCAnYXR0cmlidXRlJywgJ3RleHR1cmUnLCAndmFyeWluZycsICdzdWJyb3V0aW5lJ107XG5cbiAgICByZXNvdXJjZS5hbGxvY2F0ZSA9IGZ1bmN0aW9uKHR5cGUpIFxuICAgIHtcbiAgICAgICAgaWYgKHJlc291cmNlVHlwZXMuaW5kZXhPZih0eXBlKSA9PT0gLTEpICB7IHRocm93IEVycm9yKFwiRXJyb3I6IEludmFsaWQgcmVzb3VyY2UgdHlwZTogXCIgKyB0eXBlKTsgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlW3R5cGVdLmNyZWF0ZS5hcHBseShudWxsLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgcmVzLnJlc291cmNlVHlwZSA9IHR5cGU7XG4gICAgICAgIGdwdVJlc291cmNlc1tyZXMubmFtZV0gPSByZXM7XG4gICAgICAgIGlmICghZ3B1UmVzb3VyY2VzLmhhc093blByb3BlcnR5KHJlcy5uYW1lKSkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShncHVSZXNvdXJjZXMsIHJlcy5uYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGdwdVJlc291cmNlc1tyZXMubmFtZV07fSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHsgZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXS5sb2FkKGRhdGEpO31cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHJlc291cmNlLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtLCByZXNvdXJjZXMpIFxuICAgIHtcbiAgICAgICAgdmFyIHJlcXVpcmVkUmVzb3VyY2VzID0gKEFycmF5LmlzQXJyYXkocmVzb3VyY2VzKSkgPyByZXNvdXJjZXMgOiBPYmplY3Qua2V5cyhncHVSZXNvdXJjZXMpO1xuICAgICAgICByZXF1aXJlZFJlc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc291cmNlTmFtZSkge1xuICAgICAgICAgICAgaWYgKGdwdVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU5hbWUpKSB7Z3B1UmVzb3VyY2VzW3Jlc291cmNlTmFtZV0ubGluayhwcm9ncmFtKTt9XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHJlc291cmNlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtyZXR1cm4gZ3B1UmVzb3VyY2VzW25hbWVdO31cbiAgICByZXNvdXJjZS5jcmVhdGUgPSByZXNvdXJjZS5hbGxvY2F0ZTtcbiAgICByZXR1cm4gcmVzb3VyY2U7XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXR0cmlidXRlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIGF0dHJpYnV0ZSA9ICh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBhdHRyaWJ1dGVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBpZiggQXJyYXkuaXNBcnJheShkYXRhKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkgKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZVtuYW1lXS5wdHIpO1xuICAgICAgICAgICAgY3R4LmJ1ZmZlckRhdGEoY3R4LkFSUkFZX0JVRkZFUiwgZGF0YSwgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGF0dHJpYnV0ZVtuYW1lXS5wdHIgPT09IGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyKTtcbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyID0gYXR0cmlidXRlW25hbWVdLnB0cjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF0dHJpYnV0ZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IGF0dHJpYnV0ZUlEKyssXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVCdWZmZXIoKSxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpIFxuICAgICAgICAgICAge3NldEF0dHJpYnV0ZShuYW1lLCBkYXRhKTt9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSBcbiAgICAgICAge1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5sb2NhdGlvbiwgdGhpcy5zaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxvYWQgPSBmdW5jdGlvbihhcnJheUJ1ZmZlcikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkgXG4gICAgICAgICAgICB7cmV0dXJuICdhdHRyaWJ1dGUgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSArICc7XFxuJzt9XG4gICAgICAgIFxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5kZWxldGVCdWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gXCIuL3VuaWZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGV4dHVyZShnbENvbnRleHQpIHtcblxuICAgIHZhciB0ZXh0dXJlID0gKHRoaXMgaW5zdGFuY2VvZiBUZXh0dXJlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICB0ZXh0dXJlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0VGV4dHVyZShuYW1lLCB0ZXhEYXRhKSBcbiAgICB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kYXRhID0gdGV4RGF0YTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShuYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSBkaW1bMF0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1bMV0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhTdWJJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdGV4dHVyZSBjb21wcmVzc2lvblxuICAgIC8vIGZ1bmN0aW9uIGNvbXByZXNzVGV4dHVyZSh0ZXhEYXRhKSB7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGV4dCA9IChcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKVxuICAgIC8vICAgICApO1xuICAgIC8vXG4gICAgLy8gICAgIGN0eC5jb21wcmVzc2VkVGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZXh0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhULCB0ZXh0dXJlW25hbWVdLmRpbVswXSwgdGV4dHVyZVtuYW1lXS5kaW1bMV0sIDAsIHRleERhdGEpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyB9XG5cbiAgICB0ZXh0dXJlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcikge1xuICAgICAgICB2YXIgdGV4SW5kZXggPSAodGV4dHVyZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgPyB0ZXh0dXJlW25hbWVdLmluZGV4IDogdGV4dHVyZUlEKys7XG4gICAgICAgIHRleHR1cmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5kZXg6IHRleEluZGV4LFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICBkaW06IGRpbSB8fCBbNTEyLCA1MTJdLFxuICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBcImFscGhhXCIsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzYW1wbGVyOiBzYW1wbGVyIHx8IG51bGwsXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVUZXh0dXJlKClcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKVxuICAgICAgICBzZXRUZXh0dXJlKG5hbWUsIGRhdGEpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlciA9IFVuaWZvcm0oY3R4KS5jcmVhdGUobmFtZSwgJ3NhbXBsZXIyRCcsIHRleHR1cmVbbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LnVuaWZvcm0xaSh0aGlzLmxvY2F0aW9uLCB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuc2FtcGxlci5kYXRhKSA9PSAndW5kZWZpbmVkJyB8fCB0aGlzLnNhbXBsZXIuZGF0YSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKHRleERhdGEpIHtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCB0ZXhEYXRhKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5jb3B5RnJvbUZCTyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0aGlzLnB0cik7XG4gICAgICAgICAgICBjdHguY29weVRleEltYWdlMkQoXG4gICAgICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICBjdHguUkdCQSxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMF0sXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1bMV0sXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLnVwZGF0ZSA9IGZ1bmN0aW9uKHRleERhdGEsIG9mZnNldCwgZGltKSB7XG4gICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRleHR1cmVbbmFtZV0ucmVzaXplID0gZnVuY3Rpb24oZGltLCBkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICAgICAgICAgIHNldFRleHR1cmUodGhpcy5uYW1lLCBkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBnbENvbnRleHQuZGVsZXRlVGV4dHVyZSh0aGlzLnB0cik7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSB0aGlzLnNhbXBsZXIubmFtZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaWZvcm0gc2FtcGxlcjJEICcgKyB0aGlzLnNhbXBsZXIubmFtZSArICc7XFxuJztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGV4dHVyZVtuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZhcnlpbmcoZ2xDb250ZXh0KSB7XG5cbiAgICB2YXIgdmFyeWluZyA9ICh0aGlzIGluc3RhbmNlb2YgVmFyeWluZykgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIHZhcnlpbmcuY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICB2YXJ5aW5nW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIHNpemU6IHNpemUgfHwgMSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmxpbmsgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgICAgIHZhcnlpbmdbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGVhZGVyID0gJ3ZhcnlpbmcgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZTtcbiAgICAgICAgICAgIGlmKHRoaXMuc2l6ZSA+IDEpXG4gICAgICAgICAgICAgICAgaGVhZGVyICs9ICdbJyArIHRoaXMuc2l6ZSArICddJztcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXIgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFyeWluZ1tuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFyeWluZztcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1YnJvdXRpbmUoKSB7XG5cbiAgICB2YXIgc3Vicm91dGluZSA9ICh0aGlzIGluc3RhbmNlb2YgU3Vicm91dGluZSkgPyB0aGlzIDoge307XG5cbiAgICBzdWJyb3V0aW5lLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGZuKSB7XG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCAnZmxvYXQnLFxuICAgICAgICAgICAgZm46IGZuLFxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInN1YnJvdXRpbmVcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubGluayA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5sb2FkID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uZm4gPSBmbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgc3Vicm91dGluZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZuLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3Vicm91dGluZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHN1YnJvdXRpbmU7XG59XG4iLCJpbXBvcnQgUmVzb3VyY2UgZnJvbSAnLi9yZXNvdXJjZSc7XG5pbXBvcnQgUHJvZ3JhbSBmcm9tICcuL3Byb2dyYW0nO1xuaW1wb3J0IEZyYW1lYnVmZmVyIGZyb20gJy4vZnJhbWVidWZmZXInO1xuLy8gaW1wb3J0IFJlYWN0aXZlIGZyb20gJy4vcmVhY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGbGV4R0woYXJnKSB7XG5cbiAgICB2YXIgZmxleGdsID0gKHRoaXMgaW5zdGFuY2VvZiBGbGV4R0wpID8gdGhpcyA6IHt9O1xuXG5cbiAgICB2YXIgb3B0aW9ucyA9IGFyZyB8fCB7fSxcbiAgICAgICAgY29udGFpbmVyID0gb3B0aW9ucy5jb250YWluZXIgfHwgbnVsbCxcbiAgICAgICAgY2FudmFzID0gb3B0aW9ucy5jYW52YXMgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcbiAgICAgICAgd2lkdGggPSBvcHRpb25zLndpZHRoIHx8IG51bGwsXG4gICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0IHx8IG51bGwsXG4gICAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgfHwge1xuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGN0eCA9IG9wdGlvbnMuY29udGV4dCB8fCBvcHRpb25zLmN0eCB8fCBudWxsLFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYXJlZEZ1bmN0aW9uID0gb3B0aW9ucy5zaGFyZWRGdW5jdGlvbiB8fCB7fTtcblxuXG5cbiAgICBpZiAodHlwZW9mKGNhbnZhcykgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAoY2FudmFzWzBdID09IFwiI1wiKSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgZWxzZSBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYXZuYXMpO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnRhaW5lciA9ICh0eXBlb2YoY29udGFpbmVyKSA9PSBcInN0cmluZ1wiKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcikgOiBjb250YWluZXI7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmIChoZWlnaHQgPT09IG51bGwpIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgfVxuICAgIC8vIHdpZHRoIC09IHBhZGRpbmcubGVmdCArIHBhZGRpbmcucmlnaHQ7XG4gICAgLy8gaGVpZ2h0IC09IHBhZGRpbmcudG9wICsgcGFkZGluZy5ib3R0b207XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpbkxlZnQgPSBwYWRkaW5nLmxlZnQgKyBcInB4XCI7XG4gICAgY2FudmFzLnN0eWxlLm1hcmdpblRvcCA9IHBhZGRpbmcudG9wICsgXCJweFwiO1xuXG5cbiAgICBpZiAoY3R4ID09PSBudWxsKVxuICAgICAgICBjdHggPSBzZXR1cFdlYkdMKGNhbnZhcyk7XG4gICAgZmxleGdsLmN0eCA9IGN0eDtcbiAgICBmbGV4Z2wuY2FudmFzID0gY2FudmFzO1xuICAgIGZsZXhnbC5yZXNvdXJjZXMgPSByZXNvdXJjZXM7XG4gICAgY3R4Ll9kaWN0ID0gb3B0aW9ucy5lbnYgfHwgb3B0aW9ucy5kaWN0IHx8IG9wdGlvbnMuZGljdGlvbmFyeSB8fCB7fTtcblxuICAgIHZhciByZXNvdXJjZXMgPSBuZXcgUmVzb3VyY2UoY3R4KSxcbiAgICAgICAgZnJhbWVidWZmZXJzID0gbmV3IEZyYW1lYnVmZmVyKGN0eCksXG4gICAgICAgIHByb2dyYW0gPSBuZXcgUHJvZ3JhbShjdHgsIHJlc291cmNlcyksXG4gICAgICAgIHJlYWxQcm9ncmFtID0gbnVsbDtcblxuXG4gICAgdmFyIGJsZW5kRXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkVYVF9ibGVuZF9taW5tYXhcIik7XG4gICAgaWYgKGJsZW5kRXh0KSB7XG4gICAgICAgIGN0eC5NQVhfRVhUID0gYmxlbmRFeHQuTUFYX0VYVDtcbiAgICAgICAgY3R4Lk1JTl9FWFQgPSBibGVuZEV4dC5NSU5fRVhUO1xuICAgIH1cbiAgICBjdHguZXh0ID0gY3R4LmdldEV4dGVuc2lvbihcIkFOR0xFX2luc3RhbmNlZF9hcnJheXNcIik7XG4gICAgZW5hYmxlRXh0ZW5zaW9uKFtcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdFwiLFxuICAgICAgICBcIk9FU190ZXh0dXJlX2Zsb2F0X2xpbmVhclwiLFxuICAgICAgICAvLyBcIk9FU190ZXh0dXJlX2hhbGZfZmxvYXRcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhclwiXG4gICAgXSk7XG4gICAgaWYgKGNvbnRhaW5lcilcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cblxuICAgIGZ1bmN0aW9uIHNldHVwV2ViR0woY2FudmFzKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IFtcIndlYmdsXCIsIFwiZXhwZXJpbWVudGFsLXdlYmdsXCJdO1xuICAgICAgICB2YXIgZ2wgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGdsID0gY2FudmFzLmdldENvbnRleHQobmFtZXNbaV0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlmIChnbCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVuYWJsZUV4dGVuc2lvbihleHRlbnNpb25zKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShleHRlbnNpb25zKSkgZXh0ZW5zaW9ucyA9IFtleHRlbnNpb25zXTtcbiAgICAgICAgZXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikge1xuICAgICAgICAgICAgdmFyIGV4dFByb3BzID0gY3R4LmdldEV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgICAgICAgICAgaWYgKGV4dFByb3BzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0UHJvcHMpLmZvckVhY2goZnVuY3Rpb24oZXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHQuaGFzT3duUHJvcGVydHkoZXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZXh0W2VwXSA9IGV4dFByb3BzW2VwXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZmxleGdsLmVuYWJsZUV4dGVuc2lvbiA9IGVuYWJsZUV4dGVuc2lvbjtcblxuICAgIC8qKlxuICAgICAqIEFsbG9jYXRlIEF0dHJpYnV0ZXMgaW4gdmVydGV4IGJ1ZmZlciBhcnJheSBzdG9yZWQgaW4gR1BVIG1lbW9yeVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuYXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJhdHRyaWJ1dGVcIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLmF0dHJpYnV0ZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC5hdHRyaWJ1dGUsIG5hbWUsIHsgLy9hZnRlciBhbGxvY2F0aW5nLCBmbGV4Z2wgZ2V0cyBuZXcga2V5IGF0dHJpYnV0ZSwgaGVscGluZyBlYXNpbHkgY2hhbmdlIGF0dHJpYnV0ZSBkYXRhLlxuICAgICAgICAgICAgICAgIGdldCgpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldChkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLmF0dHJpYnV0ZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcbiAgICAvLyBmbGV4Z2wuYnVmZmVyID0gZmxleGdsLmF0dHJpYnV0ZTsgLy9hbGlhc1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHVuaWZvcm0gdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudW5pZm9ybSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwidW5pZm9ybVwiLCBuYW1lLCB0eXBlLCBkYXRhKTtcbiAgICAgICAgaWYgKCFmbGV4Z2wudW5pZm9ybS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC51bmlmb3JtLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy51bmlmb3JtW25hbWVdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxvYWQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdHguaXNQcm9ncmFtKHJlYWxQcm9ncmFtKSkgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy51bmlmb3JtW25hbWVdLmxpbmsocmVhbFByb2dyYW0pOyAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICBmbGV4Z2wudW5pZm9ybS5zZXJpYWxpemUgPSBmdW5jdGlvbihhb2EpIHtcbiAgICAgICAgdmFyIHNhID0gW107XG4gICAgICAgIGFvYS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHNhID0gc2EuY29uY2F0KGEpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gc2E7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgVW5pZm9ybSB2YXJpYWJsZSBmb3IgV2ViR0wgc2hhZGVyIHByb2dyYW1zXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIHRleHR1cmUgdHlwZTogdW5zaWduZWRfYnl0ZSBvciBmbG9hdCwgLi4uXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRhdGEgZGF0YSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW2NoYW5uZWw9J2FscGhhJ10gV2ViR0wgZm9ybWF0cyAocmdiYSwgYWxwaGEpXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbc2FtcGxlcj1udWxsXSBGTGV4R0wgVW5pZm9ybSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC50ZXh0dXJlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSwgZGltLCBjaGFubmVsLCBzYW1wbGVyKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInRleHR1cmVcIiwgbmFtZSwgdHlwZSwgZGltLCBjaGFubmVsLCBkYXRhLCBzYW1wbGVyKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZsZXhnbC50ZXh0dXJlLCBuYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudGV4dHVyZVtuYW1lXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wudGV4dHVyZS51cGRhdGUgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICByZXNvdXJjZXMudGV4dHVyZVtuYW1lXS51cGRhdGUoZGF0YSwgb2Zmc2V0LCBkaW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW3R5cGVdIFZhcnlpbmcgdmFyaWFibGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW3NpemU9MV0gZGF0YSBhcnJheVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnZhcnlpbmcgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBzaXplKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInZhcnlpbmdcIiwgbmFtZSwgdHlwZSwgc2l6ZSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBhdHRyaWJ1dGUgdHlwZTogZmxvYXQsIHZlYzIsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkaW0gW3dpZHRoLCBoZWlnaHRdXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZT1udWxsXSBGTGV4R0wgVGV4dHVyZSBPYmplY3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlciA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRleHR1cmUgfHwgcmVzb3VyY2VzLmFsbG9jYXRlKCd0ZXh0dXJlJywgbmFtZSwgdHlwZSwgZGltLCAncmdiYScsIG51bGwpO1xuICAgICAgICBmcmFtZWJ1ZmZlcnMuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSk7XG5cbiAgICAgICAgaWYgKCFmbGV4Z2wuZnJhbWVidWZmZXIuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuZnJhbWVidWZmZXIsIG5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQgPSBmdW5jdGlvbihuYW1lLCBwcm9ncmFtKSB7XG4gICAgICAgIGZyYW1lYnVmZmVyc1tuYW1lXS5lbmFibGVSZWFkKHByb2dyYW0pO1xuICAgIH1cblxuICAgIGZsZXhnbC5iaW5kRnJhbWVidWZmZXIgPSBmdW5jdGlvbihmYk5hbWUpIHtcbiAgICAgICAgaWYgKGZiTmFtZSA9PT0gbnVsbClcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihjdHguRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyc1tmYk5hbWVdLnB0cik7XG4gICAgfVxuXG4gICAgZmxleGdsLnN1YnJvdXRpbmUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJzdWJyb3V0aW5lXCIsIG5hbWUsIHR5cGUsIGZuKTtcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wucGFyYW1ldGVyID0gZnVuY3Rpb24oa2V5VmFsdWVQYWlycykge1xuICAgICAgICBPYmplY3Qua2V5cyhrZXlWYWx1ZVBhaXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBrZXlWYWx1ZVBhaXJzW2tleV07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjdHguX2RpY3Rba2V5XSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eC5fZGljdCwga2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5VmFsdWVQYWlyc1trZXldW2krK107XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Ll9kaWN0W2tleV0gPSBuZXdBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihjdHguX2RpY3Rba2V5XSkgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGljdEtleXMgPSBPYmplY3Qua2V5cyhjdHguX2RpY3Rba2V5XSk7XG4gICAgICAgICAgICAgICAgZnhnbC51bmlmb3JtKCdkaWN0JytrZXksICdmbG9hdCcsIGRpY3RLZXlzLm1hcChkPT5jdHguX2RpY3Rba2V5XVtkXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5kaWN0aW9uYXJ5ID0gZmxleGdsLnBhcmFtZXRlcjtcbiAgICBmbGV4Z2wuc2hhZGVyID0gcHJvZ3JhbS5zaGFkZXI7XG5cblxuICAgIGZsZXhnbC5hcHAgPSBmdW5jdGlvbihuYW1lLCBwcm9wcywgbnVtKSB7XG5cbiAgICAgICAgLy8gZmIgPSBwcm9wcy5mcmFtZWJ1ZmZlciB8fCBudWxsO1xuXG4gICAgICAgIGlmKG51bSA9PT0gMCl7XG4gICAgICAgICAgICBjdHgudmlld3BvcnQoMCwgMCwgMTAyNCwgMSk7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHByb3BzLnZzb3VyY2UsIHByb3BzLmZzb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmVbJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pO1xuXG4gICAgICAgICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcignZl9zdW1fdGV4dHVyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSBpZihudW0gPT09IDEpe1xuICAgICAgICAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgcHJvcHMudnNvdXJjZSwgcHJvcHMuZnNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2Zfc3VtX3RleHR1cmUnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIGlmKG51bSA9PT0gMil7XG4gICAgICAgICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcihudWxsKTtcblxuICAgICAgICAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIDEwMjQsIDEpO1xuICAgICAgICAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCBwcm9wcy52c291cmNlLCBwcm9wcy5mc291cmNlKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuXG4gICAgICAgICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcignZl9tZW1fdGV4dHVyZV8xJyk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMCcsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9zdW1fdGV4dHVyZScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYobnVtID09PSAzKXtcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuXG4gICAgICAgICAgICBjdHgudmlld3BvcnQoMCwgMCwgMTAyNCwgMSk7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHByb3BzLnZzb3VyY2UsIHByb3BzLmZzb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG5cbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX21lbV90ZXh0dXJlXzAnKTtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9tZW1fdGV4dHVyZV8xJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSBpZihudW0gPT09IDQpe1xuICAgICAgICAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgcHJvcHMudnNvdXJjZSwgcHJvcHMuZnNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYobnVtID09PSA1KXtcbiAgICAgICAgICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIHByb3BzLnZzb3VyY2UsIHByb3BzLmZzb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX21lbV90ZXh0dXJlXzAnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0aGlzLnVuaWZvcm1bJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pOyAgICBcbiAgICAgICAgLy8gdmFyIGRyYXcgPSBwcm9wcy5yZW5kZXIgfHwgcHJvcHMuZHJhdztcblxuICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAvLyAgICAgLy8gdmFyIGdsID0gZmxleGdsLnByb2dyYW0obmFtZSk7XG4gICAgICAgIC8vICAgICByZXR1cm4gZHJhdy5jYWxsKGN0eCwgYXJncyk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBjdHguZHJhd0FycmF5cyhjdHguTElORVMsIDAsIDIpO1xuXG4gICAgfVxuXG4gICAgZmxleGdsLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsZXhnbDtcbn1cbiIsImltcG9ydCBGbGV4R0wgZnJvbSAnLi9mbGV4Z2wnO1xuXG4oZnVuY3Rpb24gbWFrZUdsb2JhbCgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93LkZsZXhHTCA9IEZsZXhHTDtcbiAgfVxufSkoKTtcbiIsImltcG9ydCBUZXh0dXJlIGZyb20gJy4vdGV4dHVyZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZyYW1lYnVmZmVyKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIGZyYW1lYnVmZmVyID0gKHRoaXMgaW5zdGFuY2VvZiBGcmFtZWJ1ZmZlcikgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZyYW1lYnVmZmVyLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgdGV4dHVyZSkge1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdID0ge1xuICAgICAgICAgICAgcHRyOiBjdHguY3JlYXRlRnJhbWVidWZmZXIoKSxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8IFwiZmxvYXRcIixcbiAgICAgICAgICAgIHdpZHRoOiBkaW1bMF0gfHwgMTAyNCxcbiAgICAgICAgICAgIGhlaWdodDogZGltWzFdIHx8IDEwMjQsXG4gICAgICAgICAgICB0ZXh0dXJlOiB0ZXh0dXJlIHx8IG51bGwsXG4gICAgICAgICAgICAvLyByZW5kZXJidWZmZXI6IGN0eC5jcmVhdGVSZW5kZXJidWZmZXIoKSxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIChmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlID09PSBudWxsKSB7XG4gICAgICAgIC8vICAgICB2YXIgYnVmID0gKHR5cGUgPT0gJ2Zsb2F0JykgP1xuICAgICAgICAvLyAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoZGltWzBdICogZGltWzFdICogNCkgOlxuICAgICAgICAvLyAgICAgICAgIG5ldyBVaW50OEFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpO1xuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9IFRleHR1cmUoY3R4KS5jcmVhdGUobmFtZSwgdHlwZSwgZGltLCBcInJnYmFcIiwgYnVmKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIHZhciByZW5kZXJidWZmZXIgPSBmcmFtZWJ1ZmZlcltuYW1lXS5yZW5kZXJidWZmZXI7XG4gICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcltuYW1lXS5wdHIpO1xuICAgICAgICAvLyBjdHguYmluZFJlbmRlcmJ1ZmZlcihjdHguUkVOREVSQlVGRkVSLCByZW5kZXJidWZmZXIpO1xuICAgICAgICAvLyBjdHgucmVuZGVyYnVmZmVyU3RvcmFnZShcbiAgICAgICAgLy8gICAgIGN0eC5SRU5ERVJCVUZGRVIsXG4gICAgICAgIC8vICAgICBjdHguREVQVEhfQ09NUE9ORU5UMTYsXG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS53aWR0aCxcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLmhlaWdodFxuICAgICAgICAvLyApO1xuICAgICAgICBjdHguZnJhbWVidWZmZXJUZXh0dXJlMkQoXG4gICAgICAgICAgICBjdHguRlJBTUVCVUZGRVIsXG4gICAgICAgICAgICBjdHguQ09MT1JfQVRUQUNITUVOVDAsXG4gICAgICAgICAgICBjdHguVEVYVFVSRV8yRCxcbiAgICAgICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUucHRyLFxuICAgICAgICAgICAgMFxuICAgICAgICApO1xuICAgICAgICAvLyBjdHguZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoXG4gICAgICAgIC8vICAgICBjdHguRlJBTUVCVUZGRVIsXG4gICAgICAgIC8vICAgICBjdHguREVQVEhfQVRUQUNITUVOVCxcbiAgICAgICAgLy8gICAgIGN0eC5SRU5ERVJCVUZGRVIsXG4gICAgICAgIC8vICAgICByZW5kZXJidWZmZXJcbiAgICAgICAgLy8gKTtcbiAgICAgICAgLy8gY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBudWxsKTtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5lbmFibGVSZWFkID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgY3R4LmFjdGl2ZVRleHR1cmUoY3R4LlRFWFRVUkUwICsgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy50ZXh0dXJlLnB0cik7XG4gICAgICAgICAgICB0aGlzLnRleHR1cmUubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMudGV4dHVyZS5uYW1lKTtcbiAgICAgICAgICAgIGN0eC51bmlmb3JtMWkodGhpcy50ZXh0dXJlLmxvY2F0aW9uLCB0aGlzLnRleHR1cmUuaW5kZXgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZyYW1lYnVmZmVyW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY3R4LmJpbmRSZW5kZXJidWZmZXIoZ2wuUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVJlbmRlcmJ1ZmZlcih0aGlzLnJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUucHRyKVxuICAgICAgICAgICAgY3R4LmRlbGV0ZUZyYW1lYnVmZmVyKHRoaXMucHRyKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZnJhbWVidWZmZXJbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZyYW1lYnVmZmVyO1xufVxuIiwiaW1wb3J0IFNoYWRlciBmcm9tICcuL3NoYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFByb2dyYW0oZ2xDb250ZXh0LCByZXNvdXJjZXMpIHtcblxuICAgIHZhciBwcm9ncmFtID0ge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFkZXJzID0gbmV3IFNoYWRlcihnbENvbnRleHQsIHJlc291cmNlcyk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTaGFkZXIoZ2wsIHR5cGUsIHNvdXJjZSkge1xuICAgICAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZzLCBmcykge1xuICAgICAgICB2YXIgbmFtZSA9IG5hbWUgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICB2cyA9IHZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZnMgPSBmcyB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcblxuICAgICAgICBpZiAoa2VybmVscy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBrZXJuZWxzW25hbWVdID0gY3R4LmNyZWF0ZVByb2dyYW0oKTtcblxuICAgICAgICBrZXJuZWxzW25hbWVdLnZzID0gKHR5cGVvZiB2cyA9PSBcIm9iamVjdFwiKSA/IHZzIDogc2hhZGVycy52ZXJ0ZXhbdnNdO1xuICAgICAgICBrZXJuZWxzW25hbWVdLmZzID0gKHR5cGVvZiBmcyA9PSBcIm9iamVjdFwiKSA/IGZzIDogc2hhZGVycy5mcmFnbWVudFtmc107XG5cbiAgICAgICAgY3R4LmF0dGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLnZzKTtcbiAgICAgICAgY3R4LmF0dGFjaFNoYWRlcihrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmZzKTtcbiAgICAgICAgY3R4LmxpbmtQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICB2YXIgbGlua2VkID0gY3R4LmdldFByb2dyYW1QYXJhbWV0ZXIoa2VybmVsc1tuYW1lXSwgY3R4LkxJTktfU1RBVFVTKTtcbiAgICAgICAgaWYgKCFsaW5rZWQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3IgPSBjdHguZ2V0UHJvZ3JhbUluZm9Mb2coa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICB0aHJvdyAoXCJFcnJvciBpbiBwcm9ncmFtIGxpbmtpbmc6XCIgKyBsYXN0RXJyb3IpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIH1cblxuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS52cy5kZXBzKTtcbiAgICAgICAgZGVwcyA9IGRlcHMuY29uY2F0KGtlcm5lbHNbbmFtZV0uZnMuZGVwcyk7XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZGVwcyA9IGRlcHM7XG5cbiAgICB9XG5cbiAgICBwcm9ncmFtLnVzZSA9IGZ1bmN0aW9uKG5hbWUsIHZzb3VyY2UsIGZzb3VyY2UpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LlZFUlRFWF9TSEFERVIsIHZzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIGZzID0gY3JlYXRlU2hhZGVyKGN0eCwgY3R4LkZSQUdNRU5UX1NIQURFUiwgZnNvdXJjZSk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZShuYW1lLCB2cywgZnMpO1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9ncmFtLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICBkZWxldGUga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb2dyYW0uc2hhZGVyID0gZnVuY3Rpb24oYXJnLCBmbikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZztcbiAgICAgICAgc2hhZGVycy5jcmVhdGUob3B0aW9ucywgZm4pO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLnZlcnRleCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgdHlwZTogXCJ2ZXJ0ZXhcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZm4ubmFtZSkgb3B0aW9ucy5uYW1lID0gZm4ubmFtZTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcnMuY3JlYXRlKG9wdGlvbnMsIGZuKTtcbiAgICB9XG5cbiAgICBwcm9ncmFtLmZyYWdtZW50ID0gZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICB0eXBlOiBcImZyYWdtZW50XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGZuLm5hbWUpIG9wdGlvbnMubmFtZSA9IGZuLm5hbWU7XG4gICAgICAgIHJldHVybiBzaGFkZXJzLmNyZWF0ZShvcHRpb25zLCBmbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2dyYW07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaGFkZXIoZ2xDb250ZXh0LCBnbFJlc291cmNlKSB7XG4gICAgXG4gICAgdmFyIHNoYWRlciA9ICh0aGlzIGluc3RhbmNlb2YgU2hhZGVyKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICByZXNvdXJjZSA9IGdsUmVzb3VyY2UsXG4gICAgICAgIHBhcmFtZXRlcnMgPSBjdHguX2RpY3QgfHwge307XG5cbiAgICBzaGFkZXIudmVydGV4ID0ge307XG4gICAgc2hhZGVyLmZyYWdtZW50ID0ge307XG5cbiAgICB2YXIgc2hhZGVyVHlwZSA9IHtcbiAgICAgICAgdmVydGV4OiBjdHguVkVSVEVYX1NIQURFUixcbiAgICAgICAgZnJhZ21lbnQ6IGN0eC5GUkFHTUVOVF9TSEFERVJcbiAgICB9O1xuXG4gICAgLy8gQ29udmVydCBKUyBmdW5jdGlvbnMgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIHRvR0xTTChyZXR1cm5UeXBlLCBuYW1lLCBmbil7XG5cbiAgICAgICAgdmFyIGdsc2wgPSByZXR1cm5UeXBlICsgJyAnICtcbiAgICAgICAgICAgIG5hbWUgKyAnKCcgKyBhcHBseUVudlBhcmFtZXRlcnMoZm4udG9TdHJpbmcoKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC92YXJcXHMrKFtcXHd8XFxkXSspXFxzKj1cXHMqbmV3XFxzKyhbXFx3fFxcZF0rKVxcKCguKilcXCkvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihleHByLCBuYW1lLCBkdHlwZSwgdmFsdWUpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHM7XG4gICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHMgPSBbZHR5cGUudG9Mb3dlckNhc2UoKSwgbmFtZSwgJz0nLCB2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzID0gW2R0eXBlLnRvTG93ZXJDYXNlKCksIG5hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcgJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICAucmVwbGFjZSgvZm9yXFxzKlxcKFxccyp2YXJcXHMrL2csICdmb3IoaW50ICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvdmFyXFxzL2csICdmbG9hdCAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3RoaXMuL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcJCguKilcXCgoLiopXFwpXFxzKig9fDspL2csIFwiJDEgJDIgJDNcIik7XG4gICAgICAgICAgICAvLyAucmVwbGFjZSgvXFwkKC4qPylcXC4vZywgXCIkMSBcIilcblxuICAgICAgICBpZihuYW1lID09IFwibWFpblwiKSB7XG4gICAgICAgICAgICBnbHNsID0gZ2xzbC5yZXBsYWNlKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccyp7LywgJyl7JykgKyBcIlxcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBnbHNsLm1hdGNoKC9mdW5jdGlvbi4qXFwoXFxzKihbXFxzXFxTXSo/KVxccypcXCkvKVsxXTtcblxuICAgICAgICAgICAgaWYoYXJncyAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IGFyZ3MucmVwbGFjZSgvXFwkKFtcXHd8XFxkXSspXy9nLCBcIiQxIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsc2wgPSBnbHNsXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL2Z1bmN0aW9uLipcXChcXHMqKFtcXHNcXFNdKj8pXFxzKlxcKS8sIGFyZ3MrJyknKSArIFwiXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdsc2w7XG4gICAgfVxuXG4gICAgLy9zZXQgcGFyYW1ldGVycyBpbiBKUyBmdW5jdGlvbnMgYmVmb3JlIGNvbnZlcnRpbmcgdG8gR0xTTCBjb2Rlc1xuICAgIGZ1bmN0aW9uIGFwcGx5RW52UGFyYW1ldGVycyhzdHIpe1xuICAgICAgICAvL2ZpbmQgYWxsICQoLi4uKSBhbmQgcmVwbGFjZSB0aGVtIHdpdGggcGFyYW1ldGVyc1xuICAgICAgICB2YXIgZW52UGFyYW0gPSBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYoZW52UGFyYW0ubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKFwiXFxcXCRcXFxcKChcIitlbnZQYXJhbS5qb2luKFwifFwiKStcIilcXFxcKVwiLFwiZ1wiKTtcbiAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKHJlLCBmdW5jdGlvbihtYXRjaGVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVyc1ttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHVuaWZvcm1zIHRvIGJlIHVzZWQgYXMgcGFyYW1ldGVycyBpbiBzaGFkZXJzLCBsaWtlICQodW5pZm9ybU5hbWUpXG4gICAgICAgIC8vIHZhciBlbnZVbmlmb3JtcyA9IE9iamVjdC5rZXlzKHJlc291cmNlLnVuaWZvcm0pO1xuICAgICAgICAvLyByZSA9IG5ldyBSZWdFeHAoXCJcXFxcJFxcXFwoKFwiK2VudlVuaWZvcm1zLmpvaW4oXCJ8XCIpK1wiKVxcXFwpXCIsXCJnXCIpO1xuICAgICAgICAvLyBzdHIgPSBzdHIucmVwbGFjZShyZSwgZnVuY3Rpb24obWF0Y2hlZCl7XG4gICAgICAgIC8vICAgICByZXR1cm4gcmVzb3VyY2UudW5pZm9ybVttYXRjaGVkLnNsaWNlKDIsbWF0Y2hlZC5sZW5ndGgtMSldLmRhdGE7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGlsZShzaGFkZXJUeXBlLCBzaGFkZXJTb3VyY2UpIHtcbiAgICAgICAgaWYgKHNoYWRlclR5cGUgIT09IGN0eC5WRVJURVhfU0hBREVSICYmIHNoYWRlclR5cGUgIT09IGN0eC5GUkFHTUVOVF9TSEFERVIpIHtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yOiB1bmtub3duIHNoYWRlciB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfc2hhZGVyID0gY3R4LmNyZWF0ZVNoYWRlcihzaGFkZXJUeXBlKTtcbiAgICAgICAgY3R4LnNoYWRlclNvdXJjZShfc2hhZGVyLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBjdHguY29tcGlsZVNoYWRlcihfc2hhZGVyKTtcblxuICAgICAgICAvLyBDaGVjayB0aGUgY29tcGlsZSBzdGF0dXMsIGdldCBjb21waWxlIGVycm9yIGlmIGFueVxuICAgICAgICB2YXIgY29tcGlsZWQgPSBjdHguZ2V0U2hhZGVyUGFyYW1ldGVyKF9zaGFkZXIsIGN0eC5DT01QSUxFX1NUQVRVUyk7XG4gICAgICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3IgPSBjdHguZ2V0U2hhZGVySW5mb0xvZyhfc2hhZGVyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHNoYWRlclNvdXJjZSArICdcXG4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgY29tcGlsaW5nIHNoYWRlciAnXCIgKyBfc2hhZGVyICsgXCInOlwiICsgbGFzdEVycm9yKTtcblxuICAgICAgICAgICAgY3R4LmRlbGV0ZVNoYWRlcihfc2hhZGVyKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9zaGFkZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGVwcyhmbikge1xuICAgICAgICB2YXIgZGVwcyA9IFtdLFxuICAgICAgICAgICAgc291cmNlQ29kZSA9IGZuLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzaGFkZXJBcmdzID0gc291cmNlQ29kZS5tYXRjaCgvZnVuY3Rpb25cXHMuKj9cXCgoW14pXSopXFwpLyksXG4gICAgICAgICAgICBhcmdzID0gKHNoYWRlckFyZ3MgIT09IG51bGwgJiYgc2hhZGVyQXJncy5sZW5ndGgpID8gc2hhZGVyQXJnc1sxXSA6IFtdO1xuICAgICAgICAvLyBhcmdzID0gYXJncy5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbnxcXHMpL2csICcnKTtcbiAgICAgICAgLy9cbiAgICAgICAgaWYoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBhcmdzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmcucmVwbGFjZSgvXFwvXFwqLipcXCpcXC8vLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBleHRyYURlcHMgPSBnZXRFeHRyYURlcHMoc291cmNlQ29kZSk7XG4gICAgICAgIGlmKGV4dHJhRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChleHRyYURlcHNcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlcHMuaW5kZXhPZihkKSA9PT0gLTE7XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZXBzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEV4dHJhRGVwcyhmblN0cmluZykge1xuICAgICAgICB2YXIgZXh0cmFEZXBzID0gZm5TdHJpbmcubWF0Y2goL3RoaXNcXC4oXFx3KykvZyk7XG4gICAgICAgIGlmKGV4dHJhRGVwcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXh0cmFEZXBzID0gZXh0cmFEZXBzLm1hcChmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5zbGljZSg1KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleHRyYURlcHMgfHwgW107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVjbGFyZURlcChkZXApIHtcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlLmdldChkZXApO1xuICAgICAgICBpZih0eXBlb2YgcmVzID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UvZGVwZW5kZW5jZSBcIicgKyBkZXAgKyAnXCIgaXMgbm90IGZvdW5kLicpO1xuICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgIHJldHVybiB0b0dMU0wocmVzLnR5cGUsIHJlcy5uYW1lLCByZXMuZm4pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gcmVzLmhlYWRlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVuaXF1ZURlcHMoZGVwcykge1xuICAgICAgICB2YXIgbmFtZXMgPSB7fTtcbiAgICAgICAgZGVwcy5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpe1xuICAgICAgICAgICAgbmFtZXNbZF0gPSBpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMobmFtZXMpO1xuICAgIH1cblxuICAgIHNoYWRlci5jcmVhdGUgPSBmdW5jdGlvbihhcmcsIGZuKXtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGFyZyB8fCB7fSxcbiAgICAgICAgICAgIG5hbWUgPSBvcHRpb24ubmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHR5cGUgPSBvcHRpb24udHlwZSB8fCBcInZlcnRleFwiLFxuICAgICAgICAgICAgZGVwcyA9IG9wdGlvbi5yZXF1aXJlIHx8IG9wdGlvbi5kZXBzIHx8IFtdLFxuICAgICAgICAgICAgcHJlY2lzaW9uID0gb3B0aW9uLnByZWNpc2lvbiB8fCBcImhpZ2hcIixcbiAgICAgICAgICAgIGRlYnVnID0gb3B0aW9uLmRlYnVnIHx8IGZhbHNlLFxuICAgICAgICAgICAgbWFpbiA9IG9wdGlvbi5tYWluIHx8IGZuIHx8IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgdmFyIHNoYWRlclNvdXJjZSA9ICdwcmVjaXNpb24gJyArIHByZWNpc2lvbiArICdwIGZsb2F0O1xcbic7XG5cbiAgICAgICAgaWYoZGVwcy5sZW5ndGggPT09IDApIGRlcHMgPSB1bmlxdWVEZXBzKGdldERlcHMobWFpbikpO1xuXG4gICAgICAgIC8vZ2V0IGRlcGVuZGVuY2UgZnJvbSBzdWJyb3V0aW5lcyBpZiBhbnlcbiAgICAgICAgdmFyIGV4dHJhRGVwcyA9IFtdLFxuICAgICAgICAgICAgc3ViUm91dGluZXMgPSBbXTtcblxuICAgICAgICBkZXBzLmZvckVhY2goZnVuY3Rpb24oZGVwKXtcbiAgICAgICAgICAgIHZhciByZXMgPSByZXNvdXJjZS5nZXQoZGVwKTtcbiAgICAgICAgICAgIGlmKHR5cGVvZiByZXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkZXApO1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yICgnRXJyb3IhIFVuZGVmaW5lZCB2YXJpYWJsZSBpbiBzaGFkZXI6ICcrICBkZXAubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJykge1xuICAgICAgICAgICAgICAgIHN1YlJvdXRpbmVzLnB1c2gocmVzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBzdWJEZXBzID0gZ2V0RXh0cmFEZXBzKHJlcy5mbi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBpZihzdWJEZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG1ha2UgdGhpcyByZWN1cnNpdmUgdG8gY2hlY2sgYWxsIHN1YnJvdXRpbmUgZGVwc1xuICAgICAgICAgICAgICAgICAgICBzdWJEZXBzLmZvckVhY2goZnVuY3Rpb24oc2RlcCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JlcyA9IHJlc291cmNlLmdldChzZGVwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyZXMucmVzb3VyY2VUeXBlID09ICdzdWJyb3V0aW5lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KGdldEV4dHJhRGVwcyhzcmVzLmZuLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICBleHRyYURlcHMgPSBleHRyYURlcHMuY29uY2F0KHN1YkRlcHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBpZihleHRyYURlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYWxsRGVwcyA9IGV4dHJhRGVwc1xuICAgICAgICAgICAgLy8gLmZpbHRlcihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZGVwcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAuY29uY2F0KGRlcHMuZmlsdGVyKGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWJSb3V0aW5lcy5pbmRleE9mKGQpID09PSAtMTtcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmNvbmNhdChzdWJSb3V0aW5lcyk7XG5cbiAgICAgICAgICAgIGRlcHMgPSB1bmlxdWVEZXBzKGFsbERlcHMpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZihBcnJheS5pc0FycmF5KGRlcHMpKXtcbiAgICAgICAgICAgIGRlcHMuZm9yRWFjaChmdW5jdGlvbihkZXApe1xuICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGVvZihkZXBzKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGVwcykuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZVR5cGUpe1xuICAgICAgICAgICAgICAgIGRlcHNbcmVzb3VyY2VUeXBlXS5mb3JFYWNoKGZ1bmN0aW9uKGRlcCl7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlclNvdXJjZSArPSBkZWNsYXJlRGVwKGRlcCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgc2hhZGVyU291cmNlICs9IHRvR0xTTCgndm9pZCcsICdtYWluJywgbWFpbik7XG5cbiAgICAgICAgaWYoZGVidWcpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFkZXJTb3VyY2UpO1xuXG4gICAgICAgIHZhciBfc2hhZGVyID0gY29tcGlsZShzaGFkZXJUeXBlW3R5cGVdLCBzaGFkZXJTb3VyY2UpO1xuICAgICAgICBfc2hhZGVyLl9zaGFkZXJUeXBlID0gc2hhZGVyVHlwZVt0eXBlXTtcbiAgICAgICAgX3NoYWRlci5kZXBzID0gZGVwcztcbiAgICAgICAgX3NoYWRlci5zb3VyY2UgPSBzaGFkZXJTb3VyY2U7XG4gICAgICAgIHNoYWRlclt0eXBlXVtuYW1lXSA9IF9zaGFkZXI7XG4gICAgICAgIHJldHVybiBfc2hhZGVyO1xuICAgIH1cblxuICAgIHJldHVybiBzaGFkZXI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9