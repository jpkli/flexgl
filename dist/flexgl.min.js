!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t,r,i){var a=this instanceof n?this:{},u=e;function o(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t}return a.create=function(e,t,r){return Array.isArray(r)&&r.filter(function(e){return Array.isArray(e)})&&(r=o(r)),a[e]={type:t,name:e,data:r,location:null,size:parseInt(t.slice(3,4))||parseInt(t.slice(4,5))||1},a[e].link=function(e){return void 0!==this.data&&null!==this.data&&(this.location=u.getUniformLocation(e,this.name),function(){var e,t=this.type,r=this.location,n=this.size,i=this.data;Array.isArray(i)&&i.filter(function(e){return Array.isArray(e)})&&(i=o(i)),"float"!=t&&"int"!=t||Array.isArray(i)||ArrayBuffer.isView(i)||(i=[i]),"vec"==t.slice(0,3)||"float"==t?(e=new Float32Array(i),u["uniform"+n+"fv"](r,e)):"ivec"==t.slice(0,4)||"int"==t?(e=new Int32Array(i),u["uniform"+n+"iv"](r,e)):"mat"==t.slice(0,3)?(e=new Float32Array(i),u["uniformMatrix"+n+"fv"](r,!1,e)):"sampler2D"==t&&i.hasOwnProperty("resourceType")&&"texture"==i.resourceType&&(u.activeTexture(u.TEXTURE0+i.index),u.bindTexture(u.TEXTURE_2D,i.ptr),u.uniform1i(r,i.index))}.call(this)),this},a[e].load=function(e){return this.data=e,this},a[e].header=function(){var e="uniform "+this.type+" "+this.name,r=0;return"sampler2D"!=this.type&&(r=this.data.length/this.size),r>1&&"mat4"!=t&&(e+="["+r+"]"),e+";\n"},a[e]},a}function i(e){var t=this instanceof i?this:{},r={};t.uniform=new n(e),t.attribute=new function e(t){var r=this instanceof e?this:{},n=t,i=0;function a(e,t){(Array.isArray(t)||ArrayBuffer.isView(t))&&(ArrayBuffer.isView(t)||(t=new Float32Array(t)),r[e].data=t,n.bindBuffer(n.ARRAY_BUFFER,r[e].ptr),n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW))}return r.create=function(e,t,u){return r[e]={name:e,type:t||"float",data:null,location:i++,ptr:n.createBuffer(),size:parseInt(t.slice(3,4))||1},null!==u&&u.length&&a(e,u),r[e].link=function(e){return n.bindBuffer(n.ARRAY_BUFFER,this.ptr),this.location=n.getAttribLocation(e,this.name),n.vertexAttribPointer(this.location,this.size,n.FLOAT,!1,0,0),n.enableVertexAttribArray(this.location),this},r[e].load=function(e){return a(this.name,e),this},r[e].header=function(){return"attribute "+this.type+" "+this.name+";\n"},r[e].delete=function(){n.deleteBuffer(this.ptr)},r[e]},r}(e),t.texture=new function e(t){var r=this instanceof e?this:{},i=t,a=0;function u(e,t){var n=i[r[e].type.toUpperCase()],a=i[r[e].channel.toUpperCase()],u=r[e].dim[0],o=r[e].dim[1];r[e].data=t,i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texImage2D(i.TEXTURE_2D,0,a,u,o,0,a,n,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}return r.create=function(e,o,s,f,c,l){var d=r.hasOwnProperty(e)?r[e].index:a++;return r[e]={name:e,index:d,type:o||"float",dim:s||[512,512],channel:f||"alpha",data:null,location:null,sampler:l||null,ptr:i.createTexture()},u(e,c),null===r[e].sampler?r[e].sampler=n(i).create(e,"sampler2D",r[e]):r[e].sampler.data=r[e],r[e].link=function(t){return void 0!==this.sampler.data&&null!==this.sampler.data||(this.sampler.data=r[e]),this.sampler.link(t),this},r[e].load=function(e){return u(this.name,e),this},r[e].copyFromFBO=function(){i.bindTexture(i.TEXTURE_2D,this.ptr),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,this.dim[0],this.dim[1],0),i.bindTexture(i.TEXTURE_2D,null)},r[e].update=function(e,t,n){return function(e,t,n,a){var u=i[r[e].type.toUpperCase()],o=i[r[e].channel.toUpperCase()],s=a[0]||r[e].dim[0],f=a[1]||r[e].dim[1];i.bindTexture(i.TEXTURE_2D,r[e].ptr),i.texSubImage2D(i.TEXTURE_2D,0,n[0],n[1],s,f,o,u,t),i.bindTexture(i.TEXTURE_2D,null)}(this.name,e,t,n),this},r[e].resize=function(e,t){this.dim=e,u(this.name,t)},r[e].delete=function(){t.deleteTexture(this.ptr)},r[e].header=function(){return this.name==this.sampler.name?"uniform sampler2D "+this.sampler.name+";\n":""},r[e]},r}(e),t.varying=new function e(t){var r=this instanceof e?this:{};return r.create=function(e,t,n){return r[e]={name:e,type:t||"float",size:n||1},r[e].link=function(){},r[e].header=function(){var e="varying "+this.type+" "+this.name;return this.size>1&&(e+="["+this.size+"]"),e+";\n"},r[e]},r}(e),t.subroutine=new function e(){var t=this instanceof e?this:{};return t.create=function(e,r,n){return t[e]={name:e,type:r||"float",fn:n,resourceType:"subroutine"},t[e].link=function(e){return this},t[e].load=function(r){return t[e].fn=r,this},t[e].header=function(){return this.fn.toString()},t[e]},t};var a=["uniform","attribute","texture","varying","subroutine"];return t.allocate=function(e){if(-1===a.indexOf(e))throw Error("Error: Invalid resource type: "+e);var n=t[e].create.apply(null,Array.prototype.slice.call(arguments,1));return n.resourceType=e,r[n.name]=n,r.hasOwnProperty(n.name)||Object.defineProperty(r,n.name,{get:function(){return r[n.name]},set:function(e){r[n.name].load(e)}}),n},t.link=function(e,t){(Array.isArray(t)?t:Object.keys(r)).forEach(function(t){r.hasOwnProperty(t)&&r[t].link(e)})},t.get=function(e){return r[e]},t.create=t.allocate,t}r.r(t),"undefined"!=typeof window&&(window.FlexGL=function e(t){var r=this instanceof e?this:{},n=t||{},a=n.container||null,u=n.canvas||document.createElement("canvas"),o=n.width||null,s=n.height||null,f=n.padding||{left:0,right:0,top:0,bottom:0},c=n.context||n.ctx||null;n.sharedFunction,"string"==typeof u&&(u="#"==u[0]?document.getElementById(cavnas.substring(1)):document.getElementById(cavnas)),a&&(a="string"==typeof a?document.getElementById(a):a,null===o&&(o=a.clientWidth),null===s&&(s=a.clientHeight)),u.width=o,u.height=s,u.style.position="absolute",u.style.marginLeft=f.left+"px",u.style.marginTop=f.top+"px",null===c&&(c=function(e){for(var t=["webgl","experimental-webgl"],r=null,n=0;n<t.length;++n){try{r=e.getContext(t[n])}catch(e){}if(r)break}return r}(u)),r.ctx=c,r.canvas=u,r.resources=l,c._dict=n.env||n.dict||n.dictionary||{};var l=new i(c),d=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i,a){return r[e]={ptr:n.createFramebuffer(),name:e,type:t||"float",width:i[0]||1024,height:i[1]||1024,texture:a||null},n.bindFramebuffer(n.FRAMEBUFFER,r[e].ptr),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r[e].texture.ptr,0),n.bindFramebuffer(n.FRAMEBUFFER,null),r[e].enableRead=function(e){n.activeTexture(n.TEXTURE0+this.texture.index),n.bindTexture(n.TEXTURE_2D,this.texture.ptr),this.texture.location=n.getUniformLocation(e,this.texture.name),n.uniform1i(this.texture.location,this.texture.index)},r[e].delete=function(){n.bindRenderbuffer(gl.RENDERBUFFER,null),n.bindFramebuffer(gl.FRAMEBUFFER,null),n.deleteRenderbuffer(this.renderbuffer),n.deleteTexture(this.texture.ptr),n.deleteFramebuffer(this.ptr)},r[e]},r}(c),h=new function(e,t){var r={},n=e,i={},a=new function e(t){var r=this instanceof e?this:{},n=t;return r.create=function(e,t,i){function a(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;console.log(e.getShaderInfoLog(n)),e.deleteShader(n)}function u(e,t){var r=/\s*(attribute|uniform)\s+\w+\s+(\w+)/;e.split("\n").forEach(function(e){var n=r.exec(e);n&&t.push(n[2])})}r[e]={name:e,vertex_shader_source:t,fragment_shader_source:i,vs:a(n,n.VERTEX_SHADER,t),fs:a(n,n.FRAGMENT_SHADER,i)},r[e].vs.deps=[],u(t,r[e].vs.deps),r[e].fs.deps=[],u(i,r[e].vs.deps)},r}(e);return r.create=function(e,t,r){e=e||"default",t=t||"default",r=r||"default";var a=[];if(i.hasOwnProperty(e)&&this.delete(e),i[e]=n.createProgram(),i[e].vs=t,i[e].fs=r,n.attachShader(i[e],i[e].vs),n.attachShader(i[e],i[e].fs),n.linkProgram(i[e]),!n.getProgramParameter(i[e],n.LINK_STATUS))throw"Error in program linking:"+n.getProgramInfoLog(i[e]);a=(a=a.concat(i[e].vs.deps)).concat(i[e].fs.deps),i[e].deps=a},r.use=function(e,r,u){return i.hasOwnProperty(e)?(n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e]):(a.create(e,r,u),this.create(e,a[e].vs,a[e].fs),n.useProgram(i[e]),t.link(i[e],i[e].deps),i[e])},r.delete=function(e){i.hasOwnProperty(e)&&(n.detachShader(i[e],i[e].vs),n.detachShader(i[e],i[e].fs),n.deleteProgram(i[e]),delete i[e])},r}(c,l),p=null,m=c.getExtension("EXT_blend_minmax");function E(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){var t=c.getExtension(e);null!==t&&Object.keys(t).forEach(function(e){ext.hasOwnProperty(e)||(c.ext[e]=t[e])})})}return m&&(c.MAX_EXT=m.MAX_EXT,c.MIN_EXT=m.MIN_EXT),c.ext=c.getExtension("ANGLE_instanced_arrays"),E(["OES_texture_float","OES_texture_float_linear"]),a&&a.appendChild(u),r.enableExtension=E,r.attribute=function(e,t,n){return l.allocate("attribute",e,t,n),r.attribute.hasOwnProperty(e)||Object.defineProperty(r.attribute,e,{get:()=>l.attribute[e],set(t){l.attribute[e].load(t)}}),r},r.uniform=function(e,t,n){return l.allocate("uniform",e,t,n),r.uniform.hasOwnProperty(e)||Object.defineProperty(r.uniform,e,{get:function(){return l.uniform[e]},set:function(t){l.uniform[e].load(t),c.isProgram(p)&&l.uniform[e].link(p)}}),r},r.uniform.serialize=function(e){var t=[];return e.forEach(function(e){t=t.concat(e)}),t},r.texture=function(e,t,n,i,a,u){return l.allocate("texture",e,t,i,a,n,u),Object.defineProperty(r.texture,e,{get:function(){return l.texture[e]},set:function(t){l.texture[e].load(t)}}),r},r.texture.update=function(e,t,r,n){l.texture[e].update(t,r,n)},r.varying=function(e,t,n){return l.allocate("varying",e,t,n),r},r.framebuffer=function(e,t,n,i){return i=i||l.allocate("texture",e,t,n,"rgba",null),d.create(e,t,n,i),r.framebuffer.hasOwnProperty(e)||Object.defineProperty(r.framebuffer,e,{get:function(){return d[e]}}),r},r.framebuffer.enableRead=function(e,t){d[e].enableRead(t)},r.bindFramebuffer=function(e){null===e?c.bindFramebuffer(c.FRAMEBUFFER,null):c.bindFramebuffer(c.FRAMEBUFFER,d[e].ptr)},r.subroutine=function(e,t,n){return l.allocate("subroutine",e,t,n),r},r.parameter=function(e){return Object.keys(e).forEach(function(t){if(c._dict[t]=e[t],Array.isArray(c._dict[t])){var r=0;Object.defineProperty(c._dict,t,{get:function(){return e[t][r++]},set:function(e){r=0,c._dict[t]=e}})}else if("object"==typeof c._dict[t]){var n=Object.keys(c._dict[t]);fxgl.uniform("dict"+t,"float",n.map(e=>c._dict[t][e]))}}),r},r.dictionary=r.parameter,r.shader=h.shader,r.app=function(e,t){return function(n){return p=h.use(e,t.vertex_shader_source,t.fragment_shader_source),t.render.call(r,n)}},r.dimension=function(){return[u.width,u.height]},r})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VuaWZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RleHR1cmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhcnlpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N1YnJvdXRpbmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZsZXhnbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVuZGxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mcmFtZWJ1ZmZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcHJvZ3JhbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhZGVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwiZGVmYXVsdCIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImUiLCJVbmlmb3JtIiwiZ2xDb250ZXh0IiwidHlwZSIsImRhdGEiLCJ1bmlmb3JtIiwidGhpcyIsImN0eCIsInNlcmlhbGl6ZUFycmF5IiwiYXJyYXlPZkFycmF5Iiwic2EiLCJmb3JFYWNoIiwiYSIsImNvbmNhdCIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImxvY2F0aW9uIiwic2l6ZSIsInBhcnNlSW50Iiwic2xpY2UiLCJsaW5rIiwicHJvZ3JhbSIsImdldFVuaWZvcm1Mb2NhdGlvbiIsImJ1ZiIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiRmxvYXQzMkFycmF5IiwiSW50MzJBcnJheSIsInJlc291cmNlVHlwZSIsImFjdGl2ZVRleHR1cmUiLCJURVhUVVJFMCIsImluZGV4IiwiYmluZFRleHR1cmUiLCJURVhUVVJFXzJEIiwicHRyIiwidW5pZm9ybTFpIiwibG9hZCIsImhlYWRlciIsImxlbiIsImxlbmd0aCIsIlJlc291cmNlIiwicmVzb3VyY2UiLCJncHVSZXNvdXJjZXMiLCJhdHRyaWJ1dGUiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsInNldEF0dHJpYnV0ZSIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiU1RBVElDX0RSQVciLCJjcmVhdGVCdWZmZXIiLCJnZXRBdHRyaWJMb2NhdGlvbiIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImVuYWJsZVZlcnRleEF0dHJpYkFycmF5IiwiYXJyYXlCdWZmZXIiLCJkZWxldGUiLCJkZWxldGVCdWZmZXIiLCJ0ZXh0dXJlIiwiVGV4dHVyZSIsInRleHR1cmVJRCIsInNldFRleHR1cmUiLCJ0ZXhEYXRhIiwidG9VcHBlckNhc2UiLCJmb3JtYXQiLCJjaGFubmVsIiwid2lkdGgiLCJkaW0iLCJoZWlnaHQiLCJ0ZXhJbWFnZTJEIiwidGV4UGFyYW1ldGVyaSIsIlRFWFRVUkVfTUlOX0ZJTFRFUiIsIk5FQVJFU1QiLCJURVhUVVJFX01BR19GSUxURVIiLCJURVhUVVJFX1dSQVBfUyIsIkNMQU1QX1RPX0VER0UiLCJURVhUVVJFX1dSQVBfVCIsInNhbXBsZXIiLCJ0ZXhJbmRleCIsImNyZWF0ZVRleHR1cmUiLCJjb3B5RnJvbUZCTyIsImNvcHlUZXhJbWFnZTJEIiwiUkdCQSIsInVwZGF0ZSIsIm9mZnNldCIsInRleFN1YkltYWdlMkQiLCJyZXNpemUiLCJkZWxldGVUZXh0dXJlIiwidmFyeWluZyIsIlZhcnlpbmciLCJzdWJyb3V0aW5lIiwiU3Vicm91dGluZSIsImZuIiwidG9TdHJpbmciLCJyZXNvdXJjZVR5cGVzIiwiYWxsb2NhdGUiLCJpbmRleE9mIiwiRXJyb3IiLCJyZXMiLCJhcHBseSIsImFyZ3VtZW50cyIsInNldCIsInJlc291cmNlX25hbWVzIiwia2V5cyIsInJlc291cmNlTmFtZSIsImZsZXhnbCIsIndpbmRvdyIsIkZsZXhHTCIsImFyZyIsIm9wdGlvbnMiLCJjb250YWluZXIiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJwYWRkaW5nIiwibGVmdCIsInJpZ2h0IiwidG9wIiwiYm90dG9tIiwiY29udGV4dCIsInNoYXJlZEZ1bmN0aW9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJjYXZuYXMiLCJzdWJzdHJpbmciLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInN0eWxlIiwicG9zaXRpb24iLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwibmFtZXMiLCJnbCIsImdldENvbnRleHQiLCJyZXNvdXJjZXMiLCJfZGljdCIsImVudiIsImRpY3QiLCJkaWN0aW9uYXJ5IiwiZnJhbWVidWZmZXJzIiwiRnJhbWVidWZmZXIiLCJmcmFtZWJ1ZmZlciIsImNyZWF0ZUZyYW1lYnVmZmVyIiwiYmluZEZyYW1lYnVmZmVyIiwiRlJBTUVCVUZGRVIiLCJmcmFtZWJ1ZmZlclRleHR1cmUyRCIsIkNPTE9SX0FUVEFDSE1FTlQwIiwiZW5hYmxlUmVhZCIsImJpbmRSZW5kZXJidWZmZXIiLCJSRU5ERVJCVUZGRVIiLCJkZWxldGVSZW5kZXJidWZmZXIiLCJyZW5kZXJidWZmZXIiLCJkZWxldGVGcmFtZWJ1ZmZlciIsImtlcm5lbHMiLCJzaGFkZXIiLCJTaGFkZXIiLCJ2ZXJ0ZXhfc2hhZGVyX3NvdXJjZSIsImZyYWdtZW50X3NoYWRlcl9zb3VyY2UiLCJjcmVhdGVTaGFkZXIiLCJzb3VyY2UiLCJzaGFkZXJTb3VyY2UiLCJjb21waWxlU2hhZGVyIiwiZ2V0U2hhZGVyUGFyYW1ldGVyIiwiQ09NUElMRV9TVEFUVVMiLCJjb25zb2xlIiwibG9nIiwiZ2V0U2hhZGVySW5mb0xvZyIsImRlbGV0ZVNoYWRlciIsImFkZERlcHMiLCJkZXBzIiwicmUiLCJzcGxpdCIsInYiLCJyZXN1bHQiLCJleGVjIiwicHVzaCIsInZzIiwiVkVSVEVYX1NIQURFUiIsImZzIiwiRlJBR01FTlRfU0hBREVSIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwiZ2V0UHJvZ3JhbUluZm9Mb2ciLCJ1c2UiLCJ1c2VQcm9ncmFtIiwiZGV0YWNoU2hhZGVyIiwiZGVsZXRlUHJvZ3JhbSIsInJlYWxQcm9ncmFtIiwiYmxlbmRFeHQiLCJnZXRFeHRlbnNpb24iLCJlbmFibGVFeHRlbnNpb24iLCJleHRlbnNpb25zIiwiZXh0ZW5zaW9uIiwiZXh0UHJvcHMiLCJlcCIsImV4dCIsIk1BWF9FWFQiLCJNSU5fRVhUIiwiYXBwZW5kQ2hpbGQiLCJbb2JqZWN0IE9iamVjdF0iLCJpc1Byb2dyYW0iLCJzZXJpYWxpemUiLCJhb2EiLCJmYk5hbWUiLCJwYXJhbWV0ZXIiLCJrZXlWYWx1ZVBhaXJzIiwibmV3QXJyYXkiLCJkaWN0S2V5cyIsImZ4Z2wiLCJtYXAiLCJhcHAiLCJhcmdzIiwicmVuZGVyIiwiZGltZW5zaW9uIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEtBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsS0FHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFB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R0FtQkEsT0FsQkF4TyxPQUFBZ0ksS0FBQXdHLEdBQUF0TSxRQUFBLFNBQUFyQixHQUVBLEdBREFpQixFQUFBaUksTUFBQWxKLEdBQUEyTixFQUFBM04sR0FDQXdCLE1BQUFDLFFBQUFSLEVBQUFpSSxNQUFBbEosSUFBQSxDQUNBLElBQUF2QixFQUFBLEVBQ0FVLE9BQUFDLGVBQUE2QixFQUFBaUksTUFBQWxKLEdBQ0FWLElBQUEsV0FDQSxPQUFBcU8sRUFBQTNOLEdBQUF2QixNQUVBd0ksSUFBQSxTQUFBMkcsR0FDQW5QLEVBQUEsRUFDQXdDLEVBQUFpSSxNQUFBbEosR0FBQTROLFVBR2Esb0JBQUEzTSxFQUFBaUksTUFBQWxKLEdBQUEsQ0FDYixJQUFBNk4sRUFBQTFPLE9BQUFnSSxLQUFBbEcsRUFBQWlJLE1BQUFsSixJQUNBOE4sS0FBQS9NLFFBQUEsT0FBQWYsRUFBQSxRQUFBNk4sRUFBQUUsSUFBQWhQLEdBQUFrQyxFQUFBaUksTUFBQWxKLEdBQUFqQixRQUdBc0ksR0FHQUEsRUFBQWdDLFdBQUFoQyxFQUFBcUcsVUFDQXJHLEVBQUFnRCxPQUFBckksRUFBQXFJLE9BR0FoRCxFQUFBMkcsSUFBQSxTQUFBaFAsRUFBQXlJLEdBQ0EsZ0JBQUF3RyxHQUVBLE9BREF4QixFQUFBekssRUFBQXFLLElBQUFyTixFQUFBeUksRUFBQThDLHFCQUFBOUMsRUFBQStDLHdCQUNBL0MsRUFBQXlHLE9BQUF0UCxLQUFBeUksRUFBQTRHLEtBSUE1RyxFQUFBOEcsVUFBQSxXQUNBLE9BQUF4RyxFQUFBN0MsTUFBQTZDLEVBQUEzQyxTQUdBcUMiLCJmaWxlIjoiZmxleGdsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFVuaWZvcm0oZ2xDb250ZXh0LCBuYW1lLCB0eXBlLCBkYXRhKSB7XG5cbiAgICB2YXIgdW5pZm9ybSA9ICh0aGlzIGluc3RhbmNlb2YgVW5pZm9ybSkgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcblxuICAgIGZ1bmN0aW9uIHNlcmlhbGl6ZUFycmF5KGFycmF5T2ZBcnJheSkge1xuICAgICAgICB2YXIgc2EgPSBbXTtcbiAgICAgICAgYXJyYXlPZkFycmF5LmZvckVhY2goZnVuY3Rpb24oYSl7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFVuaWZvcm0oKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlLFxuICAgICAgICAgICAgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uLFxuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgdmFyIGhhc0FycmF5ID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZCk7fSk7XG4gICAgICAgICAgICBpZihoYXNBcnJheSlcbiAgICAgICAgICAgICAgICBkYXRhID0gc2VyaWFsaXplQXJyYXkoZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZigodHlwZSA9PSAnZmxvYXQnIHx8IHR5cGUgPT0gJ2ludCcpICYmICFBcnJheS5pc0FycmF5KGRhdGEpICYmICFBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpXG4gICAgICAgICAgICBkYXRhID0gW2RhdGFdO1xuXG4gICAgICAgIHZhciBidWY7XG4gICAgICAgIGlmICh0eXBlLnNsaWNlKDAsMykgPT0gJ3ZlYycgfHwgdHlwZSA9PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICBidWYgPSBuZXcgRmxvYXQzMkFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY3R4Wyd1bmlmb3JtJyArIHNpemUgKyAnZnYnXShsb2NhdGlvbiwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUuc2xpY2UoMCw0KSA9PSAnaXZlYycgfHwgdHlwZSA9PSAnaW50Jyl7XG4gICAgICAgICAgICBidWYgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIGN0eFsndW5pZm9ybScgKyBzaXplICsgJ2l2J10obG9jYXRpb24sIGJ1Zik7XG4gICAgICAgIH0gZWxzZSBpZih0eXBlLnNsaWNlKDAsMykgPT0gJ21hdCcpIHtcbiAgICAgICAgICAgIGJ1ZiA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG4gICAgICAgICAgICBjdHhbJ3VuaWZvcm1NYXRyaXgnICsgc2l6ZSArICdmdiddKGxvY2F0aW9uLCBmYWxzZSwgYnVmKTtcbiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT0gJ3NhbXBsZXIyRCcpIHtcbiAgICAgICAgICAgIGlmKGRhdGEuaGFzT3duUHJvcGVydHkoJ3Jlc291cmNlVHlwZScpICYmIGRhdGEucmVzb3VyY2VUeXBlID09ICd0ZXh0dXJlJykge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdiaW5kICcgKyBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgICAgICBjdHguYWN0aXZlVGV4dHVyZShjdHguVEVYVFVSRTAgKyBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIGRhdGEucHRyKTtcbiAgICAgICAgICAgICAgICBjdHgudW5pZm9ybTFpKGxvY2F0aW9uLCBkYXRhLmluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVuaWZvcm0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZGF0YSkge1xuXG4gICAgICAgIGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIHZhciBoYXNBcnJheSA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBBcnJheS5pc0FycmF5KGQpO30pO1xuICAgICAgICAgICAgaWYoaGFzQXJyYXkpXG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlcmlhbGl6ZUFycmF5KGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdW5pZm9ybVtuYW1lXSA9IHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsLFxuICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQodHlwZS5zbGljZSgzLDQpKSB8fCBwYXJzZUludCh0eXBlLnNsaWNlKDQsNSkpIHx8IDFcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5kYXRhICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIHNldFVuaWZvcm0uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHVuaWZvcm1bbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICB1bmlmb3JtW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd1bmlmb3JtICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbGVuID0gMDtcblxuICAgICAgICAgICAgaWYodGhpcy50eXBlICE9ICdzYW1wbGVyMkQnKSB7XG4gICAgICAgICAgICAgICAgbGVuID0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc2l6ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9UT0RPOiBmaXggZGVjbGFyYXRpb24gZm9yIG1hdHJpeFxuICAgICAgICAgICAgaWYobGVuID4gMSAmJiB0eXBlICE9ICdtYXQ0Jykge1xuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyBsZW4gKyAnXSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB1bmlmb3JtW25hbWVdO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHVuaWZvcm07XG59XG4iLCJpbXBvcnQgVW5pZm9ybSBmcm9tICcuL3VuaWZvcm0nO1xuaW1wb3J0IEF0dHJpYnV0ZSBmcm9tICcuL2F0dHJpYnV0ZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuaW1wb3J0IFZhcnlpbmcgZnJvbSAnLi92YXJ5aW5nJztcbmltcG9ydCBTdWJyb3V0aW5lIGZyb20gJy4vc3Vicm91dGluZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc291cmNlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIHJlc291cmNlID0gKHRoaXMgaW5zdGFuY2VvZiBSZXNvdXJjZSkgPyB0aGlzIDoge30sXG4gICAgICAgIGdwdVJlc291cmNlcyA9IHt9O1xuXG4gICAgcmVzb3VyY2UudW5pZm9ybSA9IG5ldyBVbmlmb3JtKGdsQ29udGV4dCk7XG4gICAgcmVzb3VyY2UuYXR0cmlidXRlID0gbmV3IEF0dHJpYnV0ZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnRleHR1cmUgPSBuZXcgVGV4dHVyZShnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnZhcnlpbmcgPSBuZXcgVmFyeWluZyhnbENvbnRleHQpO1xuICAgIHJlc291cmNlLnN1YnJvdXRpbmUgPSBuZXcgU3Vicm91dGluZSgpO1xuXG4gICAgdmFyIHJlc291cmNlVHlwZXMgPSBbJ3VuaWZvcm0nLCAnYXR0cmlidXRlJywgJ3RleHR1cmUnLCAndmFyeWluZycsICdzdWJyb3V0aW5lJ107XG5cbiAgICByZXNvdXJjZS5hbGxvY2F0ZSA9IGZ1bmN0aW9uKHR5cGUpIFxuICAgIHtcbiAgICAgICAgaWYgKHJlc291cmNlVHlwZXMuaW5kZXhPZih0eXBlKSA9PT0gLTEpICB7IHRocm93IEVycm9yKFwiRXJyb3I6IEludmFsaWQgcmVzb3VyY2UgdHlwZTogXCIgKyB0eXBlKTsgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHJlcyA9IHJlc291cmNlW3R5cGVdLmNyZWF0ZS5hcHBseShudWxsLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgcmVzLnJlc291cmNlVHlwZSA9IHR5cGU7XG4gICAgICAgIGdwdVJlc291cmNlc1tyZXMubmFtZV0gPSByZXM7XG5cbiAgICAgICAgaWYgKCFncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzLm5hbWUpKSBcbiAgICAgICAge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdwdVJlc291cmNlcywgcmVzLm5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ3B1UmVzb3VyY2VzW3Jlcy5uYW1lXTt9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkgeyBncHVSZXNvdXJjZXNbcmVzLm5hbWVdLmxvYWQoZGF0YSk7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgcmVzb3VyY2UubGluayA9IGZ1bmN0aW9uKHByb2dyYW0sIHJlc291cmNlX25hbWVzKSB7XG4gICAgICAgIHZhciByZXF1aXJlZFJlc291cmNlTmFtZXMgPSAoQXJyYXkuaXNBcnJheShyZXNvdXJjZV9uYW1lcykpID8gcmVzb3VyY2VfbmFtZXMgOiBPYmplY3Qua2V5cyhncHVSZXNvdXJjZXMpO1xuICAgICAgICByZXF1aXJlZFJlc291cmNlTmFtZXMuZm9yRWFjaChmdW5jdGlvbihyZXNvdXJjZU5hbWUpIHtcbiAgICAgICAgICAgIGlmIChncHVSZXNvdXJjZXMuaGFzT3duUHJvcGVydHkocmVzb3VyY2VOYW1lKSkge1xuICAgICAgICAgICAgICAgIGdwdVJlc291cmNlc1tyZXNvdXJjZU5hbWVdLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIHJlc291cmNlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGdwdVJlc291cmNlc1tuYW1lXTtcbiAgICB9XG4gICAgcmVzb3VyY2UuY3JlYXRlID0gcmVzb3VyY2UuYWxsb2NhdGU7XG5cbiAgICByZXR1cm4gcmVzb3VyY2U7XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXR0cmlidXRlKGdsQ29udGV4dCkgXG57XG4gICAgdmFyIGF0dHJpYnV0ZSA9ICh0aGlzIGluc3RhbmNlb2YgQXR0cmlidXRlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBhdHRyaWJ1dGVJRCA9IDA7XG5cbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGUobmFtZSwgZGF0YSkgXG4gICAge1xuICAgICAgICBpZiggQXJyYXkuaXNBcnJheShkYXRhKSB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkgKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSBcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGN0eC5iaW5kQnVmZmVyKGN0eC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZVtuYW1lXS5wdHIpO1xuICAgICAgICAgICAgY3R4LmJ1ZmZlckRhdGEoY3R4LkFSUkFZX0JVRkZFUiwgZGF0YSwgY3R4LlNUQVRJQ19EUkFXKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGF0dHJpYnV0ZVtuYW1lXS5wdHIgPT09IGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyKTtcbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZVtuYW1lXS5vbGRfcHRyID0gYXR0cmlidXRlW25hbWVdLnB0cjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGF0dHJpYnV0ZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSBcbiAgICB7XG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IGF0dHJpYnV0ZUlEKyssXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVCdWZmZXIoKSxcbiAgICAgICAgICAgIHNpemU6IHBhcnNlSW50KHR5cGUuc2xpY2UoMyw0KSkgfHwgMVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmKGRhdGEgIT09IG51bGwgJiYgZGF0YS5sZW5ndGgpIFxuICAgICAgICAgICAge3NldEF0dHJpYnV0ZShuYW1lLCBkYXRhKTt9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSBcbiAgICAgICAge1xuICAgICAgICAgICAgY3R4LmJpbmRCdWZmZXIoY3R4LkFSUkFZX0JVRkZFUiwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGN0eC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgY3R4LnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5sb2NhdGlvbiwgdGhpcy5zaXplLCBjdHguRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIGN0eC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmxvYWQgPSBmdW5jdGlvbihhcnJheUJ1ZmZlcikgXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkgXG4gICAgICAgICAgICB7cmV0dXJuICdhdHRyaWJ1dGUgJyArIHRoaXMudHlwZSArICcgJyArIHRoaXMubmFtZSArICc7XFxuJzt9XG4gICAgICAgIFxuXG4gICAgICAgIGF0dHJpYnV0ZVtuYW1lXS5kZWxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5kZWxldGVCdWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVtuYW1lXTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGF0dHJpYnV0ZTtcbn1cbiIsImltcG9ydCBVbmlmb3JtIGZyb20gXCIuL3VuaWZvcm1cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGV4dHVyZShnbENvbnRleHQpIHtcblxuICAgIHZhciB0ZXh0dXJlID0gKHRoaXMgaW5zdGFuY2VvZiBUZXh0dXJlKSA/IHRoaXMgOiB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICB0ZXh0dXJlSUQgPSAwO1xuXG4gICAgZnVuY3Rpb24gc2V0VGV4dHVyZShuYW1lLCB0ZXhEYXRhKSBcbiAgICB7XG4gICAgICAgIHZhciB0eXBlID0gY3R4W3RleHR1cmVbbmFtZV0udHlwZS50b1VwcGVyQ2FzZSgpXSxcbiAgICAgICAgICAgIGZvcm1hdCA9IGN0eFt0ZXh0dXJlW25hbWVdLmNoYW5uZWwudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICB3aWR0aCA9IHRleHR1cmVbbmFtZV0uZGltWzBdLFxuICAgICAgICAgICAgaGVpZ2h0ID0gdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5kYXRhID0gdGV4RGF0YTtcblxuICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRleHR1cmVbbmFtZV0ucHRyKTtcbiAgICAgICAgY3R4LnRleEltYWdlMkQoY3R4LlRFWFRVUkVfMkQsIDAsIGZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01JTl9GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX01BR19GSUxURVIsIGN0eC5ORUFSRVNUKTtcbiAgICAgICAgY3R4LnRleFBhcmFtZXRlcmkoY3R4LlRFWFRVUkVfMkQsIGN0eC5URVhUVVJFX1dSQVBfUywgY3R4LkNMQU1QX1RPX0VER0UpO1xuICAgICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfV1JBUF9ULCBjdHguQ0xBTVBfVE9fRURHRSk7XG4gICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlVGV4dHVyZShuYW1lLCB0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICB2YXIgdHlwZSA9IGN0eFt0ZXh0dXJlW25hbWVdLnR5cGUudG9VcHBlckNhc2UoKV0sXG4gICAgICAgICAgICBmb3JtYXQgPSBjdHhbdGV4dHVyZVtuYW1lXS5jaGFubmVsLnRvVXBwZXJDYXNlKCldLFxuICAgICAgICAgICAgd2lkdGggPSBkaW1bMF0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMF0sXG4gICAgICAgICAgICBoZWlnaHQgPSBkaW1bMV0gfHwgdGV4dHVyZVtuYW1lXS5kaW1bMV07XG5cbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCB0ZXh0dXJlW25hbWVdLnB0cik7XG4gICAgICAgIGN0eC50ZXhTdWJJbWFnZTJEKGN0eC5URVhUVVJFXzJELCAwLCBvZmZzZXRbMF0sIG9mZnNldFsxXSwgd2lkdGgsIGhlaWdodCwgZm9ybWF0LCB0eXBlLCB0ZXhEYXRhKTtcbiAgICAgICAgY3R4LmJpbmRUZXh0dXJlKGN0eC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdGV4dHVyZSBjb21wcmVzc2lvblxuICAgIC8vIGZ1bmN0aW9uIGNvbXByZXNzVGV4dHVyZSh0ZXhEYXRhKSB7XG4gICAgLy9cbiAgICAvLyAgICAgdmFyIGV4dCA9IChcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGNcIikgfHxcbiAgICAvLyAgICAgICBjdHguZ2V0RXh0ZW5zaW9uKFwiTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjXCIpIHx8XG4gICAgLy8gICAgICAgY3R4LmdldEV4dGVuc2lvbihcIldFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Y1wiKVxuICAgIC8vICAgICApO1xuICAgIC8vXG4gICAgLy8gICAgIGN0eC5jb21wcmVzc2VkVGV4SW1hZ2UyRChjdHguVEVYVFVSRV8yRCwgMCwgZXh0LkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhULCB0ZXh0dXJlW25hbWVdLmRpbVswXSwgdGV4dHVyZVtuYW1lXS5kaW1bMV0sIDAsIHRleERhdGEpO1xuICAgIC8vICAgICBjdHgudGV4UGFyYW1ldGVyaShjdHguVEVYVFVSRV8yRCwgY3R4LlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3R4LkxJTkVBUik7XG4gICAgLy8gICAgIGN0eC50ZXhQYXJhbWV0ZXJpKGN0eC5URVhUVVJFXzJELCBjdHguVEVYVFVSRV9NSU5fRklMVEVSLCBjdHguTElORUFSKTtcbiAgICAvLyB9XG5cbiAgICB0ZXh0dXJlLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcikge1xuICAgICAgICB2YXIgdGV4SW5kZXggPSAodGV4dHVyZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgPyB0ZXh0dXJlW25hbWVdLmluZGV4IDogdGV4dHVyZUlEKys7XG4gICAgICAgIHRleHR1cmVbbmFtZV0gPSB7XG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5kZXg6IHRleEluZGV4LFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICBkaW06IGRpbSB8fCBbNTEyLCA1MTJdLFxuICAgICAgICAgICAgY2hhbm5lbDogY2hhbm5lbCB8fCBcImFscGhhXCIsXG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgbG9jYXRpb246IG51bGwsXG4gICAgICAgICAgICBzYW1wbGVyOiBzYW1wbGVyIHx8IG51bGwsXG4gICAgICAgICAgICBwdHI6IGN0eC5jcmVhdGVUZXh0dXJlKClcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpZihkYXRhICE9PSBudWxsICYmIGRhdGEubGVuZ3RoKVxuICAgICAgICBzZXRUZXh0dXJlKG5hbWUsIGRhdGEpO1xuXG4gICAgICAgIGlmICh0ZXh0dXJlW25hbWVdLnNhbXBsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRleHR1cmVbbmFtZV0uc2FtcGxlciA9IFVuaWZvcm0oY3R4KS5jcmVhdGUobmFtZSwgJ3NhbXBsZXIyRCcsIHRleHR1cmVbbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZVtuYW1lXS5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5saW5rID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgICAgIC8vIHRoaXMubG9jYXRpb24gPSBjdHguZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgLy8gY3R4LnVuaWZvcm0xaSh0aGlzLmxvY2F0aW9uLCB0aGlzLmluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRoaXMuc2FtcGxlci5kYXRhKSA9PSAndW5kZWZpbmVkJyB8fCB0aGlzLnNhbXBsZXIuZGF0YSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmRhdGEgPSB0ZXh0dXJlW25hbWVdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVyLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgICAgICAvLyB9ZWxzZXtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygndGV4dHVyZSBkYXRhIGlzIG51bGwhISEnKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmxvYWQgPSBmdW5jdGlvbih0ZXhEYXRhKSB7XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgdGV4RGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmVbbmFtZV0uY29weUZyb21GQk8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGN0eC5iaW5kVGV4dHVyZShjdHguVEVYVFVSRV8yRCwgdGhpcy5wdHIpO1xuICAgICAgICAgICAgY3R4LmNvcHlUZXhJbWFnZTJEKFxuICAgICAgICAgICAgICAgIGN0eC5URVhUVVJFXzJELFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgY3R4LlJHQkEsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzBdLFxuICAgICAgICAgICAgICAgIHRoaXMuZGltWzFdLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS51cGRhdGUgPSBmdW5jdGlvbih0ZXhEYXRhLCBvZmZzZXQsIGRpbSkge1xuICAgICAgICAgICAgdXBkYXRlVGV4dHVyZSh0aGlzLm5hbWUsIHRleERhdGEsIG9mZnNldCwgZGltKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0ZXh0dXJlW25hbWVdLnJlc2l6ZSA9IGZ1bmN0aW9uKGRpbSwgZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kaW0gPSBkaW07XG4gICAgICAgICAgICBzZXRUZXh0dXJlKHRoaXMubmFtZSwgZGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlW25hbWVdLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2xDb250ZXh0LmRlbGV0ZVRleHR1cmUodGhpcy5wdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVtuYW1lXS5oZWFkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5hbWUgPT0gdGhpcy5zYW1wbGVyLm5hbWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmlmb3JtIHNhbXBsZXIyRCAnICsgdGhpcy5zYW1wbGVyLm5hbWUgKyAnO1xcbic7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWYXJ5aW5nKGdsQ29udGV4dCkge1xuXG4gICAgdmFyIHZhcnlpbmcgPSAodGhpcyBpbnN0YW5jZW9mIFZhcnlpbmcpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICB2YXJ5aW5nLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIHNpemUpIHtcbiAgICAgICAgdmFyeWluZ1tuYW1lXSA9IHtcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICB0eXBlOiB0eXBlIHx8ICdmbG9hdCcsXG4gICAgICAgICAgICBzaXplOiBzaXplIHx8IDEsXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyeWluZ1tuYW1lXS5saW5rID0gZnVuY3Rpb24oKSB7fTtcblxuICAgICAgICB2YXJ5aW5nW25hbWVdLmhlYWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhlYWRlciA9ICd2YXJ5aW5nICcgKyB0aGlzLnR5cGUgKyAnICcgKyB0aGlzLm5hbWU7XG4gICAgICAgICAgICBpZih0aGlzLnNpemUgPiAxKVxuICAgICAgICAgICAgICAgIGhlYWRlciArPSAnWycgKyB0aGlzLnNpemUgKyAnXSc7XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhcnlpbmdbbmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhcnlpbmc7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJyb3V0aW5lKCkge1xuXG4gICAgdmFyIHN1YnJvdXRpbmUgPSAodGhpcyBpbnN0YW5jZW9mIFN1YnJvdXRpbmUpID8gdGhpcyA6IHt9O1xuXG4gICAgc3Vicm91dGluZS5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBmbikge1xuICAgICAgICBzdWJyb3V0aW5lW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICAgIGZuOiBmbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJzdWJyb3V0aW5lXCJcbiAgICAgICAgfTtcblxuICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmxpbmsgPSBmdW5jdGlvbihwcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0ubG9hZCA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBzdWJyb3V0aW5lW25hbWVdLmZuID0gZm47XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1YnJvdXRpbmVbbmFtZV0uaGVhZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbi50b1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1YnJvdXRpbmVbbmFtZV07XG4gICAgfTtcblxuICAgIHJldHVybiBzdWJyb3V0aW5lO1xufVxuIiwiaW1wb3J0IFJlc291cmNlIGZyb20gJy4vcmVzb3VyY2UnO1xuaW1wb3J0IFByb2dyYW0gZnJvbSAnLi9wcm9ncmFtJztcbmltcG9ydCBGcmFtZWJ1ZmZlciBmcm9tICcuL2ZyYW1lYnVmZmVyJztcbi8vIGltcG9ydCBSZWFjdGl2ZSBmcm9tICcuL3JlYWN0aXZlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmxleEdMKGFyZykge1xuXG4gICAgdmFyIGZsZXhnbCA9ICh0aGlzIGluc3RhbmNlb2YgRmxleEdMKSA/IHRoaXMgOiB7fTtcblxuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmcgfHwge30sXG4gICAgICAgIGNvbnRhaW5lciA9IG9wdGlvbnMuY29udGFpbmVyIHx8IG51bGwsXG4gICAgICAgIGNhbnZhcyA9IG9wdGlvbnMuY2FudmFzIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksXG4gICAgICAgIHdpZHRoID0gb3B0aW9ucy53aWR0aCB8fCBudWxsLFxuICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCBudWxsLFxuICAgICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nIHx8IHtcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICB9LFxuICAgICAgICBjdHggPSBvcHRpb25zLmNvbnRleHQgfHwgb3B0aW9ucy5jdHggfHwgbnVsbCxcbiAgICAgICAga2VybmVscyA9IHt9LFxuICAgICAgICBzaGFyZWRGdW5jdGlvbiA9IG9wdGlvbnMuc2hhcmVkRnVuY3Rpb24gfHwge307XG5cblxuXG4gICAgaWYgKHR5cGVvZihjYW52YXMpID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKGNhbnZhc1swXSA9PSBcIiNcIikgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzLnN1YnN0cmluZygxKSk7XG4gICAgICAgIGVsc2UgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2F2bmFzKTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIgPSAodHlwZW9mKGNvbnRhaW5lcikgPT0gXCJzdHJpbmdcIikgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXIpIDogY29udGFpbmVyO1xuICAgICAgICBpZiAod2lkdGggPT09IG51bGwpIHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICBpZiAoaGVpZ2h0ID09PSBudWxsKSBoZWlnaHQgPSBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xuICAgIH1cbiAgICAvLyB3aWR0aCAtPSBwYWRkaW5nLmxlZnQgKyBwYWRkaW5nLnJpZ2h0O1xuICAgIC8vIGhlaWdodCAtPSBwYWRkaW5nLnRvcCArIHBhZGRpbmcuYm90dG9tO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5MZWZ0ID0gcGFkZGluZy5sZWZ0ICsgXCJweFwiO1xuICAgIGNhbnZhcy5zdHlsZS5tYXJnaW5Ub3AgPSBwYWRkaW5nLnRvcCArIFwicHhcIjtcblxuXG4gICAgaWYgKGN0eCA9PT0gbnVsbClcbiAgICAgICAgY3R4ID0gc2V0dXBXZWJHTChjYW52YXMpO1xuICAgIGZsZXhnbC5jdHggPSBjdHg7XG4gICAgZmxleGdsLmNhbnZhcyA9IGNhbnZhcztcbiAgICBmbGV4Z2wucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgIGN0eC5fZGljdCA9IG9wdGlvbnMuZW52IHx8IG9wdGlvbnMuZGljdCB8fCBvcHRpb25zLmRpY3Rpb25hcnkgfHwge307XG5cbiAgICB2YXIgcmVzb3VyY2VzID0gbmV3IFJlc291cmNlKGN0eCksXG4gICAgICAgIGZyYW1lYnVmZmVycyA9IG5ldyBGcmFtZWJ1ZmZlcihjdHgpLFxuICAgICAgICBwcm9ncmFtID0gbmV3IFByb2dyYW0oY3R4LCByZXNvdXJjZXMpLFxuICAgICAgICByZWFsUHJvZ3JhbSA9IG51bGw7XG5cblxuICAgIHZhciBibGVuZEV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJFWFRfYmxlbmRfbWlubWF4XCIpO1xuICAgIGlmIChibGVuZEV4dCkge1xuICAgICAgICBjdHguTUFYX0VYVCA9IGJsZW5kRXh0Lk1BWF9FWFQ7XG4gICAgICAgIGN0eC5NSU5fRVhUID0gYmxlbmRFeHQuTUlOX0VYVDtcbiAgICB9XG4gICAgY3R4LmV4dCA9IGN0eC5nZXRFeHRlbnNpb24oXCJBTkdMRV9pbnN0YW5jZWRfYXJyYXlzXCIpO1xuICAgIGVuYWJsZUV4dGVuc2lvbihbXG4gICAgICAgIFwiT0VTX3RleHR1cmVfZmxvYXRcIixcbiAgICAgICAgXCJPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXJcIixcbiAgICAgICAgLy8gXCJPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0XCIsXG4gICAgICAgIC8vIFwiT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcIlxuICAgIF0pO1xuICAgIGlmIChjb250YWluZXIpXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5cbiAgICBmdW5jdGlvbiBzZXR1cFdlYkdMKGNhbnZhcykge1xuICAgICAgICB2YXIgbmFtZXMgPSBbXCJ3ZWJnbFwiLCBcImV4cGVyaW1lbnRhbC13ZWJnbFwiXTtcbiAgICAgICAgdmFyIGdsID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KG5hbWVzW2ldKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICBpZiAoZ2wpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmFibGVFeHRlbnNpb24oZXh0ZW5zaW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXh0ZW5zaW9ucykpIGV4dGVuc2lvbnMgPSBbZXh0ZW5zaW9uc107XG4gICAgICAgIGV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBleHRQcm9wcyA9IGN0eC5nZXRFeHRlbnNpb24oZXh0ZW5zaW9uKTtcbiAgICAgICAgICAgIGlmIChleHRQcm9wcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGVwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0Lmhhc093blByb3BlcnR5KGVwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmV4dFtlcF0gPSBleHRQcm9wc1tlcF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGZsZXhnbC5lbmFibGVFeHRlbnNpb24gPSBlbmFibGVFeHRlbnNpb247XG5cbiAgICAvKipcbiAgICAgKiBBbGxvY2F0ZSBBdHRyaWJ1dGVzIGluIHZlcnRleCBidWZmZXIgYXJyYXkgc3RvcmVkIGluIEdQVSBtZW1vcnlcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLmF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEpIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwiYXR0cmlidXRlXCIsIG5hbWUsIHR5cGUsIGRhdGEpO1xuICAgICAgICBpZiAoIWZsZXhnbC5hdHRyaWJ1dGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wuYXR0cmlidXRlLCBuYW1lLCB7IC8vYWZ0ZXIgYWxsb2NhdGluZywgZmxleGdsIGdldHMgbmV3IGtleSBhdHRyaWJ1dGUsIGhlbHBpbmcgZWFzaWx5IGNoYW5nZSBhdHRyaWJ1dGUgZGF0YS5cbiAgICAgICAgICAgICAgICBnZXQoKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQoZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5hdHRyaWJ1dGVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG4gICAgLy8gZmxleGdsLmJ1ZmZlciA9IGZsZXhnbC5hdHRyaWJ1dGU7IC8vYWxpYXNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB1bmlmb3JtIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGF0YSBkYXRhIHZhbHVlc1xuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgICBGTGV4R0wgb2JqZWN0XG4gICAgICovXG4gICAgZmxleGdsLnVuaWZvcm0gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkYXRhKSB7XG4gICAgICAgIHJlc291cmNlcy5hbGxvY2F0ZShcInVuaWZvcm1cIiwgbmFtZSwgdHlwZSwgZGF0YSk7XG4gICAgICAgIGlmICghZmxleGdsLnVuaWZvcm0uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudW5pZm9ybSwgbmFtZSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZXMudW5pZm9ybVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5sb2FkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LmlzUHJvZ3JhbShyZWFsUHJvZ3JhbSkpICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMudW5pZm9ybVtuYW1lXS5saW5rKHJlYWxQcm9ncmFtKTsgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9O1xuXG4gICAgZmxleGdsLnVuaWZvcm0uc2VyaWFsaXplID0gZnVuY3Rpb24oYW9hKSB7XG4gICAgICAgIHZhciBzYSA9IFtdO1xuICAgICAgICBhb2EuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBzYSA9IHNhLmNvbmNhdChhKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHNhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIFVuaWZvcm0gdmFyaWFibGUgZm9yIFdlYkdMIHNoYWRlciBwcm9ncmFtc1xuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSB0ZXh0dXJlIHR5cGU6IHVuc2lnbmVkX2J5dGUgb3IgZmxvYXQsIC4uLlxuICAgICAqIEBwYXJhbSAge0FycmF5fSBkYXRhIGRhdGEgdmFsdWVzXG4gICAgICogQHBhcmFtICB7QXJyYXl9IGRpbSBbd2lkdGgsIGhlaWdodF1cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjaGFubmVsPSdhbHBoYSddIFdlYkdMIGZvcm1hdHMgKHJnYmEsIGFscGhhKVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3NhbXBsZXI9bnVsbF0gRkxleEdMIFVuaWZvcm0gT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wudGV4dHVyZSA9IGZ1bmN0aW9uKG5hbWUsIHR5cGUsIGRhdGEsIGRpbSwgY2hhbm5lbCwgc2FtcGxlcikge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ0ZXh0dXJlXCIsIG5hbWUsIHR5cGUsIGRpbSwgY2hhbm5lbCwgZGF0YSwgc2FtcGxlcik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbGV4Z2wudGV4dHVyZSwgbmFtZSwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VzLnRleHR1cmVbbmFtZV07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0ubG9hZChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnRleHR1cmUudXBkYXRlID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgb2Zmc2V0LCBkaW0pIHtcbiAgICAgICAgcmVzb3VyY2VzLnRleHR1cmVbbmFtZV0udXBkYXRlKGRhdGEsIG9mZnNldCwgZGltKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFt0eXBlXSBWYXJ5aW5nIHZhcmlhYmxlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtzaXplPTFdIGRhdGEgYXJyYXlcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgRkxleEdMIG9iamVjdFxuICAgICAqL1xuICAgIGZsZXhnbC52YXJ5aW5nID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgc2l6ZSkge1xuICAgICAgICByZXNvdXJjZXMuYWxsb2NhdGUoXCJ2YXJ5aW5nXCIsIG5hbWUsIHR5cGUsIHNpemUpO1xuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBVbmlmb3JtIHZhcmlhYmxlIGZvciBXZWJHTCBzaGFkZXIgcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgYXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgYXR0cmlidXRlIHR5cGU6IGZsb2F0LCB2ZWMyLCAuLi5cbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gZGltIFt3aWR0aCwgaGVpZ2h0XVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmU9bnVsbF0gRkxleEdMIFRleHR1cmUgT2JqZWN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fSAgICAgIEZMZXhHTCBvYmplY3RcbiAgICAgKi9cbiAgICBmbGV4Z2wuZnJhbWVidWZmZXIgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0ZXh0dXJlIHx8IHJlc291cmNlcy5hbGxvY2F0ZSgndGV4dHVyZScsIG5hbWUsIHR5cGUsIGRpbSwgJ3JnYmEnLCBudWxsKTtcbiAgICAgICAgZnJhbWVidWZmZXJzLmNyZWF0ZShuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpO1xuXG4gICAgICAgIGlmICghZmxleGdsLmZyYW1lYnVmZmVyLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZmxleGdsLmZyYW1lYnVmZmVyLCBuYW1lLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lYnVmZmVyc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmxleGdsO1xuICAgIH1cblxuICAgIGZsZXhnbC5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkID0gZnVuY3Rpb24obmFtZSwgcHJvZ3JhbSkge1xuICAgICAgICBmcmFtZWJ1ZmZlcnNbbmFtZV0uZW5hYmxlUmVhZChwcm9ncmFtKTtcbiAgICB9XG5cbiAgICBmbGV4Z2wuYmluZEZyYW1lYnVmZmVyID0gZnVuY3Rpb24oZmJOYW1lKSB7XG4gICAgICAgIGlmIChmYk5hbWUgPT09IG51bGwpXG4gICAgICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGN0eC5iaW5kRnJhbWVidWZmZXIoY3R4LkZSQU1FQlVGRkVSLCBmcmFtZWJ1ZmZlcnNbZmJOYW1lXS5wdHIpO1xuICAgIH1cblxuICAgIGZsZXhnbC5zdWJyb3V0aW5lID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgZm4pIHtcbiAgICAgICAgcmVzb3VyY2VzLmFsbG9jYXRlKFwic3Vicm91dGluZVwiLCBuYW1lLCB0eXBlLCBmbik7XG4gICAgICAgIHJldHVybiBmbGV4Z2w7XG4gICAgfVxuXG4gICAgZmxleGdsLnBhcmFtZXRlciA9IGZ1bmN0aW9uKGtleVZhbHVlUGFpcnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoa2V5VmFsdWVQYWlycykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0ga2V5VmFsdWVQYWlyc1trZXldO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3R4Ll9kaWN0W2tleV0pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHguX2RpY3QsIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlUGFpcnNba2V5XVtpKytdO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5fZGljdFtrZXldID0gbmV3QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YoY3R4Ll9kaWN0W2tleV0pID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpY3RLZXlzID0gT2JqZWN0LmtleXMoY3R4Ll9kaWN0W2tleV0pO1xuICAgICAgICAgICAgICAgIGZ4Z2wudW5pZm9ybSgnZGljdCcra2V5LCAnZmxvYXQnLCBkaWN0S2V5cy5tYXAoZD0+Y3R4Ll9kaWN0W2tleV1bZF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZsZXhnbDtcbiAgICB9XG5cbiAgICBmbGV4Z2wuZGljdGlvbmFyeSA9IGZsZXhnbC5wYXJhbWV0ZXI7XG4gICAgZmxleGdsLnNoYWRlciA9IHByb2dyYW0uc2hhZGVyO1xuXG5cbiAgICBmbGV4Z2wuYXBwID0gZnVuY3Rpb24obmFtZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJncyl7XG4gICAgICAgICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5yZW5kZXIuY2FsbChmbGV4Z2wsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmxleGdsLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsZXhnbDtcbn1cblxuXG5cbiAgICAgICAgLy8gaWYobnVtID09PSAwKXtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgLy8gICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgb3B0aW9ucy52ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgb3B0aW9ucy5mcmFnbWVudF9zaGFkZXJfc291cmNlKTtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX3N1bV90ZXh0dXJlJyk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy50ZXh0dXJlWyd1X3RleHR1cmUnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIGVsc2UgaWYobnVtID09PSAxKXtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2Zfc3VtX3RleHR1cmUnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBlbHNlIGlmKG51bSA9PT0gMil7XG4gICAgICAgIC8vICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcihudWxsKTtcblxuICAgICAgICAvLyAgICAgY3R4LnZpZXdwb3J0KDAsIDAsIDEwMjQsIDEpO1xuICAgICAgICAvLyAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIoJ2ZfbWVtX3RleHR1cmVfMScpO1xuICAgICAgICAvLyAgICAgcmVhbFByb2dyYW0gPSBwcm9ncmFtLnVzZShuYW1lLCBvcHRpb25zLnZlcnRleF9zaGFkZXJfc291cmNlLCBvcHRpb25zLmZyYWdtZW50X3NoYWRlcl9zb3VyY2UpO1xuXG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV9wb3NpdGlvbiddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfdGV4Y29vcmQnXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9tZW1fdGV4dHVyZV8wJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX3N1bV90ZXh0dXJlJywgcmVhbFByb2dyYW0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gZWxzZSBpZihudW0gPT09IDMpe1xuICAgICAgICAvLyAgICAgdGhpcy5iaW5kRnJhbWVidWZmZXIobnVsbCk7XG5cbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCAxMDI0LCAxKTtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKCdmX21lbV90ZXh0dXJlXzAnKTtcbiAgICAgICAgLy8gICAgIHJlYWxQcm9ncmFtID0gcHJvZ3JhbS51c2UobmFtZSwgb3B0aW9ucy52ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgb3B0aW9ucy5mcmFnbWVudF9zaGFkZXJfc291cmNlKTtcblxuICAgICAgICAvLyAgICAgLy8gdGhpcy5hdHRyaWJ1dGVbJ2FfcG9zaXRpb24nXS5saW5rKHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3RleGNvb3JkJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmZyYW1lYnVmZmVyLmVuYWJsZVJlYWQoJ2ZfbWVtX3RleHR1cmVfMScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gICAgIC8vIHRoaXMuZnJhbWVidWZmZXIuZW5hYmxlUmVhZCgnZl9zdW1fdGV4dHVyZScsIHJlYWxQcm9ncmFtKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIGVsc2UgaWYobnVtID09PSA0KXtcbiAgICAgICAgLy8gICAgIHRoaXMuYmluZEZyYW1lYnVmZmVyKG51bGwpOyBcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX21lbV90ZXh0dXJlXzEnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBlbHNlIGlmKG51bSA9PT0gNSl7XG4gICAgICAgIC8vICAgICB0aGlzLmJpbmRGcmFtZWJ1ZmZlcihudWxsKTtcbiAgICAgICAgLy8gICAgIGN0eC52aWV3cG9ydCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgICAgIC8vICAgICByZWFsUHJvZ3JhbSA9IHByb2dyYW0udXNlKG5hbWUsIG9wdGlvbnMudmVydGV4X3NoYWRlcl9zb3VyY2UsIG9wdGlvbnMuZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSk7XG5cbiAgICAgICAgLy8gICAgIC8vIHRoaXMuYXR0cmlidXRlWydhX3Bvc2l0aW9uJ10ubGluayhyZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vICAgICAvLyB0aGlzLmF0dHJpYnV0ZVsnYV90ZXhjb29yZCddLmxpbmsocmVhbFByb2dyYW0pO1xuICAgICAgICAvLyAgICAgLy8gdGhpcy5mcmFtZWJ1ZmZlci5lbmFibGVSZWFkKCdmX21lbV90ZXh0dXJlXzAnLCByZWFsUHJvZ3JhbSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyB0aGlzLnVuaWZvcm1bJ3VfdGV4dHVyZSddLmxpbmsocmVhbFByb2dyYW0pOyAgICBcbiAgICAgICAgLy8gdmFyIGRyYXcgPSBvcHRpb25zLnJlbmRlciB8fCBvcHRpb25zLmRyYXc7XG5cbiAgICAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgLy8gICAgIC8vIHZhciBnbCA9IGZsZXhnbC5wcm9ncmFtKG5hbWUpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGRyYXcuY2FsbChjdHgsIGFyZ3MpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gY3R4LmRyYXdBcnJheXMoY3R4LkxJTkVTLCAwLCAyKTsiLCJpbXBvcnQgRmxleEdMIGZyb20gJy4vZmxleGdsJztcblxuKGZ1bmN0aW9uIG1ha2VHbG9iYWwoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5GbGV4R0wgPSBGbGV4R0w7XG4gIH1cbn0pKCk7XG4iLCJpbXBvcnQgVGV4dHVyZSBmcm9tICcuL3RleHR1cmUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBGcmFtZWJ1ZmZlcihnbENvbnRleHQpIHtcblxuICAgIHZhciBmcmFtZWJ1ZmZlciA9ICh0aGlzIGluc3RhbmNlb2YgRnJhbWVidWZmZXIpID8gdGhpcyA6IHt9LFxuICAgICAgICBjdHggPSBnbENvbnRleHQ7XG5cbiAgICBmcmFtZWJ1ZmZlci5jcmVhdGUgPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBkaW0sIHRleHR1cmUpIHtcblxuICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXSA9IHtcbiAgICAgICAgICAgIHB0cjogY3R4LmNyZWF0ZUZyYW1lYnVmZmVyKCksXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgdHlwZTogdHlwZSB8fCBcImZsb2F0XCIsXG4gICAgICAgICAgICB3aWR0aDogZGltWzBdIHx8IDEwMjQsXG4gICAgICAgICAgICBoZWlnaHQ6IGRpbVsxXSB8fCAxMDI0LFxuICAgICAgICAgICAgdGV4dHVyZTogdGV4dHVyZSB8fCBudWxsLFxuICAgICAgICAgICAgLy8gcmVuZGVyYnVmZmVyOiBjdHguY3JlYXRlUmVuZGVyYnVmZmVyKCksXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAoZnJhbWVidWZmZXJbbmFtZV0udGV4dHVyZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyAgICAgdmFyIGJ1ZiA9ICh0eXBlID09ICdmbG9hdCcpID9cbiAgICAgICAgLy8gICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGRpbVswXSAqIGRpbVsxXSAqIDQpIDpcbiAgICAgICAgLy8gICAgICAgICBuZXcgVWludDhBcnJheShkaW1bMF0gKiBkaW1bMV0gKiA0KTtcbiAgICAgICAgLy8gICAgIGZyYW1lYnVmZmVyW25hbWVdLnRleHR1cmUgPSBUZXh0dXJlKGN0eCkuY3JlYXRlKG5hbWUsIHR5cGUsIGRpbSwgXCJyZ2JhXCIsIGJ1Zik7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyB2YXIgcmVuZGVyYnVmZmVyID0gZnJhbWVidWZmZXJbbmFtZV0ucmVuZGVyYnVmZmVyO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXJbbmFtZV0ucHRyKTtcbiAgICAgICAgLy8gY3R4LmJpbmRSZW5kZXJidWZmZXIoY3R4LlJFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgLy8gY3R4LnJlbmRlcmJ1ZmZlclN0b3JhZ2UoXG4gICAgICAgIC8vICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAvLyAgICAgY3R4LkRFUFRIX0NPTVBPTkVOVDE2LFxuICAgICAgICAvLyAgICAgZnJhbWVidWZmZXJbbmFtZV0ud2lkdGgsXG4gICAgICAgIC8vICAgICBmcmFtZWJ1ZmZlcltuYW1lXS5oZWlnaHRcbiAgICAgICAgLy8gKTtcbiAgICAgICAgY3R4LmZyYW1lYnVmZmVyVGV4dHVyZTJEKFxuICAgICAgICAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAgICAgY3R4LkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICAgICAgY3R4LlRFWFRVUkVfMkQsXG4gICAgICAgICAgICBmcmFtZWJ1ZmZlcltuYW1lXS50ZXh0dXJlLnB0cixcbiAgICAgICAgICAgIDBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gY3R4LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKFxuICAgICAgICAvLyAgICAgY3R4LkZSQU1FQlVGRkVSLFxuICAgICAgICAvLyAgICAgY3R4LkRFUFRIX0FUVEFDSE1FTlQsXG4gICAgICAgIC8vICAgICBjdHguUkVOREVSQlVGRkVSLFxuICAgICAgICAvLyAgICAgcmVuZGVyYnVmZmVyXG4gICAgICAgIC8vICk7XG4gICAgICAgIC8vIGN0eC5iaW5kUmVuZGVyYnVmZmVyKGN0eC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICBjdHguYmluZEZyYW1lYnVmZmVyKGN0eC5GUkFNRUJVRkZFUiwgbnVsbCk7XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZW5hYmxlUmVhZCA9IGZ1bmN0aW9uKHByb2dyYW0pIHtcbiAgICAgICAgICAgIGN0eC5hY3RpdmVUZXh0dXJlKGN0eC5URVhUVVJFMCArIHRoaXMudGV4dHVyZS5pbmRleCk7XG4gICAgICAgICAgICBjdHguYmluZFRleHR1cmUoY3R4LlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZS5wdHIpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlLmxvY2F0aW9uID0gY3R4LmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB0aGlzLnRleHR1cmUubmFtZSk7XG4gICAgICAgICAgICBjdHgudW5pZm9ybTFpKHRoaXMudGV4dHVyZS5sb2NhdGlvbiwgdGhpcy50ZXh0dXJlLmluZGV4KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBmcmFtZWJ1ZmZlcltuYW1lXS5lbmFibGVSZWFkID0gZnVuY3Rpb24ocHJvZ3JhbSkge1xuICAgICAgICAvLyAgICAgdGhpcy50ZXh0dXJlLmxpbmsocHJvZ3JhbSk7XG4gICAgICAgIC8vIH07XG5cbiAgICAgICAgZnJhbWVidWZmZXJbbmFtZV0uZGVsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjdHguYmluZFJlbmRlcmJ1ZmZlcihnbC5SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgY3R4LmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICBjdHguZGVsZXRlUmVuZGVyYnVmZmVyKHRoaXMucmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgIGN0eC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZS5wdHIpXG4gICAgICAgICAgICBjdHguZGVsZXRlRnJhbWVidWZmZXIodGhpcy5wdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmcmFtZWJ1ZmZlcltuYW1lXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnJhbWVidWZmZXI7XG59XG4iLCJpbXBvcnQgU2hhZGVyIGZyb20gJy4vc2hhZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUHJvZ3JhbShnbENvbnRleHQsIHJlc291cmNlcykge1xuXG4gICAgdmFyIHByb2dyYW0gPSB7fSxcbiAgICAgICAgY3R4ID0gZ2xDb250ZXh0LFxuICAgICAgICBrZXJuZWxzID0ge30sXG4gICAgICAgIHNoYWRlciA9IG5ldyBTaGFkZXIoZ2xDb250ZXh0KTtcblxuICAgIHByb2dyYW0uY3JlYXRlID0gZnVuY3Rpb24obmFtZSwgdnMsIGZzKSB7XG4gICAgICAgIHZhciBuYW1lID0gbmFtZSB8fCBcImRlZmF1bHRcIixcbiAgICAgICAgICAgIHZzID0gdnMgfHwgXCJkZWZhdWx0XCIsXG4gICAgICAgICAgICBmcyA9IGZzIHx8IFwiZGVmYXVsdFwiLFxuICAgICAgICAgICAgZGVwcyA9IFtdO1xuXG4gICAgICAgIGlmIChrZXJuZWxzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGtlcm5lbHNbbmFtZV0gPSBjdHguY3JlYXRlUHJvZ3JhbSgpO1xuICAgICAgICBrZXJuZWxzW25hbWVdLnZzID0gdnM7XG4gICAgICAgIGtlcm5lbHNbbmFtZV0uZnMgPSBmcztcblxuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0udnMpO1xuICAgICAgICBjdHguYXR0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICBjdHgubGlua1Byb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgIHZhciBsaW5rZWQgPSBjdHguZ2V0UHJvZ3JhbVBhcmFtZXRlcihrZXJuZWxzW25hbWVdLCBjdHguTElOS19TVEFUVVMpO1xuICAgICAgICBpZiAoIWxpbmtlZCkge1xuICAgICAgICAgICAgdmFyIGxhc3RFcnJvciA9IGN0eC5nZXRQcm9ncmFtSW5mb0xvZyhrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgICAgIHRocm93IChcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIiArIGxhc3RFcnJvcik7XG4gICAgICAgICAgICBjdHguZGVsZXRlUHJvZ3JhbShrZXJuZWxzW25hbWVdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChrZXJuZWxzW25hbWVdLnZzLmRlcHMpO1xuICAgICAgICBkZXBzID0gZGVwcy5jb25jYXQoa2VybmVsc1tuYW1lXS5mcy5kZXBzKTtcbiAgICAgICAga2VybmVsc1tuYW1lXS5kZXBzID0gZGVwcztcblxuICAgIH1cblxuICAgIHByb2dyYW0udXNlID0gZnVuY3Rpb24obmFtZSwgdmVydGV4X3NoYWRlcl9zb3VyY2UsIGZyYWdtZW50X3NoYWRlcl9zb3VyY2UpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC51c2VQcm9ncmFtKGtlcm5lbHNbbmFtZV0pO1xuICAgICAgICAgICAgcmVzb3VyY2VzLmxpbmsoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS5kZXBzKTtcbiAgICAgICAgICAgIHJldHVybiBrZXJuZWxzW25hbWVdO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNoYWRlci5jcmVhdGUobmFtZSwgdmVydGV4X3NoYWRlcl9zb3VyY2UsIGZyYWdtZW50X3NoYWRlcl9zb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGUobmFtZSwgc2hhZGVyW25hbWVdLnZzLCBzaGFkZXJbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LnVzZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICByZXNvdXJjZXMubGluayhrZXJuZWxzW25hbWVdLCBrZXJuZWxzW25hbWVdLmRlcHMpO1xuICAgICAgICAgICAgcmV0dXJuIGtlcm5lbHNbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9ncmFtLmRlbGV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKGtlcm5lbHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIGN0eC5kZXRhY2hTaGFkZXIoa2VybmVsc1tuYW1lXSwga2VybmVsc1tuYW1lXS52cyk7XG4gICAgICAgICAgICBjdHguZGV0YWNoU2hhZGVyKGtlcm5lbHNbbmFtZV0sIGtlcm5lbHNbbmFtZV0uZnMpO1xuICAgICAgICAgICAgY3R4LmRlbGV0ZVByb2dyYW0oa2VybmVsc1tuYW1lXSk7XG4gICAgICAgICAgICBkZWxldGUga2VybmVsc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm9ncmFtO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2hhZGVyKGdsQ29udGV4dCkge1xuICAgIFxuICAgIHZhciBzaGFkZXIgPSAodGhpcyBpbnN0YW5jZW9mIFNoYWRlcikgPyB0aGlzIDoge30sXG4gICAgICAgIGN0eCA9IGdsQ29udGV4dDtcbiAgICAgICAgLy8gcmVzb3VyY2UgPSBnbFJlc291cmNlLFxuICAgICAgICAvLyBwYXJhbWV0ZXJzID0gY3R4Ll9kaWN0IHx8IHt9O1xuXG4gICAgc2hhZGVyLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHZlcnRleF9zaGFkZXJfc291cmNlLCBmcmFnbWVudF9zaGFkZXJfc291cmNlKXtcbiAgICAgICAgc2hhZGVyW25hbWVdID0ge1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHZlcnRleF9zaGFkZXJfc291cmNlOiB2ZXJ0ZXhfc2hhZGVyX3NvdXJjZSwgXG4gICAgICAgICAgICBmcmFnbWVudF9zaGFkZXJfc291cmNlOiBmcmFnbWVudF9zaGFkZXJfc291cmNlLCBcbiAgICAgICAgICAgIHZzOiBjcmVhdGVTaGFkZXIoY3R4LCBjdHguVkVSVEVYX1NIQURFUiwgdmVydGV4X3NoYWRlcl9zb3VyY2UpLFxuICAgICAgICAgICAgZnM6IGNyZWF0ZVNoYWRlcihjdHgsIGN0eC5GUkFHTUVOVF9TSEFERVIsIGZyYWdtZW50X3NoYWRlcl9zb3VyY2UpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaGFkZXJbbmFtZV0udnMgPSBjcmVhdGVTaGFkZXIoY3R4LCBjdHguVkVSVEVYX1NIQURFUiwgdmVydGV4X3NoYWRlcl9zb3VyY2UpO1xuICAgICAgICAvLyBzaGFkZXJbbmFtZV0uZnMgPSBjcmVhdGVTaGFkZXIoY3R4LCBjdHguRlJBR01FTlRfU0hBREVSLCBmcmFnbWVudF9zaGFkZXJfc291cmNlKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coc2hhZGVyW25hbWVdLnZzKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coc2hhZGVyW25hbWVdLmZzKTtcblxuICAgICAgICBzaGFkZXJbbmFtZV0udnMuZGVwcyA9IFtdO1xuICAgICAgICBhZGREZXBzKHZlcnRleF9zaGFkZXJfc291cmNlLCBzaGFkZXJbbmFtZV0udnMuZGVwcyk7XG4gICAgICAgIHNoYWRlcltuYW1lXS5mcy5kZXBzID0gW107XG4gICAgICAgIGFkZERlcHMoZnJhZ21lbnRfc2hhZGVyX3NvdXJjZSwgc2hhZGVyW25hbWVdLnZzLmRlcHMpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVNoYWRlcihnbCwgdHlwZSwgc291cmNlKSB7XG4gICAgICAgICAgICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcbiAgICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICAgICAgICAgIHZhciBzdWNjZXNzID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ05PIScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRGVwcyhzb3VyY2UsIGRlcHMpe1xuICAgICAgICAgICAgdmFyIHJlID0gL1xccyooYXR0cmlidXRlfHVuaWZvcm0pXFxzK1xcdytcXHMrKFxcdyspLzsgICAgICAgIFxuICAgICAgICAgICAgc291cmNlLnNwbGl0KCdcXG4nKS5mb3JFYWNoKGZ1bmN0aW9uKHYpe1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZS5leGVjKHYpO1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChyZXN1bHRbMl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoYWRlcjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=